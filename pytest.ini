[pytest]
DJANGO_SETTINGS_MODULE = deltacrown.settings_test
python_files = tests.py test_*.py *_test.py
addopts = --reuse-db -q --continue-on-collection-errors
collect_ignore_glob =
    scripts/_archive/*
    **/test_tournament_capacity.py
    **/test_tournament_archive.py
    **/test_tournament_events.py
    **/test_tournament_finance.py
    **/test_tournament_media.py
    **/test_tournament_rules.py
    **/test_tournament_schedule_pilot.py
    **/test_unified_registration.py
    **/test_api_endpoints.py
    **/test_state_machine.py
# pytest-asyncio installed for async WebSocket tests (Module 4.5)
# UP-PHASE12: Use 'auto' mode to avoid marking sync tests as async
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
markers =
    s3: marks tests as requiring S3/boto3 (deselect with '-m "not s3"')
    observability: marks tests for observability & cache (Module 8.3)
    smoke: marks tests for end-to-end smoke tests (Phase 9)
    ops: marks tests for DR chaos mini-drills (Phase 10)
