{# Upcoming Matches widget (MVP)
   Include via: {% upcoming_matches %} or {% upcoming_matches matches=my_matches limit=5 %}
#}
<section class="card p-3" aria-labelledby="um-title">
  <div class="d-flex align-items-center justify-content-between mb-2">
    <h2 id="um-title" class="mb-0 fw-medium">Upcoming matches</h2>
    <a class="btn btn-outline btn-sm" href="{% url 'tournaments:my_matches' %}">View all</a>
  </div>

  {% if items %}
    <ul class="list-unstyled mb-0">
      {% for m in items %}
        <li class="mb-2">
          <div class="match-meta">
            {% if m.round_no %}Round {{ m.round_no }} Â· {% endif %}
            {% if m.scheduled_at %}{{ m.scheduled_at|date:"M d, Y h:i A" }}{% else %}TBD{% endif %}
          </div>

          <div class="match-teams">
            <div class="match-team">
              <span>
                {% firstof m.team_a.tag m.team_a.name m.user_a.display_name "Team A" %}
              </span>
              <span class="vs-dot">vs</span>
              <span>
                {% firstof m.team_b.tag m.team_b.name m.user_b.display_name "Team B" %}
              </span>
            </div>
          </div>

          <div class="match-actions mt-2">
            {% if m.url %}
              <a class="btn btn-outline btn-sm" href="{{ m.url }}">Open</a>
            {% elif m.id %}
              <a class="btn btn-outline btn-sm" href="{% url 'tournaments:match_review' m.id %}">Open</a>
            {% else %}
              <span class="text-muted">No link available</span>
            {% endif %}
          </div>
        </li>
        {% if not forloop.last %}<hr/>{% endif %}
      {% endfor %}
    </ul>
  {% else %}
    <div class="text-muted">No upcoming matches.</div>
  {% endif %}
</section>
