{% load static %}
<div class="dropdown">
  <a class="dc-link position-relative dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">
    ðŸ””
    {% if unread_count %}
      <span class="badge ms-1">{{ unread_count }}</span>
    {% endif %}
  </a>
  <div class="dropdown-menu dropdown-menu-end p-0" style="min-width: 320px;">
    <div class="list-group list-group-flush">
      {% if items %}
        {% for n in items %}
          <a class="list-group-item list-group-item-action" href="{{ n.url|default:'/notifications/' }}">
            <div class="d-flex justify-content-between">
              <div class="fw-semibold">{{ n.title|default:n.get_type_display }}</div>
              <small class="text-muted">{{ n.created_at|date:"M d, H:i" }}</small>
            </div>
            {% if n.message %}
              <div class="small text-muted">{{ n.message|truncatechars:120 }}</div>
            {% endif %}
          </a>
        {% endfor %}
      {% else %}
        <div class="list-group-item text-muted">No notifications yet.</div>
      {% endif %}
      <div class="list-group-item d-flex justify-content-between">
        <a class="btn btn-link btn-sm p-0" href="{% url 'notifications:list' %}">View all</a>
        {% if unread_count %}
          <a class="btn btn-link btn-sm p-0" href="{% url 'notifications:mark_all_read' %}">Mark all read</a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
