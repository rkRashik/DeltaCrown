{% extends "base.html" %}
{% block title %}Notifications Â· DeltaCrown{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4 mb-0">Notifications</h1>
  <a class="btn btn-sm btn-outline" href="{% url 'notifications:mark_all_read' %}?next={{ request.path }}">
    Mark all as read
  </a>
</div>

{% if notifications %}
  <ul class="list-group">
    {% for n in notifications %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <div class="fw-semibold">{{ n.get_type_display }}</div>
          <div class="text-muted small">{{ n.title }}</div>
          {% if n.url %}
            <a class="small" href="{{ n.url }}">Open</a>
          {% endif %}
        </div>
        <div class="text-end">
          <div class="small text-muted">{{ n.created_at }}</div>
          {% if not n.is_read %}
            <a class="btn btn-sm btn-outline mt-1" href="{% url 'notifications:mark_read' n.id %}?next={{ request.path }}">Mark read</a>
          {% endif %}
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <div class="alert alert-info mt-3">No notifications.</div>
{% endif %}
{% endblock %}
