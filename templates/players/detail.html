{% extends "base.html" %}
{% load static %}
{% block title %}{% firstof player.display_name user.username "Player" %} — DeltaCrown{% endblock %}
{% block content %}
<section class="t-hero">
  <div class="t-hero__media">
    {% if player.avatar %}<img src="{{ player.avatar.url }}" class="t-hero__img" alt="" loading="eager">{% else %}<div class="t-hero__placeholder" aria-hidden="true"></div>{% endif %}
    <div class="t-hero__scrim" aria-hidden="true"></div>
  </div>
  <div class="container t-hero__body">
    <div class="t-hero__meta">
      <a href="/players/" class="crumb link-nav">← Players</a>
      <h1 class="t-hero__title crown-text">{% firstof player.display_name user.username "Player" %}</h1>
      <ul class="t-hero__chips">
        <li class="chip"><span class="chip__k">Region</span><span class="chip__v">{% firstof player.region "BD" %}</span></li>
      </ul>
    </div>
  </div>
  </section>

<section class="container py-10 grid lg:grid-cols-3 gap-6">
  <article class="glass p-6 rounded-2xl lg:col-span-2">
    <nav class="t-tabs border-b border-border mb-6">
      <a class="t-tab is-active" data-tab href="#overview">Overview</a>
      <a class="t-tab" data-tab href="#teams">Teams</a>
      <a class="t-tab" data-tab href="#results">Results</a>
    </nav>

    <section id="overview" class="t-section">
      {% if player.bio %}
        <p>{{ player.bio|linebreaks }}</p>
      {% else %}
        <p class="text-muted">No bio yet.</p>
      {% endif %}
    </section>

    <section id="teams" class="t-section mt-10">
      <h3 class="font-semibold mb-2">Teams</h3>
      {% if teams %}
        <div class="t-grid">
          {% for tm in teams %}
            {% include "teams/partials/_card.html" with team=tm %}
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">No active teams.</p>
      {% endif %}
    </section>

    <section id="results" class="t-section mt-10">
      <h3 class="font-semibold mb-2">Recent Results</h3>
      {% if results %}
        <ul class="grid gap-2 text-sm">
          {% for m in results %}
            <li class="flex items-center justify-between">
              <span>{% firstof m.tournament.name "Tournament" %}</span>
              <span class="text-muted">{% if m.created_at %}{{ m.created_at|date:"M d, Y" }}{% endif %}</span>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-muted">No recent results.</p>
      {% endif %}
    </section>
  </article>

  <aside class="space-y-6">
    <div class="glass p-6 rounded-2xl">
      <h3 class="font-semibold mb-2">Social</h3>
      <ul class="text-sm text-muted grid gap-1">
        {% if player.discord_id %}<li>Discord: {{ player.discord_id }}</li>{% endif %}
        {% if player.riot_id %}<li>Riot: {{ player.riot_id }}</li>{% endif %}
        {% if player.efootball_id %}<li>eFootball: {{ player.efootball_id }}</li>{% endif %}
      </ul>
    </div>
  </aside>
</section>
{% endblock %}

