{# Live Feed Widget Component #}
{# UP-PHASE-2: Reusable live feed widget for Overview tab #}
{# 
  Usage: {% include 'user_profile/profile/components/live_feed_widget.html' with activities=activity.activities %}
  Params:
    - activities: List of activity dicts with message, icon, color, created_at
    - limit: Max items to show (default: 5)
#}

{% load humanize %}

<div class="z-card p-6">
    <div class="flex justify-between items-center mb-6 border-b border-white/5 pb-4">
        <h3 class="text-lg font-display font-bold text-white flex items-center gap-2">
            <i class="fa-solid fa-rss text-[var(--z-cyan)]"></i>
            Live Feed
        </h3>
        <span class="text-xs text-gray-500 uppercase tracking-wider font-bold">Recent Activity</span>
    </div>

    {% if activities %}
        <div class="space-y-3">
            {% for activity in activities|slice:":5" %}
            <div class="flex items-start gap-3 p-3 rounded-lg bg-white/[0.02] hover:bg-white/[0.05] transition cursor-default border border-white/5">
                <div class="w-8 h-8 rounded-lg bg-black/40 flex items-center justify-center flex-shrink-0">
                    <i class="{{ activity.icon }} text-sm {{ activity.color }}"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm text-white font-medium mb-1">{{ activity.message }}</p>
                    <p class="text-xs text-gray-500 font-mono">{{ activity.created_at|date:"M j, g:i A" }}</p>
                </div>
            </div>
            {% endfor %}
        </div>

        {% if activities|length > 5 %}
        <div class="mt-4 text-center">
            <button onclick="switchTab('posts')" class="text-xs text-[var(--z-cyan)] hover:text-white transition uppercase tracking-wider font-bold">
                View All Activity â†’
            </button>
        </div>
        {% endif %}
    {% else %}
        <div class="text-center py-8">
            <i class="fa-solid fa-clock text-3xl text-gray-700 mb-3"></i>
            <p class="text-sm text-gray-500">No recent activity</p>
            {% if is_owner %}
            <p class="text-xs text-gray-600 mt-2">Play matches or join tournaments to populate your feed</p>
            {% endif %}
        </div>
    {% endif %}
</div>
