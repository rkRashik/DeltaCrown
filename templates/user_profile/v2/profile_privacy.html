{% extends "base.html" %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block extra_css %}
<link href="{% static 'css/user_profile/core.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- UP-UI-RESTORE-02: Glassmorphic Privacy Settings -->

<div class="min-h-screen bg-slate-950">
    
    <!-- Header -->
    <section class="bg-gradient-to-br from-indigo-900/50 to-slate-900/50 border-b border-white/10">
        <div class="container mx-auto px-4 md:px-6 py-8 max-w-7xl">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl md:text-4xl font-black text-white uppercase tracking-tight">Privacy Settings</h1>
                    <p class="text-slate-400 mt-2">Control who sees your profile and personal information</p>
                </div>
                <a href="{% url 'user_profile:profile_settings_v2' %}" 
                   class="px-6 py-3 bg-slate-700/60 hover:bg-slate-700 border border-white/10 rounded-lg text-white font-bold transition-all">
                    Back to Settings
                </a>
            </div>
        </div>
    </section>
    
    <!-- Content -->
    <div class="container mx-auto px-4 md:px-6 py-8 max-w-4xl">
        
        <!-- Privacy Form -->
        <form method="post" action="{% url 'user_profile:privacy_settings_save_safe' %}">
            {% csrf_token %}
            
            <!-- Profile Visibility -->
            <div class="bg-slate-900/60 backdrop-blur-lg rounded-2xl p-6 border border-white/10 mb-6">
                <h2 class="text-xl font-black text-white uppercase mb-3">Profile Visibility</h2>
                <p class="text-sm text-slate-400 mb-6">Choose who can view your profile</p>
                
                <div class="space-y-3">
                    <label class="block p-4 rounded-lg border-2 cursor-pointer transition-all {% if owner_data.privacy_settings.profile_visibility == 'public' %}border-indigo-500 bg-indigo-500/10{% else %}border-white/10 hover:border-white/20{% endif %}">
                        <input type="radio" 
                               name="profile_visibility" 
                               value="public" 
                               class="mr-3"
                               {% if owner_data.privacy_settings.profile_visibility == 'public' %}checked{% endif %}>
                        <span class="inline-flex items-center gap-2">
                            <span class="text-2xl">üåç</span>
                            <div>
                                <div class="text-white font-bold">Public</div>
                                <div class="text-sm text-slate-400">Anyone can view your profile</div>
                            </div>
                        </span>
                    </label>
                    
                    <label class="block p-4 rounded-lg border-2 cursor-pointer transition-all {% if owner_data.privacy_settings.profile_visibility == 'friends_only' %}border-indigo-500 bg-indigo-500/10{% else %}border-white/10 hover:border-white/20{% endif %}">
                        <input type="radio" 
                               name="profile_visibility" 
                               value="friends_only" 
                               class="mr-3"
                               {% if owner_data.privacy_settings.profile_visibility == 'friends_only' %}checked{% endif %}>
                        <span class="inline-flex items-center gap-2">
                            <span class="text-2xl">üë•</span>
                            <div>
                                <div class="text-white font-bold">Friends Only</div>
                                <div class="text-sm text-slate-400">Only your friends can view your profile</div>
                            </div>
                        </span>
                    </label>
                    
                    <label class="block p-4 rounded-lg border-2 cursor-pointer transition-all {% if owner_data.privacy_settings.profile_visibility == 'private' %}border-indigo-500 bg-indigo-500/10{% else %}border-white/10 hover:border-white/20{% endif %}">
                        <input type="radio" 
                               name="profile_visibility" 
                               value="private" 
                               class="mr-3"
                               {% if owner_data.privacy_settings.profile_visibility == 'private' %}checked{% endif %}>
                        <span class="inline-flex items-center gap-2">
                            <span class="text-2xl">üîí</span>
                            <div>
                                <div class="text-white font-bold">Private</div>
                                <div class="text-sm text-slate-400">Only you can view your profile</div>
                            </div>
                        </span>
                    </label>
                </div>
            </div>
            
            <!-- Field Visibility -->
            <div class="bg-slate-900/60 backdrop-blur-lg rounded-2xl p-6 border border-white/10 mb-6">
                <h2 class="text-xl font-black text-white uppercase mb-3">Field Visibility</h2>
                <p class="text-sm text-slate-400 mb-6">Choose which personal information to display</p>
                
                <div class="space-y-4">
                    <!-- Show Email -->
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/40 border border-white/10 hover:border-white/20 cursor-pointer transition-all">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üìß</span>
                            <div>
                                <div class="text-white font-semibold">Show email address</div>
                                <div class="text-sm text-slate-400">Your email will be visible on your profile</div>
                            </div>
                        </div>
                        <div class="relative inline-block w-14 h-8">
                            <input type="checkbox" 
                                   name="show_email" 
                                   class="toggle-checkbox absolute w-14 h-8 opacity-0 cursor-pointer"
                                   {% if owner_data.privacy_settings.show_email %}checked{% endif %}>
                            <div class="toggle-background w-14 h-8 bg-slate-700 rounded-full transition-all"></div>
                            <div class="toggle-dot absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-all"></div>
                        </div>
                    </label>
                    
                    <!-- Show Phone -->
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/40 border border-white/10 hover:border-white/20 cursor-pointer transition-all">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üìû</span>
                            <div>
                                <div class="text-white font-semibold">Show phone number</div>
                                <div class="text-sm text-slate-400">Your phone will be visible on your profile</div>
                            </div>
                        </div>
                        <div class="relative inline-block w-14 h-8">
                            <input type="checkbox" 
                                   name="show_phone" 
                                   class="toggle-checkbox absolute w-14 h-8 opacity-0 cursor-pointer"
                                   {% if owner_data.privacy_settings.show_phone %}checked{% endif %}>
                            <div class="toggle-background w-14 h-8 bg-slate-700 rounded-full transition-all"></div>
                            <div class="toggle-dot absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-all"></div>
                        </div>
                    </label>
                    
                    <!-- Show Real Name -->
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/40 border border-white/10 hover:border-white/20 cursor-pointer transition-all">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üë§</span>
                            <div>
                                <div class="text-white font-semibold">Show real name</div>
                                <div class="text-sm text-slate-400">Your real name will be visible on your profile</div>
                            </div>
                        </div>
                        <div class="relative inline-block w-14 h-8">
                            <input type="checkbox" 
                                   name="show_real_name" 
                                   class="toggle-checkbox absolute w-14 h-8 opacity-0 cursor-pointer"
                                   {% if owner_data.privacy_settings.show_real_name %}checked{% endif %}>
                            <div class="toggle-background w-14 h-8 bg-slate-700 rounded-full transition-all"></div>
                            <div class="toggle-dot absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-all"></div>
                        </div>
                    </label>
                </div>
            </div>
            
            <!-- Social Privacy -->
            <div class="bg-slate-900/60 backdrop-blur-lg rounded-2xl p-6 border border-white/10 mb-6">
                <h2 class="text-xl font-black text-white uppercase mb-3">Social Privacy</h2>
                <p class="text-sm text-slate-400 mb-6">Control how others interact with you</p>
                
                <div class="space-y-4">
                    <!-- Allow Friend Requests -->
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/40 border border-white/10 hover:border-white/20 cursor-pointer transition-all">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üíå</span>
                            <div>
                                <div class="text-white font-semibold">Allow friend requests</div>
                                <div class="text-sm text-slate-400">Others can send you friend requests</div>
                            </div>
                        </div>
                        <div class="relative inline-block w-14 h-8">
                            <input type="checkbox" 
                                   name="allow_friend_requests" 
                                   class="toggle-checkbox absolute w-14 h-8 opacity-0 cursor-pointer"
                                   {% if owner_data.privacy_settings.allow_friend_requests %}checked{% endif %}>
                            <div class="toggle-background w-14 h-8 bg-slate-700 rounded-full transition-all"></div>
                            <div class="toggle-dot absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-all"></div>
                        </div>
                    </label>
                    
                    <!-- Show Online Status -->
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/40 border border-white/10 hover:border-white/20 cursor-pointer transition-all">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üü¢</span>
                            <div>
                                <div class="text-white font-semibold">Show online status</div>
                                <div class="text-sm text-slate-400">Others can see when you're online</div>
                            </div>
                        </div>
                        <div class="relative inline-block w-14 h-8">
                            <input type="checkbox" 
                                   name="show_online_status" 
                                   class="toggle-checkbox absolute w-14 h-8 opacity-0 cursor-pointer"
                                   {% if owner_data.privacy_settings.show_online_status %}checked{% endif %}>
                            <div class="toggle-background w-14 h-8 bg-slate-700 rounded-full transition-all"></div>
                            <div class="toggle-dot absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-all"></div>
                        </div>
                    </label>
                </div>
            </div>
            
            <!-- Submit Button -->
            <div class="bg-slate-900/60 backdrop-blur-lg rounded-2xl p-6 border border-white/10">
                <button type="submit" 
                        class="w-full px-6 py-4 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white font-bold text-lg transition-all shadow-lg">
                    Save Privacy Settings
                </button>
                
                <p class="text-center text-sm text-slate-400 mt-4">
                    Your username and display name are always public for tournament functionality
                </p>
            </div>
        </form>
        
    </div>
    
</div>

<style>
/* Toggle Switch Styles */
.toggle-checkbox:checked + .toggle-background {
    background-color: rgb(79, 70, 229); /* indigo-600 */
}
.toggle-checkbox:checked ~ .toggle-dot {
    transform: translateX(1.5rem);
}
</style>

{% endblock %}
