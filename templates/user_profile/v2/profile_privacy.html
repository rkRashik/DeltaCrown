{% extends "base.html" %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="profile-privacy-v2">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>Privacy Settings</h1>
            <a href="{% url 'user_profile:profile_public_v2' username=profile.username %}" class="btn btn-secondary">View Profile</a>
        </div>
        
        <!-- Privacy Form -->
        <div class="privacy-container">
            <div class="privacy-section">
                <h2>Profile Visibility</h2>
                <p class="section-help">Control who can see your profile and personal information.</p>
                
                <form method="post" action="{% url 'user_profile:privacy_settings_save_safe' %}">
                    {% csrf_token %}
                    
                    <!-- Profile Visibility -->
                    <div class="form-group">
                        <label for="profile_visibility">Profile Visibility</label>
                        <select id="profile_visibility" name="profile_visibility" class="form-control">
                            <option value="public" {% if owner_data.privacy_settings.profile_visibility == 'public' %}selected{% endif %}>
                                Public - Anyone can view
                            </option>
                            <option value="friends_only" {% if owner_data.privacy_settings.profile_visibility == 'friends_only' %}selected{% endif %}>
                                Friends Only - Only friends can view
                            </option>
                            <option value="private" {% if owner_data.privacy_settings.profile_visibility == 'private' %}selected{% endif %}>
                                Private - Only you can view
                            </option>
                        </select>
                    </div>
                    
                    <!-- Field Visibility -->
                    <h3>Field Visibility</h3>
                    <p class="section-help">Choose which personal information to display on your profile.</p>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="show_email" {% if owner_data.privacy_settings.show_email %}checked{% endif %}>
                            <span>Show email address</span>
                        </label>
                    </div>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="show_phone" {% if owner_data.privacy_settings.show_phone %}checked{% endif %}>
                            <span>Show phone number</span>
                        </label>
                    </div>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="show_real_name" {% if owner_data.privacy_settings.show_real_name %}checked{% endif %}>
                            <span>Show real name</span>
                        </label>
                    </div>
                    
                    <!-- Social Privacy -->
                    <h3>Social Privacy</h3>
                    <p class="section-help">Control how others can interact with you.</p>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="allow_friend_requests" {% if owner_data.privacy_settings.allow_friend_requests %}checked{% endif %}>
                            <span>Allow friend requests</span>
                        </label>
                    </div>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="show_online_status" {% if owner_data.privacy_settings.show_online_status %}checked{% endif %}>
                            <span>Show online status</span>
                        </label>
                    </div>
                    
                    <!-- Submit Button -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Privacy Settings</button>
                    </div>
                </form>
            </div>
            
            <!-- Privacy Notice -->
            <div class="privacy-notice">
                <h3>Privacy Notice</h3>
                <p>
                    Your privacy is important to us. These settings control what information is visible
                    to other users. Some information (like your username and display name) is always
                    public to ensure tournament functionality.
                </p>
                <p>
                    For more information, see our
                    <a href="#" target="_blank">Privacy Policy</a>.
                </p>
            </div>
        </div>
    </div>
</div>

<style>
.profile-privacy-v2 { padding: 20px 0; }
.page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
.privacy-container { display: flex; flex-direction: column; gap: 30px; }
.privacy-section { padding: 30px; background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.privacy-section h2 { margin-top: 0; margin-bottom: 15px; font-size: 24px; }
.privacy-section h3 { font-size: 18px; margin-top: 30px; margin-bottom: 15px; }
.section-help { color: #666; margin-bottom: 20px; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; font-weight: 500; margin-bottom: 8px; }
.form-control { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; }
.form-control:focus { outline: none; border-color: #667eea; }
.checkbox-group { margin-bottom: 15px; }
.checkbox-label { display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 12px; background: #f8f9fa; border-radius: 6px; }
.checkbox-label input[type="checkbox"] { width: 20px; height: 20px; cursor: pointer; }
.checkbox-label span { font-size: 16px; }
.checkbox-label:hover { background: #e9ecef; }
.form-actions { margin-top: 30px; }
.btn { display: inline-block; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: 500; border: none; cursor: pointer; }
.btn-primary { background: #667eea; color: #fff; }
.btn-primary:hover { background: #5568d3; }
.btn-secondary { background: #f8f9fa; color: #333; border: 1px solid #dee2e6; }
.privacy-notice { padding: 20px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 8px; }
.privacy-notice h3 { margin-top: 0; margin-bottom: 15px; font-size: 18px; }
.privacy-notice p { margin-bottom: 10px; line-height: 1.6; }
.privacy-notice a { color: #667eea; text-decoration: underline; }
</style>
{% endblock %}
