{% extends "base.html" %}
{% load static %}
{% load profile_tags %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="profile-activity-v2">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <div class="breadcrumb">
                <a href="{% url 'user_profile:profile_public_v2' username=profile.username %}">@{{ profile.username }}</a>
                <span>/</span>
                <span>Activity</span>
            </div>
            <h1>Activity Feed</h1>
        </div>
        
        <!-- Activity Timeline -->
        <div class="activity-timeline">
            {% if activity.activities %}
                {% for event in activity.activities %}
                <div class="activity-card">
                    <div class="activity-icon">
                        <i class="icon-{{ event.event_type }}"></i>
                    </div>
                    <div class="activity-details">
                        <div class="activity-header">
                            <h3 class="activity-type">{{ event.event_type|title|replace:"_ " }}</h3>
                            <span class="activity-time">{{ event.created_at }}</span>
                        </div>
                        {% if event.event_data %}
                        <div class="activity-data">
                            {% for key, value in event.event_data.items %}
                            <div class="activity-data-item">
                                <span class="data-key">{{ key|title }}:</span>
                                <span class="data-value">{{ value }}</span>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="empty-state">
                    <i class="icon-activity-empty"></i>
                    <p>No activity yet</p>
                </div>
            {% endif %}
        </div>
        
        <!-- Pagination -->
        {% if activity.total_pages > 1 %}
        <div class="pagination">
            {% if activity.has_previous %}
            <a href="?page={{ activity.page|add:'-1' }}" class="btn btn-pagination">Previous</a>
            {% endif %}
            
            <span class="pagination-info">
                Page {{ activity.page }} of {{ activity.total_pages }} ({{ activity.total_count }} events)
            </span>
            
            {% if activity.has_next %}
            <a href="?page={{ activity.page|add:'1' }}" class="btn btn-pagination">Next</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>

<style>
.profile-activity-v2 { padding: 20px 0; }
.page-header { margin-bottom: 30px; }
.breadcrumb { display: flex; gap: 10px; align-items: center; color: #666; margin-bottom: 10px; }
.breadcrumb a { color: #667eea; text-decoration: none; }
.breadcrumb a:hover { text-decoration: underline; }
.activity-timeline { display: flex; flex-direction: column; gap: 15px; }
.activity-card { display: flex; gap: 20px; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.activity-icon { width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; background: #667eea; color: #fff; border-radius: 50%; font-size: 24px; flex-shrink: 0; }
.activity-details { flex: 1; }
.activity-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.activity-type { font-size: 18px; font-weight: bold; margin: 0; }
.activity-time { color: #999; font-size: 14px; }
.activity-data { display: flex; flex-wrap: wrap; gap: 15px; }
.activity-data-item { display: flex; gap: 5px; }
.data-key { font-weight: 500; color: #666; }
.data-value { color: #333; }
.empty-state { text-align: center; padding: 60px 20px; color: #999; }
.empty-state i { font-size: 64px; display: block; margin-bottom: 15px; }
.pagination { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px; padding: 20px; }
.pagination-info { color: #666; }
.btn-pagination { padding: 10px 20px; background: #667eea; color: #fff; border-radius: 6px; text-decoration: none; }
.btn-pagination:hover { background: #5568d3; }
</style>
{% endblock %}
