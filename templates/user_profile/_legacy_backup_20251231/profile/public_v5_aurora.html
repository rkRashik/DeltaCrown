{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block title %}{{ profile.display_name }} (@{{ profile_user.username }}) | DeltaCrown{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/design-tokens.css' %}">
<style>
    /* Aurora Zenith Profile V5 - P0 UI Skeleton */
    body { 
        background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%);
        color: #e5e7eb; 
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    /* Glass Panel Base */
    .aurora-glass {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .aurora-glass:hover {
        border-color: rgba(255, 255, 255, 0.12);
        background: rgba(255, 255, 255, 0.05);
        transform: translateY(-2px);
        box-shadow: 0 20px 60px rgba(6, 182, 212, 0.15);
    }

    /* Tab Navigation */
    .aurora-tabs {
        display: flex;
        gap: 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        overflow-x: auto;
        scrollbar-width: none;
    }
    .aurora-tabs::-webkit-scrollbar { display: none; }
    
    .aurora-tab {
        position: relative;
        padding: 1rem 0;
        color: rgba(255, 255, 255, 0.6);
        font-weight: 500;
        cursor: pointer;
        transition: color 0.3s;
        white-space: nowrap;
    }
    .aurora-tab:hover { color: rgba(255, 255, 255, 0.9); }
    .aurora-tab.active {
        color: #06b6d4;
    }
    .aurora-tab.active::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, #06b6d4, #8b5cf6);
        box-shadow: 0 0 10px rgba(6, 182, 212, 0.6);
    }

    /* Tab Content */
    .tab-content {
        display: none;
        animation: fadeIn 0.4s ease-out;
    }
    .tab-content.active {
        display: block;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Placeholder State */
    .placeholder-state {
        text-align: center;
        padding: 4rem 2rem;
        color: rgba(255, 255, 255, 0.5);
    }
    .placeholder-icon {
        width: 64px;
        height: 64px;
        margin: 0 auto 1.5rem;
        opacity: 0.3;
    }
    .placeholder-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: rgba(255, 255, 255, 0.7);
    }
    .placeholder-desc {
        font-size: 0.875rem;
        color: rgba(255, 255, 255, 0.4);
    }

    /* Utility Classes */
    .hidden { display: none !important; }
</style>
{% endblock %}

{% block content %}
<!-- Aurora Zenith Profile V5 - P0 UI Skeleton -->

<div class="max-w-7xl mx-auto px-4 py-8">
    <!-- Hero Section -->
    {% include 'user_profile/profile/partials/_hero_aurora.html' %}

    <!-- Tab Navigation -->
    <div class="aurora-glass mt-6 p-6">
        <div class="aurora-tabs" role="tablist">
            <button class="aurora-tab active" data-tab="overview" role="tab" aria-selected="true">
                <span>Overview</span>
            </button>
            <button class="aurora-tab" data-tab="highlights" role="tab">
                <span>Highlights</span>
            </button>
            <button class="aurora-tab" data-tab="bounties" role="tab">
                <span>Bounties</span>
            </button>
            <button class="aurora-tab" data-tab="endorsements" role="tab">
                <span>Endorsements</span>
            </button>
            <button class="aurora-tab" data-tab="loadout" role="tab">
                <span>Loadout</span>
            </button>
            <button class="aurora-tab" data-tab="showcase" role="tab">
                <span>Showcase</span>
            </button>
            {% if wallet_visible %}
            <button class="aurora-tab" data-tab="wallet" role="tab">
                <span>Wallet</span>
            </button>
            {% endif %}
        </div>

        <!-- Tab Content Panels -->
        <div class="mt-6">
            <!-- Overview Tab (Active by default) -->
            <div id="tab-overview" class="tab-content active" role="tabpanel">
                {% include 'user_profile/profile/partials/_tab_overview_aurora.html' %}
            </div>

            <!-- Highlights Tab -->
            <div id="tab-highlights" class="tab-content" role="tabpanel">
                {% include 'user_profile/profile/partials/_tab_highlights_placeholder.html' %}
            </div>

            <!-- Bounties Tab -->
            <div id="tab-bounties" class="tab-content" role="tabpanel">
                {% include 'user_profile/profile/partials/_tab_bounties_placeholder.html' %}
            </div>

            <!-- Endorsements Tab -->
            <div id="tab-endorsements" class="tab-content" role="tabpanel">
                {% include 'user_profile/profile/partials/_tab_endorsements_placeholder.html' %}
            </div>

            <!-- Loadout Tab -->
            <div id="tab-loadout" class="tab-content" role="tabpanel">
                {% include 'user_profile/profile/partials/_tab_loadout_placeholder.html' %}
            </div>

            <!-- Showcase Tab -->
            <div id="tab-showcase" class="tab-content" role="tabpanel">
                {% include 'user_profile/profile/partials/_tab_showcase_placeholder.html' %}
            </div>

            <!-- Wallet Tab (Owner Only) -->
            {% if wallet_visible %}
            <div id="tab-wallet" class="tab-content" role="tabpanel">
                {% include 'user_profile/profile/partials/_tab_wallet_safe.html' %}
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Tab Switching JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('.aurora-tab');
    const contents = document.querySelectorAll('.tab-content');

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            // Remove active class from all tabs and contents
            tabs.forEach(t => {
                t.classList.remove('active');
                t.setAttribute('aria-selected', 'false');
            });
            contents.forEach(c => c.classList.remove('active'));

            // Add active class to clicked tab and corresponding content
            tab.classList.add('active');
            tab.setAttribute('aria-selected', 'true');
            const targetId = 'tab-' + tab.dataset.tab;
            const targetContent = document.getElementById(targetId);
            if (targetContent) {
                targetContent.classList.add('active');
            }
        });
    });
});
</script>
{% endblock %}
