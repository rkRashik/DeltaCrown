{% comment %}
UP-PHASE14C: Facebook-Style About / Showcase Section
Shows user-controlled profile sections with privacy awareness.
Uses showcase context data from profile_public_v2 view.

Features:
- Dynamic section rendering from showcase.enabled_sections
- Featured team/passport display
- Highlight cards (achievements, tournaments, custom)
- Locked state UI for privacy-blocked sections
- Owner-only edit hints

Dependencies:
- showcase context dict (enabled_sections, featured_team_id, highlights)
- permissions dict (can_view_*)
- is_owner flag
{% endcomment %}

<!-- About / Showcase Section -->
<div class="glass-card rounded-xl p-6" id="about-showcase">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-bold text-white flex items-center gap-3">
            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <span>About</span>
        </h3>
        
        {% if is_owner %}
        <a href="{% url 'user_profile:profile_settings_v2' username=profile_user.username %}?tab=showcase" 
           class="text-xs text-indigo-400 hover:text-indigo-300 transition-colors flex items-center gap-1.5">
            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
            </svg>
            Edit Sections
        </a>
        {% endif %}
    </div>
    
    <!-- Showcase Sections -->
    <div class="space-y-4">
        
        {% if showcase %}
            {% for section_slug in showcase.section_order %}
                {% if section_slug in showcase.enabled_sections %}
                
                    <!-- Demographics Section -->
                    {% if section_slug == 'demographics' and can_view_demographics %}
                    <div class="showcase-section p-4 rounded-lg bg-slate-800/40 border border-slate-700/30">
                        <h4 class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2">
                            <span class="text-blue-400">üìä</span> Demographics
                        </h4>
                        <div class="grid grid-cols-2 gap-3 text-xs">
                            {% if profile.gender %}
                            <div>
                                <span class="text-slate-500">Gender</span>
                                <p class="text-white">{{ profile.get_gender_display }}</p>
                            </div>
                            {% endif %}
                            {% if profile.date_of_birth %}
                            <div>
                                <span class="text-slate-500">Age</span>
                                <p class="text-white">{{ profile.age }} years</p>
                            </div>
                            {% endif %}
                            {% if profile.nationality %}
                            <div>
                                <span class="text-slate-500">Nationality</span>
                                <p class="text-white">{{ profile.nationality }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% elif section_slug == 'demographics' %}
                    <div class="showcase-section-locked p-4 rounded-lg bg-slate-900/50 border border-slate-800/50">
                        <div class="text-center py-3">
                            <span class="text-2xl">üîí</span>
                            <p class="text-xs text-slate-500 mt-2">Demographics are private</p>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Location Section -->
                    {% if section_slug == 'location' and can_view_location %}
                    <div class="showcase-section p-4 rounded-lg bg-slate-800/40 border border-slate-700/30">
                        <h4 class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2">
                            <span class="text-green-400">üìç</span> Location
                        </h4>
                        <div class="text-xs space-y-2">
                            {% if profile.country %}
                            <div class="flex items-center gap-2">
                                <span class="text-slate-500">Country:</span>
                                <p class="text-white">{{ profile.country }}</p>
                            </div>
                            {% endif %}
                            {% if profile.region %}
                            <div class="flex items-center gap-2">
                                <span class="text-slate-500">Region:</span>
                                <p class="text-white">{{ profile.region }}</p>
                            </div>
                            {% endif %}
                            {% if profile.city %}
                            <div class="flex items-center gap-2">
                                <span class="text-slate-500">City:</span>
                                <p class="text-white">{{ profile.city }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% elif section_slug == 'location' %}
                    <div class="showcase-section-locked p-4 rounded-lg bg-slate-900/50 border border-slate-800/50">
                        <div class="text-center py-3">
                            <span class="text-2xl">üîí</span>
                            <p class="text-xs text-slate-500 mt-2">Location is private</p>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Featured Team Section -->
                    {% if section_slug == 'featured_team' and showcase.featured_team_id %}
                    <div class="showcase-section p-4 rounded-lg bg-gradient-to-r from-purple-900/20 to-indigo-900/20 border border-purple-500/30">
                        <h4 class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2">
                            <span class="text-purple-400">‚≠ê</span> Featured Team
                        </h4>
                        {% for team in user_teams %}
                            {% if team.team.id == showcase.featured_team_id %}
                            <div class="flex items-center gap-3">
                                {% if team.team.logo %}
                                <img src="{{ team.team.logo.url }}" alt="{{ team.team.name }}" class="w-12 h-12 rounded-lg object-cover">
                                {% else %}
                                <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white font-bold text-lg">
                                    {{ team.team.name|slice:":1" }}
                                </div>
                                {% endif %}
                                <div class="flex-1">
                                    <p class="text-sm font-semibold text-white">{{ team.team.name }}</p>
                                    <p class="text-xs text-slate-400">{{ showcase.featured_team_role|default:team.role }}</p>
                                </div>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <!-- Featured Passport Section -->
                    {% if section_slug == 'featured_passport' and showcase.featured_passport_id %}
                    <div class="showcase-section p-4 rounded-lg bg-gradient-to-r from-indigo-900/20 to-blue-900/20 border border-indigo-500/30">
                        <h4 class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2">
                            <span class="text-indigo-400">üéÆ</span> Featured Game
                        </h4>
                        {% for passport in pinned_passports %}
                            {% if passport.id == showcase.featured_passport_id %}
                            <div class="flex items-center gap-3">
                                {% if passport.game_obj.icon %}
                                <img src="{{ passport.game_obj.icon.url }}" alt="{{ passport.game_obj.name }}" class="w-12 h-12 rounded-lg object-cover">
                                {% endif %}
                                <div class="flex-1">
                                    <p class="text-sm font-semibold text-white">{{ passport.game_obj.name }}</p>
                                    <p class="text-xs text-slate-400">{{ passport.rank_display|default:"Player" }}</p>
                                </div>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <!-- Highlights Section -->
                    {% if section_slug == 'highlights' and showcase.highlights %}
                    <div class="showcase-section p-4 rounded-lg bg-slate-800/40 border border-slate-700/30">
                        <h4 class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2">
                            <span class="text-yellow-400">üèÜ</span> Highlights
                        </h4>
                        <div class="space-y-2">
                            {% for highlight in showcase.highlights %}
                            <div class="p-3 rounded-lg bg-slate-900/50 border border-slate-700/30">
                                <div class="flex items-start gap-3">
                                    <span class="text-lg">
                                        {% if highlight.type == 'tournament' %}üèÜ
                                        {% elif highlight.type == 'achievement' %}‚≠ê
                                        {% elif highlight.type == 'milestone' %}üéØ
                                        {% else %}üìå{% endif %}
                                    </span>
                                    <div class="flex-1">
                                        <p class="text-xs font-semibold text-white">{{ highlight.title }}</p>
                                        {% if highlight.description %}
                                        <p class="text-xs text-slate-400 mt-1">{{ highlight.description }}</p>
                                        {% endif %}
                                        {% if highlight.metadata %}
                                            {% if highlight.metadata.placement %}
                                            <span class="inline-block px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-300 mt-1">
                                                {{ highlight.metadata.placement }} Place
                                            </span>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                {% endif %}
            {% endfor %}
        {% else %}
            <!-- No showcase configured yet -->
            <div class="text-center py-8">
                <span class="text-3xl">üìã</span>
                <p class="text-xs text-slate-400 mt-3">No sections configured yet</p>
                {% if is_owner %}
                <a href="{% url 'user_profile:profile_settings_v2' username=profile_user.username %}?tab=showcase" 
                   class="inline-block mt-3 text-xs text-indigo-400 hover:text-indigo-300">
                    Configure Showcase ‚Üí
                </a>
                {% endif %}
            </div>
        {% endif %}
        
    </div>
</div>
