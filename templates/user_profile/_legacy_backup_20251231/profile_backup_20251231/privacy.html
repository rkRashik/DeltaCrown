{% extends "base.html" %}
{% load static %}
{% block title %}Privacy Settings - DeltaCrown{% endblock %}

{% block extra_css %}
<style>
/* Modern 2025 Esports Privacy Settings */
.glass-card {
    background: rgba(15, 23, 42, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
    transition: all 0.3s ease;
}

.glass-card:hover {
    border-color: rgba(99, 102, 241, 0.4);
}

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgb(51, 65, 85);
    transition: .4s;
    border-radius: 28px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .toggle-slider {
    background: linear-gradient(135deg, rgb(99, 102, 241), rgb(79, 70, 229));
}

input:checked + .toggle-slider:before {
    transform: translateX(22px);
}

.btn-primary {
    background: linear-gradient(135deg, rgb(99, 102, 241), rgb(79, 70, 229));
    color: white;
    border: none;
}

.btn-primary:hover {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
    transform: translateY(-1px);
}
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-slate-950">
    <div class="container mx-auto px-4 md:px-6 py-6 max-w-4xl">
        
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl md:text-4xl font-black text-white mb-2">Privacy Settings</h1>
            <p class="text-slate-400">Control who can see your profile and activity</p>
        </div>
        
        <!-- Privacy Form -->
        <form method="POST" action="{% url 'user_profile:update_privacy_settings' %}" id="privacy-form" class="space-y-6">
            {% csrf_token %}
            
            <!-- Visibility Preset -->
            <div class="glass-card rounded-xl p-6">
                <h2 class="text-xl font-bold text-white mb-4">Visibility Preset</h2>
                <p class="text-slate-400 text-sm mb-6">Quick privacy configurations - applies settings across all fields</p>
                
                <div class="space-y-4">
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50 hover:border-indigo-500/50 cursor-pointer transition-all">
                        <div>
                            <div class="font-semibold text-white">üåê PUBLIC</div>
                            <div class="text-sm text-slate-400">Maximum visibility - all profile info visible to everyone</div>
                        </div>
                        <input type="radio" name="visibility_preset" value="PUBLIC" 
                               {% if privacy_settings.visibility_preset == 'PUBLIC' %}checked{% endif %}
                               class="w-5 h-5 text-indigo-600 focus:ring-indigo-500">
                    </label>
                    
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50 hover:border-indigo-500/50 cursor-pointer transition-all">
                        <div>
                            <div class="font-semibold text-white">üë• PROTECTED</div>
                            <div class="text-sm text-slate-400">Balanced privacy - gaming info visible, personal details hidden</div>
                        </div>
                        <input type="radio" name="visibility_preset" value="PROTECTED" 
                               {% if privacy_settings.visibility_preset == 'PROTECTED' %}checked{% endif %}
                               class="w-5 h-5 text-indigo-600 focus:ring-indigo-500">
                    </label>
                    
                    <label class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50 hover:border-indigo-500/50 cursor-pointer transition-all">
                        <div>
                            <div class="font-semibold text-white">üîí PRIVATE</div>
                            <div class="text-sm text-slate-400">Maximum privacy - minimal info visible to others</div>
                        </div>
                        <input type="radio" name="visibility_preset" value="PRIVATE" 
                               {% if privacy_settings.visibility_preset == 'PRIVATE' %}checked{% endif %}
                               class="w-5 h-5 text-indigo-600 focus:ring-indigo-500">
                    </label>
                </div>
            </div>
            
            <!-- Profile & Contact Fields -->
            <div class="glass-card rounded-xl p-6">
                <h2 class="text-xl font-bold text-white mb-4">Profile & Contact Information</h2>
                <p class="text-slate-400 text-sm mb-6">Control visibility of personal details</p>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Email</div>
                            <div class="text-sm text-slate-400">Display email address on your profile</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_email" {% if privacy_settings.show_email %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Real Name</div>
                            <div class="text-sm text-slate-400">Display your real name instead of username</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_real_name" {% if privacy_settings.show_real_name %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Country</div>
                            <div class="text-sm text-slate-400">Display country/region information</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_country" {% if privacy_settings.show_country %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Phone Number</div>
                            <div class="text-sm text-slate-400">Display phone number (if set)</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_phone" {% if privacy_settings.show_phone %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Age</div>
                            <div class="text-sm text-slate-400">Display age (calculated from date of birth)</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_age" {% if privacy_settings.show_age %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Gender</div>
                            <div class="text-sm text-slate-400">Display gender information</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_gender" {% if privacy_settings.show_gender %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Address</div>
                            <div class="text-sm text-slate-400">Display physical address (for tournament registration)</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_address" {% if privacy_settings.show_address %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Gaming Activity -->
            <div class="glass-card rounded-xl p-6">
                <h2 class="text-xl font-bold text-white mb-4">Gaming Activity & History</h2>
                <p class="text-slate-400 text-sm mb-6">Control visibility of gaming data</p>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Game IDs</div>
                            <div class="text-sm text-slate-400">Display your linked game profiles and IGNs</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_game_ids" {% if privacy_settings.show_game_ids %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Match History</div>
                            <div class="text-sm text-slate-400">Display past matches and game records</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_match_history" {% if privacy_settings.show_match_history %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Activity Feed</div>
                            <div class="text-sm text-slate-400">Show recent matches, tournaments, and activity</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_activity_feed" {% if privacy_settings.show_activity_feed %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Achievements</div>
                            <div class="text-sm text-slate-400">Show your badges, awards, and milestones</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_achievements" {% if privacy_settings.show_achievements %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Tournament History</div>
                            <div class="text-sm text-slate-400">Display past tournament participations and results</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_tournaments" {% if privacy_settings.show_tournaments %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Social & Teams -->
            <div class="glass-card rounded-xl p-6">
                <h2 class="text-xl font-bold text-white mb-4">Social & Teams</h2>
                <p class="text-slate-400 text-sm mb-6">Manage social interactions and team visibility</p>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Social Links</div>
                            <div class="text-sm text-slate-400">Display connected Twitch, YouTube, Discord, etc.</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_social_links" {% if privacy_settings.show_social_links %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Teams</div>
                            <div class="text-sm text-slate-400">Display your current and past teams</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_teams" {% if privacy_settings.show_teams %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Allow Friend Requests</div>
                            <div class="text-sm text-slate-400">Let others send you friend requests</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="allow_friend_requests" {% if privacy_settings.allow_friend_requests %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Allow Team Invites</div>
                            <div class="text-sm text-slate-400">Let team managers invite you to their teams</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="allow_team_invites" {% if privacy_settings.allow_team_invites %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Allow Direct Messages</div>
                            <div class="text-sm text-slate-400">Let other users send you direct messages</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="allow_direct_messages" {% if privacy_settings.allow_direct_messages %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Economy & Inventory -->
            <div class="glass-card rounded-xl p-6">
                <h2 class="text-xl font-bold text-white mb-4">Economy & Inventory</h2>
                <p class="text-slate-400 text-sm mb-6">Control visibility of your in-platform assets</p>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Inventory Value</div>
                            <div class="text-sm text-slate-400">Display estimated value of items and currency</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_inventory_value" {% if privacy_settings.show_inventory_value %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-slate-700/50">
                        <div>
                            <div class="font-semibold text-white">Show Level & XP</div>
                            <div class="text-sm text-slate-400">Display your platform level and experience points</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" name="show_level_xp" {% if privacy_settings.show_level_xp %}checked{% endif %}>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Actions -->
            <div class="flex gap-4">
                <button type="submit" class="btn-primary px-8 py-3 rounded-lg font-bold transition-all">
                    üíæ Save Changes
                </button>
                <a href="{% url 'user_profile:profile_public_v2' username=request.user.username %}" 
                   class="px-8 py-3 rounded-lg font-bold bg-slate-700/50 hover:bg-slate-600/50 text-white transition-all">
                    ‚Üê Back to Profile
                </a>
            </div>
        </form>
        
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Toast notification for successful save
if (window.location.search.includes('success=true')) {
    const toast = document.createElement('div');
    toast.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
    toast.textContent = '‚úÖ Privacy settings saved successfully';
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
}
</script>
{% endblock %}
