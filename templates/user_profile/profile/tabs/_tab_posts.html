<div class="space-y-8 animate-fade-in">
    
    {% if relationship_ctx.is_owner %}
    <!-- Composer -->
    <div class="glass-panel p-6 rounded-2xl border-l-4 border-z-cyan">
        <div class="flex gap-4">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-z-cyan to-z-purple p-0.5">
                {% if profile.avatar_url %}
                <img src="{{ profile.avatar_url }}" class="w-full h-full object-cover rounded-xl bg-black">
                {% else %}
                <img src="https://images.unsplash.com/photo-1566492031773-4f4e44671857?q=80&w=200" class="w-full h-full object-cover rounded-xl bg-black">
                {% endif %}
            </div>
            <div class="flex-1">
                <textarea rows="2" placeholder="Broadcast a transmission..." class="w-full bg-transparent text-white placeholder-gray-500 text-sm font-medium outline-none resize-none"></textarea>
                <div class="flex justify-between items-center mt-3 pt-3 border-t border-white/5">
                    <div class="flex gap-4 text-gray-400">
                        <button class="hover:text-z-cyan transition"><i class="fa-solid fa-image"></i></button>
                    </div>
                    <button class="px-6 py-2 rounded-lg bg-white/5 hover:bg-z-cyan hover:text-black text-white text-xs font-bold uppercase transition">Send</button>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Filter Tabs -->
    <div class="flex items-center gap-6 border-b border-white/5 pb-2">
        <button class="text-z-cyan font-bold text-sm border-b-2 border-z-cyan pb-2">All Updates</button>
        <button class="text-gray-400 font-bold text-sm hover:text-white pb-2 transition">LFT / Team</button>
    </div>

    <!-- Posts Feed -->
    <div class="space-y-6">
        {% if user_posts %}
            {% for post in user_posts %}
            <!-- Post Card -->
            <div class="glass-panel p-6 rounded-2xl border {% if post.game %}border-z-green/20{% else %}border-white/5{% endif %} relative overflow-hidden group">
                {% if post.game %}
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition"><i class="fa-solid fa-bullhorn text-6xl text-z-green"></i></div>
                {% endif %}
                
                <div class="flex items-center gap-3 mb-4">
                    {% if post.author.avatar_url %}
                    <img src="{{ post.author.avatar_url }}" class="w-10 h-10 rounded-lg">
                    {% else %}
                    <img src="https://images.unsplash.com/photo-1566492031773-4f4e44671857?q=80&w=200" class="w-10 h-10 rounded-lg">
                    {% endif %}
                    <div>
                        <div class="text-white font-bold text-sm">{{ post.author.display_name|default:post.author.user.username }} <span class="text-gray-500 font-normal text-xs">@{{ post.author.user.username }}</span></div>
                        <div class="text-[10px] text-gray-500 uppercase font-bold flex items-center gap-2">
                            <span>{{ post.created_at|timesince }} ago</span>
                            {% if post.game %}
                            <span class="w-1 h-1 bg-gray-600 rounded-full"></span>
                            <span class="text-z-green">{{ post.game }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="mb-4 relative z-10">
                    {% if post.title %}
                    <h3 class="text-xl font-display font-bold text-white mb-2">{{ post.title }}</h3>
                    {% endif %}
                    <p class="text-gray-300 text-sm leading-relaxed">
                        {{ post.content|linebreaksbr }}
                    </p>
                </div>

                {% if post.media.exists %}
                <div class="mb-4 grid {% if post.media.count == 1 %}grid-cols-1{% elif post.media.count == 2 %}grid-cols-2{% else %}grid-cols-2 md:grid-cols-3{% endif %} gap-2">
                    {% for media in post.media.all %}
                    <div class="rounded-lg overflow-hidden bg-black/20">
                        {% if media.media_type == 'image' or media.media_type == 'gif' %}
                        <img src="{{ media.file.url }}" alt="{{ media.alt_text|default:'Post media' }}" class="w-full h-full object-cover">
                        {% elif media.media_type == 'video' %}
                        <video src="{{ media.file.url }}" class="w-full h-full object-cover" controls></video>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                <div class="flex items-center gap-6 text-gray-400 text-xs font-bold border-t border-white/5 pt-4">
                    <button class="hover:text-white transition flex items-center gap-2"><i class="fa-regular fa-heart"></i> {{ post.likes_count|default:0 }}</button>
                    <button class="hover:text-white transition flex items-center gap-2"><i class="fa-regular fa-comment"></i> {{ post.comments_count|default:0 }}</button>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <!-- Empty State -->
            <div class="glass-panel p-12 rounded-2xl text-center">
                <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-z-cyan/20 to-z-purple/20 border border-z-cyan/30 flex items-center justify-center">
                    <i class="fa-solid fa-bullhorn text-3xl text-z-cyan"></i>
                </div>
                <h3 class="text-white font-bold font-display text-xl mb-2">No posts yet</h3>
                <p class="text-gray-400 text-sm">
                    {% if relationship_ctx.is_owner %}
                    Share your first update with the community!
                    {% else %}
                    {{ profile.display_name|default:profile_user.username }} hasn't posted anything yet.
                    {% endif %}
                </p>
            </div>
        {% endif %}
    </div>
</div>
