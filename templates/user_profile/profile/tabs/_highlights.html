{% load static %}

<!-- HIGHLIGHTS TAB -->
<div id="tab-highlights" class="tab-content space-y-6" data-tab-panel="highlights">
    {% if is_owner %}
    <div class="flex justify-end mb-4">
        <button onclick="openEditHighlightsModal()" class="bg-[var(--z-cyan)] hover:bg-[var(--z-cyan)]/80 text-black font-bold px-6 py-2 rounded-lg transition flex items-center gap-2 text-sm uppercase tracking-wider">
            <i class="fa-solid fa-pen-to-square"></i> Edit Highlights
        </button>
    </div>
    {% endif %}
    {% if highlight_clips %}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% for clip in highlight_clips|slice:":6" %}
        <div class="z-card p-0 overflow-hidden group cursor-pointer relative aspect-video border-[var(--z-red)]/20 hover:border-[var(--z-red)] transition" onclick="openVideoModal('{{ clip.embed_url|escapejs }}', '{{ clip.title|escapejs }}', '{{ clip.url|escapejs }}')">
            {% if clip.thumbnail_url %}
            <img src="{{ clip.thumbnail_url }}" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition grayscale group-hover:grayscale-0" alt="{{ clip.title }}">
            {% else %}
            <!-- UP-PHASE2E-HOTFIX: Fallback for clips without thumbnails -->
            <div class="w-full h-full bg-gradient-to-br from-[var(--z-red)]/20 to-[var(--z-red)]/5 flex items-center justify-center">
                <i class="fa-solid fa-video text-6xl text-[var(--z-red)]/30"></i>
            </div>
            {% endif %}
            <div class="absolute top-2 right-2 bg-[var(--z-red)] text-white text-[9px] px-2 py-0.5 font-bold uppercase tracking-wider rounded">{{ clip.platform|upper }}</div>
            <div class="absolute inset-0 flex items-center justify-center">
                <div class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center group-hover:scale-110 transition pointer-events-none">
                    <i class="fa-solid fa-play text-white text-xl"></i>
                </div>
            </div>
            <div class="absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black to-transparent">
                <div class="text-sm font-bold text-white uppercase tracking-wide">{{ clip.title }}</div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="z-card p-12 text-center">
        <i class="fa-solid fa-video text-4xl text-gray-700 mb-4"></i>
        <p class="text-gray-500">No highlights uploaded yet</p>
        {% if is_owner %}
        <p class="text-xs text-gray-600 mt-2">Click "Edit Highlights" to add your first clip!</p>
        {% endif %}
    </div>
    {% endif %}
</div>
