{% load static %}

<!-- GAME IDs TAB -->
<div id="tab-game-ids" class="tab-content space-y-6">
    <div class="z-card p-8">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h2 class="text-xl font-display font-bold text-white flex items-center gap-3">
                    <i class="fa-solid fa-id-card text-[var(--z-purple)]"></i> Game Accounts
                </h2>
                <p class="text-xs text-gray-500 mt-2">Your connected gaming accounts and stats</p>
            </div>
            {% if is_owner %}
            <button onclick="openGamePassportsModal()" class="px-4 py-2 bg-[var(--z-purple)] hover:bg-[var(--z-purple)]/80 text-white font-bold text-xs uppercase tracking-wider rounded-lg transition flex items-center gap-2">
                <i class="fa-solid fa-plus"></i> Add Game ID
            </button>
            {% endif %}
        </div>

        {% if game_passports %}
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {% for passport in game_passports %}
            <div class="z-card p-6 hover:border-[var(--z-purple)]/50 transition group">
                <div class="flex items-start justify-between mb-4">
                    <div class="flex items-center gap-4">
                        {% if passport.game.icon_url %}
                        <img src="{{ passport.game.icon_url }}" class="w-12 h-12 rounded-lg" alt="{{ passport.game.name }}">
                        {% else %}
                        <div class="w-12 h-12 rounded-lg bg-[var(--z-purple)]/20 flex items-center justify-center text-[var(--z-purple)] text-xl">
                            <i class="fa-solid fa-gamepad"></i>
                        </div>
                        {% endif %}
                        <div>
                            <h3 class="text-lg font-bold text-white group-hover:text-[var(--z-purple)] transition">{{ passport.game.name }}</h3>
                            <p class="text-xs text-gray-500 uppercase tracking-wider">{{ passport.game.short_name|default:passport.game.name }}</p>
                        </div>
                    </div>
                    {% if passport.is_verified %}
                    <span class="bg-[var(--z-green)]/20 text-[var(--z-green)] text-[8px] px-2 py-1 rounded font-bold uppercase tracking-widest flex items-center gap-1">
                        <i class="fa-solid fa-check-circle"></i> Verified
                    </span>
                    {% endif %}
                </div>
                
                <div class="space-y-3">
                    {% if passport.in_game_name %}
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-user text-gray-600 text-sm"></i>
                        <span class="text-sm text-white font-mono">{{ passport.in_game_name }}</span>
                    </div>
                    {% endif %}
                    
                    {% if passport.current_rank %}
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-trophy text-[var(--z-gold)] text-sm"></i>
                        <span class="text-sm text-gray-300">{{ passport.current_rank }}</span>
                    </div>
                    {% endif %}
                    
                    {% if passport.region %}
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-globe text-[var(--z-cyan)] text-sm"></i>
                        <span class="text-sm text-gray-400 uppercase">{{ passport.region }}</span>
                    </div>
                    {% endif %}
                    
                    {% if passport.stats %}
                    <div class="mt-4 pt-4 border-t border-white/5">
                        <div class="grid grid-cols-2 gap-4">
                            {% for key, value in passport.stats.items|slice:":4" %}
                            <div class="text-center p-2 bg-white/5 rounded">
                                <div class="text-lg font-bold text-white">{{ value }}</div>
                                <div class="text-[9px] text-gray-500 uppercase tracking-wider">{{ key|title }}</div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
                
                {% if is_owner %}
                <div class="mt-4 pt-4 border-t border-white/5 flex gap-2">
                    <button class="flex-1 px-3 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-xs text-white transition">
                        <i class="fa-solid fa-refresh mr-1"></i> Refresh
                    </button>
                    <button class="px-3 py-2 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-500 rounded text-xs transition">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% elif not is_owner %}
        <div class="text-center py-16 text-gray-500">
            <i class="fa-solid fa-lock text-6xl mb-4 opacity-20"></i>
            <p class="text-lg mb-2">Game IDs are private</p>
            <p class="text-sm text-gray-600">This user hasn't made their game accounts public</p>
        </div>
        {% else %}
        <div class="text-center py-16 text-gray-500">
            <i class="fa-solid fa-id-card text-6xl mb-4 opacity-20"></i>
            <p class="text-lg mb-2">No game accounts connected</p>
            <p class="text-sm text-gray-600 mb-6">Link your gaming accounts to display your ranks, stats, and achievements</p>
            {% if is_owner %}
            <button onclick="openGamePassportsModal()" class="px-6 py-3 bg-[var(--z-purple)] hover:bg-[var(--z-purple)]/80 text-white font-bold text-sm uppercase tracking-wider rounded-lg transition inline-flex items-center gap-2">
                <i class="fa-solid fa-plus"></i> Add Your First Game ID
            </button>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
