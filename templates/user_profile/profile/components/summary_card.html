{# Summary Card Component #}
{# UP-PHASE-2: Reusable summary card for Overview dashboard #}
{# UP-PHASE-2.1: Add safety checks for missing data/privacy fallbacks #}
{# 
  Usage: {% include 'user_profile/profile/components/summary_card.html' with title="Media" icon="fa-video" stats=dashboard_summary.media tab_id="media" %}
  Params:
    - title: Card title (e.g., "Media", "Career")
    - icon: Font Awesome icon class (e.g., "fa-video")
    - stats: Summary dict with counts and latest item (can be None, {'is_private': True}, or {'available': False})
    - tab_id: Tab to navigate to when clicked
    - color: Optional Tailwind color (default: cyan)
#}

{% if not stats %}
{# No data - show empty state #}
<div class="z-card p-6 opacity-50">
    <div class="flex items-center justify-center h-32">
        <div class="text-center">
            <i class="fa-solid {{ icon|default:'fa-circle-question' }} text-3xl text-gray-700 mb-2"></i>
            <p class="text-xs text-gray-600 uppercase tracking-wider font-bold">No Data</p>
        </div>
    </div>
</div>
{% elif stats.is_private %}
{# Private - show locked card #}
<div class="z-card p-6 cursor-not-allowed opacity-50">
    <div class="flex items-center justify-center h-32">
        <div class="text-center">
            <i class="fa-solid fa-lock text-3xl text-gray-700 mb-2"></i>
            <p class="text-xs text-gray-600 uppercase tracking-wider font-bold">Private</p>
        </div>
    </div>
</div>
{% elif not stats.available %}
{# Model not available - show unavailable state #}
<div class="z-card p-6 opacity-30">
    <div class="flex items-center justify-center h-32">
        <div class="text-center">
            <i class="fa-solid fa-exclamation-triangle text-3xl text-gray-700 mb-2"></i>
            <p class="text-xs text-gray-600 uppercase tracking-wider font-bold">Unavailable</p>
        </div>
    </div>
</div>
{% else %}
{# Normal card with data #}
<div onclick="switchTab('{{ tab_id }}')" class="z-card p-6 cursor-pointer hover:border-[var(--z-{{ color|default:'cyan' }})]/50 transition group">
    <div class="flex items-start justify-between mb-4">
        <div class="w-12 h-12 rounded-xl bg-[var(--z-{{ color|default:'cyan' }})]/10 flex items-center justify-center group-hover:bg-[var(--z-{{ color|default:'cyan' }})]/20 transition">
            <i class="fa-solid {{ icon }} text-2xl text-[var(--z-{{ color|default:'cyan' }})]"></i>
        </div>
        <i class="fa-solid fa-arrow-right text-white/20 group-hover:text-[var(--z-{{ color|default:'cyan' }})] transition"></i>
    </div>

    <h3 class="text-white font-display font-bold text-lg mb-1 group-hover:text-[var(--z-{{ color|default:'cyan' }})] transition">{{ title }}</h3>
    
    {% if stats.has_content %}
        {# Render specific stats based on section #}
        {% if stats.total_count is not None %}
        <div class="space-y-2">
            <div class="flex items-baseline gap-2">
                <span class="text-3xl font-display font-bold text-white">{{ stats.total_count|default:0 }}</span>
                <span class="text-xs text-gray-500 uppercase tracking-widest font-bold">Total</span>
            </div>
            
            {% if stats.latest_clip %}
            <div class="text-xs text-gray-400 truncate">
                <i class="fa-solid fa-clock mr-1"></i>
                Latest: {{ stats.latest_clip.title|default:"Untitled" }}
            </div>
            {% endif %}
        </div>
        {% elif stats.hardware_count is not None %}
        <div class="grid grid-cols-2 gap-3">
            <div>
                <div class="text-2xl font-display font-bold text-white">{{ stats.hardware_count|default:0 }}</div>
                <div class="text-xs text-gray-500 uppercase tracking-widest font-bold">Hardware</div>
            </div>
            <div>
                <div class="text-2xl font-display font-bold text-white">{{ stats.configs_count|default:0 }}</div>
                <div class="text-xs text-gray-500 uppercase tracking-widest font-bold">Configs</div>
            </div>
        </div>
        {% elif stats.teams_count is not None %}
        <div class="space-y-2">
            <div class="flex items-baseline gap-2">
                <span class="text-3xl font-display font-bold text-white">{{ stats.teams_count|default:0 }}</span>
                <span class="text-xs text-gray-500 uppercase tracking-widest font-bold">Teams</span>
            </div>
            
            {% if stats.latest_team %}
            <div class="text-xs text-gray-400">
                <span class="px-2 py-0.5 rounded bg-white/5 border border-white/10 font-mono">{{ stats.latest_team.role|default:"Member" }}</span>
                <span class="ml-1">in {{ stats.latest_team.name|default:"Unknown" }}</span>
            </div>
            {% endif %}
        </div>
        {% elif stats.win_rate is not None %}
        <div class="grid grid-cols-2 gap-3">
            <div>
                <div class="text-2xl font-display font-bold text-[var(--z-green)]">{{ stats.win_rate|default:0 }}%</div>
                <div class="text-xs text-gray-500 uppercase tracking-widest font-bold">Win Rate</div>
            </div>
            <div>
                <div class="text-2xl font-display font-bold text-white">{{ stats.total_matches|default:0 }}</div>
                <div class="text-xs text-gray-500 uppercase tracking-widest font-bold">Matches</div>
            </div>
        </div>
        {% elif stats.active_count is not None %}
        <div class="space-y-2">
            <div class="flex items-baseline gap-2">
                <span class="text-3xl font-display font-bold text-white">{{ stats.active_count|default:0 }}</span>
                <span class="text-xs text-gray-500 uppercase tracking-widest font-bold">Active</span>
            </div>
            
            {% if stats.total_stake and stats.total_stake > 0 %}
            <div class="text-sm text-[var(--z-gold)] font-display font-bold">
                {{ stats.total_stake }} DC at stake
            </div>
            {% endif %}
        </div>
        {% elif stats.badges_count is not None %}
        <div class="space-y-2">
            <div class="flex items-baseline gap-2">
                <span class="text-3xl font-display font-bold text-white">{{ stats.badges_count|default:0 }}</span>
                <span class="text-xs text-gray-500 uppercase tracking-widest font-bold">Badges</span>
            </div>
        </div>
        {% elif stats.balance is not None %}
        <div class="space-y-2">
            <div class="text-3xl font-display font-bold text-[var(--z-gold)]">{{ stats.balance|default:0 }} DC</div>
            <div class="text-xs text-gray-500 uppercase tracking-widest font-bold">Balance</div>
        </div>
        {% endif %}
    {% else %}
        <p class="text-sm text-gray-500 mt-2">No {{ title|lower }} yet</p>
    {% endif %}
</div>
{% endif %}
