{% extends "base.html" %}
{% load static %}
{% load team_social_tags %}
{% block title %}{{ public_user.username|default:user.username|default:"Player" }} - Profile | DeltaCrown{% endblock %}

{% block extra_head %}
<link href="{% static 'siteui/css/team-social.css' %}" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
/* 🎮 GAMING PROFILE - FRESH 2025 ESPORTS DESIGN 🎮 */
.gaming-profile {
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #000000 100%);
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
}

/* Animated background particles */
.gaming-profile::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at random, rgba(0, 255, 255, 0.03) 0%, transparent 50%),
                radial-gradient(ellipse at random, rgba(255, 0, 255, 0.03) 0%, transparent 50%),
                radial-gradient(ellipse at random, rgba(0, 255, 0, 0.03) 0%, transparent 50%);
    animation: particleFloat 20s infinite linear;
    pointer-events: none;
    z-index: 0;
}

@keyframes particleFloat {
    0% { transform: translateY(0px) rotate(0deg); }
    100% { transform: translateY(-100px) rotate(360deg); }
}

/* Hero Banner Section */
.hero-banner {
    height: 400px;
    position: relative;
    background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff, #06ffa5);
    background-size: 400% 400%;
    animation: gradientShift 8s ease infinite;
    overflow: hidden;
}

@keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.8) 100%);
    backdrop-filter: blur(2px);
}

.hero-content {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    z-index: 3;
}

.hero-avatar {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    border: 4px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 0 30px rgba(0, 255, 255, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    object-fit: cover;
    margin-bottom: 20px;
    animation: heroAvatarGlow 3s ease-in-out infinite alternate;
    position: relative;
}

@keyframes heroAvatarGlow {
    0% { box-shadow: 0 0 30px rgba(0, 255, 255, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.1); }
    100% { box-shadow: 0 0 50px rgba(255, 0, 255, 0.7), inset 0 0 30px rgba(255, 255, 255, 0.2); }
}

.hero-name {
    font-size: 2.5rem;
    font-weight: 800;
    color: white;
    text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
    margin-bottom: 10px;
    letter-spacing: 2px;
}

.hero-tagline {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.1rem;
    font-weight: 500;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

/* Gaming Stats Dashboard */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin: -80px 20px 40px;
    position: relative;
    z-index: 5;
}

.stat-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 30px 20px;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s;
}

.stat-card:hover::before {
    left: 100%;
}

.stat-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 60px rgba(0, 255, 255, 0.3);
    border-color: rgba(0, 255, 255, 0.5);
}

.stat-icon {
    font-size: 2.5rem;
    margin-bottom: 15px;
    background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.stat-number {
    font-size: 2.2rem;
    font-weight: 800;
    color: white;
    text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
    display: block;
    margin-bottom: 5px;
}

.stat-label {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.9rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Gaming Navigation Tabs */
.gaming-tabs {
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 25px;
    padding: 10px;
    margin: 40px 20px;
    position: sticky;
    top: 100px;
    z-index: 10;
}

.tab-nav {
    display: flex;
    gap: 5px;
    overflow-x: auto;
}

.tab-button {
    background: none;
    border: none;
    color: rgba(255, 255, 255, 0.6);
    padding: 15px 25px;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    position: relative;
}

.tab-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff);
    border-radius: 20px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.tab-button.active,
.tab-button:hover {
    color: white;
    text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
}

.tab-button.active::before,
.tab-button:hover::before {
    opacity: 1;
}

.tab-button span {
    position: relative;
    z-index: 1;
}

/* Content Cards */
.content-section {
    padding: 0 20px 40px;
}

.gaming-card {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 25px;
    padding: 30px;
    margin-bottom: 30px;
    position: relative;
    overflow: hidden;
    transition: all 0.4s ease;
}

.gaming-card::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff, #06ffa5);
    border-radius: 25px;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
}

.gaming-card:hover::before {
    opacity: 1;
}

.gaming-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 60px rgba(0, 255, 255, 0.2);
}

.card-title {
    color: white;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.card-title i {
    background: linear-gradient(45deg, #ff006e, #8338ec);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.card-content {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
}

/* Achievement Cards */
.achievement-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.achievement-card {
    background: rgba(255, 215, 0, 0.05);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 215, 0, 0.2);
    border-radius: 20px;
    padding: 25px;
    text-align: center;
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
}

.achievement-card::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
    transform: translate(-50%, -50%);
    transition: all 0.4s ease;
}

.achievement-card:hover::before {
    width: 300px;
    height: 300px;
}

.achievement-card:hover {
    transform: translateY(-10px) rotate(2deg);
    box-shadow: 0 20px 40px rgba(255, 215, 0, 0.3);
    border-color: rgba(255, 215, 0, 0.5);
}

.achievement-icon {
    font-size: 3rem;
    color: #ffd700;
    margin-bottom: 15px;
    text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
}

/* Action Buttons */
.action-btn {
    background: linear-gradient(45deg, #ff006e, #8338ec);
    border: none;
    color: white;
    padding: 12px 30px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    position: relative;
    overflow: hidden;
}

.action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.4s;
}

.action-btn:hover::before {
    left: 100%;
}

.action-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(255, 0, 110, 0.4);
    color: white;
    text-decoration: none;
}

.secondary-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
}

.secondary-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
}

/* Responsive Design */
@media (max-width: 768px) {
    .hero-banner { height: 300px; }
    .hero-avatar { width: 100px; height: 100px; }
    .hero-name { font-size: 2rem; }
    .stats-grid { margin-top: -60px; grid-template-columns: 1fr 1fr; gap: 15px; }
    .stat-card { padding: 20px 15px; }
    .gaming-tabs { margin: 30px 10px; }
    .content-section { padding: 0 10px 30px; }
    .tab-nav { gap: 2px; }
    .tab-button { padding: 12px 20px; font-size: 0.9rem; }
}

@media (max-width: 480px) {
    .stats-grid { grid-template-columns: 1fr; }
    .achievement-grid { grid-template-columns: 1fr; }
}

/* Scrollbar Styling */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); }
::-webkit-scrollbar-thumb { 
    background: linear-gradient(45deg, #ff006e, #8338ec);
    border-radius: 10px;
}

/* Loading Animation */
@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.loading { animation: pulse 2s infinite; }
</style>
{% endblock %}

{% block content %}
<div class="gaming-profile">
  <!-- 🎮 Hero Banner Section -->
  <div class="hero-banner">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      {% if profile and profile.avatar %}
        <img src="{{ profile.avatar.url }}" alt="{{ public_user.username }}" class="hero-avatar">
      {% else %}
        <div class="hero-avatar" style="background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff); display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 800; color: white;">
          {{ public_user.username|first|upper }}
        </div>
      {% endif %}
      
      <h1 class="hero-name">{{ profile.display_name|default:public_user.get_full_name|default:public_user.username }}</h1>
      <p class="hero-tagline">
        {% if profile.bio %}
          {{ profile.bio|truncatechars:80 }}
        {% else %}
          Elite Gaming Champion • DeltaCrown Competitor
        {% endif %}
      </p>
    </div>
  </div>

  <!-- 📊 Gaming Stats Dashboard -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">🎮</div>
      <div class="stat-number" id="matches-counter">{{ stats.matches|default:"0" }}</div>
      <div class="stat-label">Total Matches</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">🏆</div>
      <div class="stat-number" id="winrate-counter">{{ stats.win_rate|default:"0" }}%</div>
      <div class="stat-label">Win Rate</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">🥇</div>
      <div class="stat-number" id="achievements-counter">{{ achievements|length|default:"0" }}</div>
      <div class="stat-label">Achievements</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">👥</div>
      <div class="stat-number" id="teams-counter">{{ teams|length|default:"0" }}</div>
      <div class="stat-label">Teams</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">💰</div>
      <div class="stat-number" id="coins-counter">{{ wallet_balance|default:"0" }}</div>
      <div class="stat-label">DeltaCoins</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">⚡</div>
      <div class="stat-number" id="rank-counter">{{ profile.current_rank|default:"Unranked" }}</div>
      <div class="stat-label">Current Rank</div>
    </div>
  </div>

  <!-- 🎯 Gaming Navigation Tabs -->
  <div class="gaming-tabs">
    <div class="tab-nav">
      <button class="tab-button active" data-tab="overview">
        <span><i class="fas fa-user"></i> Overview</span>
      </button>
      <button class="tab-button" data-tab="matches">
        <span><i class="fas fa-gamepad"></i> Match History</span>
      </button>
      <button class="tab-button" data-tab="achievements">
        <span><i class="fas fa-trophy"></i> Achievements</span>
      </button>
      <button class="tab-button" data-tab="teams">
        <span><i class="fas fa-users"></i> Teams</span>
      </button>
      <button class="tab-button" data-tab="arsenal">
        <span><i class="fas fa-shield-alt"></i> Gaming Arsenal</span>
      </button>
      <button class="tab-button" data-tab="social">
        <span><i class="fas fa-share-alt"></i> Social Hub</span>
      </button>
    </div>
  </div>

  <!-- 🚀 Main Content Area -->
  <div class="content-section">

    <!-- 📋 Overview Section -->
    <div class="tab-content active" id="overview-content">
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-user-circle"></i> Player Profile</h2>
        <div class="card-content">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
            <!-- Bio & Details -->
            <div>
              <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.2rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-info-circle" style="color: #00d4ff;"></i> About
              </h3>
              <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 20px; line-height: 1.6;">
                {{ profile.bio|default:"This elite gamer is making waves in the competitive esports scene. A rising star with incredible potential and dedication to excellence." }}
              </p>
              
              <div style="display: flex; flex-wrap: wrap; gap: 15px; margin-top: 20px;">
                {% if request.user.is_authenticated and request.user.username != public_user.username %}
                  <button id="follow-btn" class="action-btn">
                    <i class="fas fa-user-plus"></i> Follow Player
                  </button>
                  <a href="/messages/new/?to={{ public_user.username }}" class="action-btn secondary-btn">
                    <i class="fas fa-envelope"></i> Send Message
                  </a>
                {% elif request.user == public_user %}
                  <a href="{% url 'user_profile:edit' %}" class="action-btn">
                    <i class="fas fa-edit"></i> Edit Profile
                  </a>
                {% endif %}
                <button id="share-btn" class="action-btn secondary-btn">
                  <i class="fas fa-share-alt"></i> Share Profile
                </button>
              </div>
            </div>
            
            <!-- Gaming IDs & Stats -->
            <div>
              <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.2rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-gamepad" style="color: #ff6b6b;"></i> Gaming Identity
              </h3>
              <div style="display: flex; flex-direction: column; gap: 12px;">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <span style="color: rgba(255, 255, 255, 0.6);">Username:</span>
                  <span style="color: white; font-weight: 600;">{{ public_user.username }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <span style="color: rgba(255, 255, 255, 0.6);">Member Since:</span>
                  <span style="color: white; font-weight: 600;">{{ public_user.date_joined|date:"M Y" }}</span>
                </div>
                {% if profile.riot_id %}
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <span style="color: rgba(255, 255, 255, 0.6);"><i class="fas fa-fire"></i> Riot ID:</span>
                  <span style="color: #ff4757; font-weight: 600;">{{ profile.riot_id }}</span>
                </div>
                {% endif %}
                {% if profile.efootball_id %}
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <span style="color: rgba(255, 255, 255, 0.6);"><i class="fas fa-futbol"></i> eFootball:</span>
                  <span style="color: #2ed573; font-weight: 600;">{{ profile.efootball_id }}</span>
                </div>
                {% endif %}
                {% if profile.discord_id %}
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <span style="color: rgba(255, 255, 255, 0.6);"><i class="fab fa-discord"></i> Discord:</span>
                  <span style="color: #7289da; font-weight: 600;">{{ profile.discord_id }}</span>
                </div>
                {% endif %}
                {% if profile.region %}
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <span style="color: rgba(255, 255, 255, 0.6);"><i class="fas fa-map-marker-alt"></i> Region:</span>
                  <span style="color: white; font-weight: 600;">{{ profile.get_region_display|default:profile.region }}</span>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>

      
      <!-- Current Team Membership (if any) -->
      {% if current_teams %}
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-users"></i> Team Memberships</h2>
        <div class="card-content">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
            {% for team_membership in current_teams|slice:":3" %}
            <div style="background: rgba(255, 255, 255, 0.05); border-radius: 20px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease; position: relative;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 15px 40px rgba(0, 255, 255, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
              {% if team_membership.is_captain %}
              <div style="position: absolute; top: 10px; right: 10px; background: linear-gradient(45deg, #ffd700, #ffed4e); color: #000; padding: 4px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 600;">
                <i class="fas fa-crown"></i> CAPTAIN
              </div>
              {% endif %}
              
              <div style="display: flex; align-items: center; margin-bottom: 15px;">
                {% if team_membership.logo_url %}
                  <img src="{{ team_membership.logo_url }}" 
                       alt="{{ team_membership.team.name }}" style="width: 50px; height: 50px; border-radius: 12px; object-fit: cover; margin-right: 12px; border: 2px solid rgba(255, 255, 255, 0.1);">
                {% else %}
                  <div style="width: 50px; height: 50px; border-radius: 12px; margin-right: 12px; border: 2px solid rgba(255, 255, 255, 0.1); background: linear-gradient(45deg, #ff006e, #8338ec); display: flex; align-items: center; justify-content: center; font-size: 1.3rem; font-weight: 800; color: white;">
                    {{ team_membership.team.name|first|upper }}
                  </div>
                {% endif %}
                <div>
                  <h4 style="color: white; font-weight: 600; margin: 0 0 3px 0; font-size: 1.1rem;">{{ team_membership.team.name }}</h4>
                  <div style="color: rgba(0, 255, 255, 0.8); font-weight: 500; font-size: 0.9rem;">{{ team_membership.role }}</div>
                  {% if team_membership.game %}
                    <div style="color: rgba(255, 255, 255, 0.6); font-size: 0.8rem; margin-top: 2px;">
                      <i class="fas fa-gamepad"></i> {{ team_membership.game }}
                    </div>
                  {% endif %}
                </div>
              </div>
              
              <a href="{% url 'teams:teams_social:team_social_detail' team_membership.team.slug %}" class="action-btn" style="font-size: 0.8rem; padding: 8px 18px; width: 100%; text-align: center; display: block; text-decoration: none;">
                <i class="fas fa-arrow-right"></i> View Team
              </a>
            </div>
            {% endfor %}
          </div>
          
          {% if current_teams|length > 3 %}
          <div style="text-align: center; margin-top: 20px;">
            <button class="tab-button" data-tab="teams" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2);">
              View All Teams ({{ current_teams|length }})
            </button>
          </div>
          {% endif %}
        </div>
      </div>
      {% endif %}

      <!-- Tournament Activity -->
      {% if upcoming_tournaments or tournament_history %}
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-trophy"></i> Tournament Activity</h2>
        <div class="card-content">
          {% if upcoming_tournaments %}
            <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <i class="fas fa-clock" style="color: #00d4ff;"></i> Upcoming Tournaments
            </h3>
            <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 25px;">
              {% for tournament in upcoming_tournaments|slice:":3" %}
              <div style="display: flex; align-items: center; gap: 15px; padding: 12px; background: rgba(0, 212, 255, 0.1); border-radius: 12px; border-left: 4px solid #00d4ff;">
                <div style="width: 35px; height: 35px; background: linear-gradient(45deg, #00d4ff, #0099cc); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                  <i class="fas fa-trophy" style="color: white; font-size: 0.9rem;"></i>
                </div>
                <div style="flex-grow: 1;">
                  <p style="color: white; margin: 0; font-weight: 500; font-size: 0.95rem;">{{ tournament.tournament.name }}</p>
                  <small style="color: rgba(255, 255, 255, 0.7);">
                    {% if tournament.as_team %}with {{ tournament.team.name }}{% else %}Solo Entry{% endif %}
                    • Registered {{ tournament.registered_at|date:"M j" }}
                  </small>
                </div>
              </div>
              {% endfor %}
            </div>
          {% endif %}
          
          {% if tournament_history %}
            <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <i class="fas fa-history" style="color: #ff6b6b;"></i> Recent Tournaments
            </h3>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              {% for tournament in tournament_history|slice:":3" %}
              <div style="display: flex; align-items: center; gap: 15px; padding: 12px; background: rgba(255, 255, 255, 0.03); border-radius: 12px; border-left: 4px solid rgba(255, 255, 255, 0.2);">
                <div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                  <i class="fas fa-medal" style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem;"></i>
                </div>
                <div style="flex-grow: 1;">
                  <p style="color: white; margin: 0; font-weight: 500; font-size: 0.95rem;">{{ tournament.tournament.name }}</p>
                  <small style="color: rgba(255, 255, 255, 0.6);">
                    {% if tournament.as_team %}with {{ tournament.team.name }}{% else %}Solo{% endif %}
                    • {{ tournament.registered_at|date:"M j, Y" }}
                  </small>
                </div>
              </div>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>
      {% endif %}
      
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-clock"></i> Recent Activity</h2>
        <div class="card-content">
          {% if activity %}
            <div style="display: flex; flex-direction: column; gap: 15px;">
              {% for act in activity|slice:":5" %}
              <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255, 255, 255, 0.03); border-radius: 15px; border-left: 4px solid #00d4ff;">
                <div style="width: 40px; height: 40px; {% if act.type == 'coin_transaction' %}background: {% if act.amount > 0 %}linear-gradient(45deg, #00d4aa, #01a085){% else %}linear-gradient(45deg, #ff4757, #ff3838){% endif %}{% elif act.type == 'ecommerce_order' %}background: linear-gradient(45deg, #ffd700, #ffed4e){% else %}background: linear-gradient(45deg, #ff006e, #8338ec){% endif %}; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                  {% if act.type == 'team_post' %}
                    <i class="fas fa-edit" style="color: white;"></i>
                  {% elif act.type == 'team_activity' %}
                    <i class="fas fa-users" style="color: white;"></i>
                  {% elif act.type == 'coin_transaction' %}
                    <i class="fas fa-coins" style="color: white;"></i>
                  {% elif act.type == 'ecommerce_order' %}
                    <i class="fas fa-shopping-cart" style="color: {% if act.type == 'ecommerce_order' %}#000{% else %}white{% endif %};"></i>
                  {% else %}
                    <i class="fas fa-bolt" style="color: white;"></i>
                  {% endif %}
                </div>
                <div style="flex-grow: 1;">
                  <p style="color: white; margin: 0; font-weight: 500;">{{ act.description }}</p>
                  {% if act.title %}
                    <p style="color: rgba(255, 255, 255, 0.8); margin: 4px 0 0 0; font-size: 0.9rem;">"{{ act.title }}"</p>
                  {% endif %}
                  <div style="display: flex; align-items: center; gap: 15px; margin-top: 5px;">
                    <small style="color: rgba(255, 255, 255, 0.6);">{{ act.date|date:"M j, g:i A" }}</small>
                    {% if act.team %}
                      <small style="color: rgba(0, 255, 255, 0.8);"><i class="fas fa-users"></i> {{ act.team.name }}</small>
                    {% endif %}
                  </div>
                </div>
                {% if act.url %}
                <a href="{{ act.url }}" style="color: rgba(0, 255, 255, 0.8); text-decoration: none;">
                  <i class="fas fa-external-link-alt"></i>
                </a>
                {% endif %}
              </div>
              {% endfor %}
            </div>
          {% else %}
            <div style="text-align: center; padding: 40px 0;">
              <i class="fas fa-history" style="font-size: 3rem; color: rgba(255, 255, 255, 0.3); margin-bottom: 15px;"></i>
              <p style="color: rgba(255, 255, 255, 0.6);">No recent activity to display</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- 🎮 Match History Section -->
    <div class="tab-content" id="matches-content" style="display: none;">
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-gamepad"></i> Match History</h2>
        <div class="card-content">
          {% if match_history %}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
              {% for match in match_history %}
              <div style="background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 15px 40px rgba(0, 255, 255, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                  <h4 style="color: white; font-weight: 600; margin: 0;">{{ match.tournament_name }}</h4>
                  <span style="padding: 8px 15px; border-radius: 20px; font-weight: 600; font-size: 0.8rem; 
                    {% if match.result == 'Win' %}background: linear-gradient(45deg, #00d4aa, #01a085); color: white;
                    {% elif match.result == 'Loss' %}background: linear-gradient(45deg, #ff4757, #ff3838); color: white;
                    {% else %}background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8);{% endif %}">
                    {{ match.result }}
                  </span>
                </div>
                <div style="color: rgba(255, 255, 255, 0.7); margin-bottom: 15px; display: flex; gap: 20px; flex-wrap: wrap;">
                  <span><i class="fas fa-gamepad"></i> {{ match.game }}</span>
                  <span><i class="fas fa-calendar"></i> {{ match.played_at|date:"M j" }}</span>
                </div>
                {% if match.summary %}
                <p style="color: rgba(255, 255, 255, 0.6); margin-bottom: 15px;">{{ match.summary|truncatechars:120 }}</p>
                {% endif %}
                <a href="{{ match.url }}" class="action-btn" style="font-size: 0.9rem; padding: 8px 20px;">
                  <i class="fas fa-eye"></i> View Details
                </a>
              </div>
              {% endfor %}
            </div>
          {% else %}
            <div style="text-align: center; padding: 60px 0;">
              <i class="fas fa-gamepad" style="font-size: 4rem; color: rgba(255, 255, 255, 0.2); margin-bottom: 20px;"></i>
              <h3 style="color: rgba(255, 255, 255, 0.8); margin-bottom: 10px;">No Matches Yet</h3>
              <p style="color: rgba(255, 255, 255, 0.5);">This player hasn't participated in any competitive matches.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- 🏆 Achievements Section -->
    <div class="tab-content" id="achievements-content" style="display: none;">
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-trophy"></i> Achievements & Awards</h2>
        <div class="card-content">
          {% if achievements %}
            <div class="achievement-grid">
              {% for achievement in achievements %}
              <div class="achievement-card">
                <div class="achievement-icon">🏆</div>
                <h4 style="color: white; font-weight: 600; margin: 0 0 10px 0;">{{ achievement.title }}</h4>
                <p style="color: rgba(255, 255, 255, 0.7); margin: 0 0 15px 0;">{{ achievement.description }}</p>
                <small style="color: rgba(255, 215, 0, 0.8);">
                  <i class="fas fa-calendar"></i> {{ achievement.earned_at|date:"M j, Y" }}
                </small>
              </div>
              {% endfor %}
            </div>
          {% else %}
            <div style="text-align: center; padding: 60px 0;">
              <i class="fas fa-trophy" style="font-size: 4rem; color: rgba(255, 215, 0, 0.3); margin-bottom: 20px;"></i>
              <h3 style="color: rgba(255, 255, 255, 0.8); margin-bottom: 10px;">No Achievements Yet</h3>
              <p style="color: rgba(255, 255, 255, 0.5);">This player is working towards their first achievements.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- 👥 Teams Section -->
    <div class="tab-content" id="teams-content" style="display: none;">
      <!-- Current Teams -->
      {% if current_teams %}
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-users"></i> Current Teams</h2>
        <div class="card-content">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px;">
            {% for team_membership in current_teams %}
            <div style="background: rgba(255, 255, 255, 0.05); border-radius: 20px; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease; position: relative;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 20px 50px rgba(0, 255, 255, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
              {% if team_membership.is_captain %}
              <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #ffd700, #ffed4e); color: #000; padding: 5px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">
                <i class="fas fa-crown"></i> CAPTAIN
              </div>
              {% endif %}
              
              <div style="display: flex; align-items: center; margin-bottom: 20px;">
                {% if team_membership.logo_url %}
                  <img src="{{ team_membership.logo_url }}" 
                       alt="{{ team_membership.team.name }}" style="width: 70px; height: 70px; border-radius: 15px; object-fit: cover; margin-right: 15px; border: 2px solid rgba(255, 255, 255, 0.1);">
                {% else %}
                  <div style="width: 70px; height: 70px; border-radius: 15px; margin-right: 15px; border: 2px solid rgba(255, 255, 255, 0.1); background: linear-gradient(45deg, #ff006e, #8338ec); display: flex; align-items: center; justify-content: center; font-size: 1.8rem; font-weight: 800; color: white;">
                    {{ team_membership.team.name|first|upper }}
                  </div>
                {% endif %}
                <div>
                  <h4 style="color: white; font-weight: 600; margin: 0 0 5px 0;">{{ team_membership.team.name }}</h4>
                  {% if team_membership.team.tag %}
                    <div style="color: rgba(0, 255, 255, 0.6); font-size: 0.9rem; margin-bottom: 5px;">[{{ team_membership.team.tag }}]</div>
                  {% endif %}
                  <span style="color: rgba(0, 255, 255, 0.8); font-weight: 500; font-size: 0.9rem;">{{ team_membership.role }}</span>
                  {% if team_membership.game %}
                    <div style="color: rgba(255, 255, 255, 0.6); font-size: 0.8rem; margin-top: 2px;">
                      <i class="fas fa-gamepad"></i> {{ team_membership.game }}
                    </div>
                  {% endif %}
                </div>
              </div>
              
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 10px; background: rgba(255, 255, 255, 0.03); border-radius: 10px;">
                <span style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem;">
                  <i class="fas fa-calendar"></i> Joined {{ team_membership.joined_at|date:"M j, Y" }}
                </span>
                <span style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem;">
                  <i class="fas fa-users"></i> {{ team_membership.team.members_count|default:"--" }} members
                </span>
              </div>
              
              <div style="display: flex; gap: 10px;">
                <a href="{% url 'teams:teams_social:team_social_detail' team_membership.team.slug %}" class="action-btn" style="font-size: 0.9rem; padding: 10px 20px; flex: 1; text-align: center;">
                  <i class="fas fa-arrow-right"></i> View Team
                </a>
                {% if team_membership.team.allow_followers %}
                <button class="action-btn secondary-btn" style="font-size: 0.9rem; padding: 10px 15px;" title="Follow Team">
                  <i class="fas fa-heart"></i>
                </button>
                {% endif %}
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endif %}
      
      <!-- Team History -->
      {% if team_history %}
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-history"></i> Team History</h2>
        <div class="card-content">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
            {% for team_membership in team_history %}
            <div style="background: rgba(255, 255, 255, 0.03); border-radius: 15px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.08); transition: all 0.3s ease; opacity: 0.8;" onmouseover="this.style.opacity='1'; this.style.transform='translateY(-3px)'" onmouseout="this.style.opacity='0.8'; this.style.transform='translateY(0)'">
              <div style="display: flex; align-items: center; margin-bottom: 15px;">
                {% if team_membership.logo_url %}
                  <img src="{{ team_membership.logo_url }}" 
                       alt="{{ team_membership.team.name }}" style="width: 50px; height: 50px; border-radius: 12px; object-fit: cover; margin-right: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                {% else %}
                  <div style="width: 50px; height: 50px; border-radius: 12px; margin-right: 12px; border: 1px solid rgba(255, 255, 255, 0.1); background: linear-gradient(45deg, #666, #888); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: 600; color: white;">
                    {{ team_membership.team.name|first|upper }}
                  </div>
                {% endif %}
                <div>
                  <h5 style="color: rgba(255, 255, 255, 0.9); font-weight: 600; margin: 0 0 3px 0; font-size: 1rem;">{{ team_membership.team.name }}</h5>
                  <div style="color: rgba(255, 255, 255, 0.6); font-size: 0.85rem;">{{ team_membership.role }}</div>
                  {% if team_membership.game %}
                    <div style="color: rgba(255, 255, 255, 0.5); font-size: 0.8rem;"><i class="fas fa-gamepad"></i> {{ team_membership.game }}</div>
                  {% endif %}
                </div>
              </div>
              <div style="color: rgba(255, 255, 255, 0.5); font-size: 0.8rem;">
                <i class="fas fa-clock"></i> Member from {{ team_membership.joined_at|date:"M Y" }}
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endif %}
      
      <!-- No Teams State -->
      {% if not current_teams and not team_history %}
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-users"></i> Team Affiliations</h2>
        <div class="card-content">
          <div style="text-align: center; padding: 60px 0;">
            <i class="fas fa-users" style="font-size: 4rem; color: rgba(255, 255, 255, 0.2); margin-bottom: 20px;"></i>
            <h3 style="color: rgba(255, 255, 255, 0.8); margin-bottom: 10px;">No Team Memberships</h3>
            <p style="color: rgba(255, 255, 255, 0.5);">This player is currently flying solo or team information is private.</p>
            <a href="{% url 'teams:list' %}" class="action-btn" style="margin-top: 20px;">
              <i class="fas fa-search"></i> Browse Teams
            </a>
          </div>
        </div>
      </div>
      {% endif %}
    </div>

    <!-- 🛡️ Gaming Arsenal Section -->
    <div class="tab-content" id="arsenal-content" style="display: none;">
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-shield-alt"></i> Gaming Arsenal</h2>
        <div class="card-content">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
            <!-- Gaming Setup -->
            <div style="background: rgba(255, 255, 255, 0.03); border-radius: 20px; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.1);">
              <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.3rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-desktop" style="color: #ff6b6b;"></i> Gaming Setup
              </h3>
              <div style="display: flex; flex-direction: column; gap: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: rgba(255, 255, 255, 0.6);">Platform:</span>
                  <span style="color: white; font-weight: 600;">PC Master Race</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: rgba(255, 255, 255, 0.6);">Primary Game:</span>
                  <span style="color: white; font-weight: 600;">Valorant</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: rgba(255, 255, 255, 0.6);">Rank:</span>
                  <span style="color: #ffd700; font-weight: 600;">{{ profile.current_rank|default:"Immortal" }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: rgba(255, 255, 255, 0.6);">Mouse:</span>
                  <span style="color: white; font-weight: 600;">Logitech Pro X</span>
                </div>
              </div>
            </div>
            
            <!-- Favorite Games -->
            <div style="background: rgba(255, 255, 255, 0.03); border-radius: 20px; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.1);">
              <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.3rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-gamepad" style="color: #4ecdc4;"></i> Favorite Games
              </h3>
              <div style="display: flex; flex-direction: column; gap: 15px;">
                <div style="display: flex; align-items: center; gap: 15px; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <div style="width: 40px; height: 40px; background: linear-gradient(45deg, #ff4757, #ff3838); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-crosshairs" style="color: white;"></i>
                  </div>
                  <div>
                    <div style="color: white; font-weight: 600;">Valorant</div>
                    <div style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem;">Tactical FPS</div>
                  </div>
                </div>
                <div style="display: flex; align-items: center; gap: 15px; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                  <div style="width: 40px; height: 40px; background: linear-gradient(45deg, #2ed573, #1abc9c); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-futbol" style="color: white;"></i>
                  </div>
                  <div>
                    <div style="color: white; font-weight: 600;">eFootball</div>
                    <div style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem;">Sports Simulation</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 🌐 Social Hub Section -->
    <div class="tab-content" id="social-content" style="display: none;">
      <div class="gaming-card">
        <h2 class="card-title"><i class="fas fa-share-alt"></i> Social Hub</h2>
        <div class="card-content">
          {% if profile.youtube_link or profile.twitch_link or profile.discord_id or social %}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
              {% if profile.youtube_link %}
              <a href="{{ profile.youtube_link }}" target="_blank" rel="noopener" style="text-decoration: none; display: block; background: rgba(255, 0, 0, 0.1); border: 1px solid rgba(255, 0, 0, 0.2); border-radius: 20px; padding: 30px; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 20px 40px rgba(255, 0, 0, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                <i class="fab fa-youtube" style="font-size: 3rem; color: #ff0000; margin-bottom: 15px;"></i>
                <h4 style="color: white; margin: 0 0 10px 0;">YouTube</h4>
                <p style="color: rgba(255, 255, 255, 0.7); margin: 0;">Watch gaming content & highlights</p>
              </a>
              {% endif %}
              
              {% if profile.twitch_link %}
              <a href="{{ profile.twitch_link }}" target="_blank" rel="noopener" style="text-decoration: none; display: block; background: rgba(145, 70, 255, 0.1); border: 1px solid rgba(145, 70, 255, 0.2); border-radius: 20px; padding: 30px; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 20px 40px rgba(145, 70, 255, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                <i class="fab fa-twitch" style="font-size: 3rem; color: #9146ff; margin-bottom: 15px;"></i>
                <h4 style="color: white; margin: 0 0 10px 0;">Twitch</h4>
                <p style="color: rgba(255, 255, 255, 0.7); margin: 0;">Live streaming & gameplay</p>
              </a>
              {% endif %}
              
              {% if profile.discord_id %}
              <div style="background: rgba(114, 137, 218, 0.1); border: 1px solid rgba(114, 137, 218, 0.2); border-radius: 20px; padding: 30px; text-align: center;">
                <i class="fab fa-discord" style="font-size: 3rem; color: #7289da; margin-bottom: 15px;"></i>
                <h4 style="color: white; margin: 0 0 10px 0;">Discord</h4>
                <p style="color: rgba(255, 255, 255, 0.7); margin: 0;">{{ profile.discord_id }}</p>
              </div>
              {% endif %}
              
              {% for link in social %}
              <a href="{{ link.url }}" target="_blank" rel="noopener" style="text-decoration: none; display: block; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 30px; text-align: center; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 20px 40px rgba(0, 255, 255, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                <i class="fas fa-link" style="font-size: 3rem; color: #00d4ff; margin-bottom: 15px;"></i>
                <h4 style="color: white; margin: 0 0 10px 0;">{{ link.platform }}</h4>
                <p style="color: rgba(255, 255, 255, 0.7); margin: 0;">{{ link.handle|default:"Visit profile" }}</p>
              </a>
              {% endfor %}
            </div>
          {% else %}
            <div style="text-align: center; padding: 60px 0;">
              <i class="fas fa-share-alt" style="font-size: 4rem; color: rgba(255, 255, 255, 0.2); margin-bottom: 20px;"></i>
              <h3 style="color: rgba(255, 255, 255, 0.8); margin-bottom: 10px;">No Social Links</h3>
              <p style="color: rgba(255, 255, 255, 0.5);">This player hasn't connected any social accounts yet.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>



{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // 🎯 Gaming Tab System
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    
    // Tab switching with smooth animations
    tabButtons.forEach(button => {
        button.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            
            // Remove active states
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => {
                content.style.display = 'none';
                content.classList.remove('active');
            });
            
            // Set active states
            this.classList.add('active');
            const targetContent = document.getElementById(targetTab + '-content');
            if (targetContent) {
                targetContent.style.display = 'block';
                setTimeout(() => targetContent.classList.add('active'), 50);
            }
        });
    });
    
    // 🔢 Animated Counters
    function animateCounter(element, target, duration = 2000) {
        let start = 0;
        const increment = target / (duration / 16);
        
        function updateCounter() {
            start += increment;
            if (start < target) {
                element.textContent = Math.floor(start);
                requestAnimationFrame(updateCounter);
            } else {
                element.textContent = target;
            }
        }
        updateCounter();
    }
    
    // Initialize counters
    const observerOptions = {
        threshold: 0.5,
        rootMargin: '0px 0px -100px 0px'
    };
    
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting && !entry.target.dataset.animated) {
                const target = parseInt(entry.target.textContent) || 0;
                if (target > 0) {
                    animateCounter(entry.target, target);
                    entry.target.dataset.animated = 'true';
                }
            }
        });
    }, observerOptions);
    
    // Observe stat counters
    document.querySelectorAll('#matches-counter, #winrate-counter, #achievements-counter, #teams-counter').forEach(counter => {
        counterObserver.observe(counter);
    });
    
    // 🚀 Action Buttons
    const followBtn = document.getElementById('follow-btn');
    if (followBtn) {
        followBtn.addEventListener('click', function() {
            const isFollowing = this.classList.contains('following');
            
            if (isFollowing) {
                this.innerHTML = '<i class="fas fa-user-plus"></i> Follow Player';
                this.classList.remove('following');
            } else {
                this.innerHTML = '<i class="fas fa-user-check"></i> Following';
                this.classList.add('following');
                
                // Celebration effect
                this.style.background = 'linear-gradient(45deg, #00d4aa, #01a085)';
                setTimeout(() => {
                    this.style.background = 'linear-gradient(45deg, #ff006e, #8338ec)';
                }, 1000);
            }
        });
    }
    
    // Share button functionality
    const shareBtn = document.getElementById('share-btn');
    if (shareBtn) {
        shareBtn.addEventListener('click', async function() {
            const url = window.location.href;
            const title = document.querySelector('.hero-name').textContent + ' - DeltaCrown Profile';
            
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: title,
                        url: url
                    });
                } catch (err) {
                    console.log('Share cancelled');
                }
            } else if (navigator.clipboard) {
                try {
                    await navigator.clipboard.writeText(url);
                    
                    // Success feedback
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    this.style.background = 'linear-gradient(45deg, #00d4aa, #01a085)';
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.style.background = 'rgba(255, 255, 255, 0.1)';
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy: ', err);
                }
            }
        });
    }
    
    // 🎨 Particle Animation Enhancement
    let particles = [];
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    
    function createParticleSystem() {
        canvas.style.position = 'fixed';
        canvas.style.top = '0';
        canvas.style.left = '0';
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        canvas.style.pointerEvents = 'none';
        canvas.style.zIndex = '1';
        canvas.style.opacity = '0.3';
        
        document.body.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Create particles
        for (let i = 0; i < 50; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 2 + 1,
                speedX: (Math.random() - 0.5) * 0.5,
                speedY: (Math.random() - 0.5) * 0.5,
                color: `hsl(${Math.random() * 60 + 180}, 100%, 70%)`
            });
        }
        
        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                particle.x += particle.speedX;
                particle.y += particle.speedY;
                
                // Wrap around screen
                if (particle.x > canvas.width) particle.x = 0;
                if (particle.x < 0) particle.x = canvas.width;
                if (particle.y > canvas.height) particle.y = 0;
                if (particle.y < 0) particle.y = canvas.height;
                
                // Draw particle
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fillStyle = particle.color;
                ctx.fill();
            });
            
            requestAnimationFrame(animateParticles);
        }
        
        animateParticles();
    }
    
    // Initialize particle system after a short delay
    setTimeout(createParticleSystem, 1000);
    
    // 🎮 Gaming Effects
    document.querySelectorAll('.gaming-card, .stat-card, .achievement-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Smooth scroll for tab switching
    tabButtons.forEach(button => {
        button.addEventListener('click', function() {
            document.querySelector('.gaming-tabs').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        });
    });
});
</script>
{% endblock %}
