{% load static nav_extras dc_avatar %}
<div id="main-drawer" class="mobile-drawer" hidden role="dialog" aria-modal="true" aria-labelledby="mobile-nav-title">
  <button class="mobile-drawer__overlay" data-close-drawer aria-label="Close menu"></button>
  <div class="mobile-drawer__panel" role="document">
    <div class="mobile-drawer__header">
      {% nav_active '/' as is_home %}
      <a href="/" class="mobile-drawer__brand"{% if is_home %} aria-current="page"{% endif %}>
        <img src="{% static 'siteui/svg/Logos/DeltaCrown.svg' %}" alt="DeltaCrown" class="mobile-drawer__brand-mark" />
        <span class="mobile-drawer__brand-name">DeltaCrown</span>
      </a>
      <button class="mobile-drawer__close" data-close-drawer aria-label="Close menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="m6 6 12 12M6 18 18 6" />
        </svg>
      </button>
    </div>

    <nav class="mobile-drawer__nav" aria-labelledby="mobile-nav-title">
      <h2 id="mobile-nav-title" class="sr-only">Main navigation</h2>
      <ul class="mobile-drawer__list" role="list">
        {% nav_active '/tournaments/' '/tournaments' as tournaments_active %}
        <li class="mobile-drawer__item">
          <a class="mobile-drawer__link{% if tournaments_active %} is-active{% endif %}" href="/tournaments/"{% if tournaments_active %} aria-current="page"{% endif %}>
            <span>Tournaments</span>
          </a>
        </li>
        {% nav_active '/teams/' '/teams' as teams_active %}
        <li class="mobile-drawer__item">
          <a class="mobile-drawer__link{% if teams_active %} is-active{% endif %}" href="/teams/"{% if teams_active %} aria-current="page"{% endif %}>
            <span>Teams</span>
          </a>
        </li>
        {% if request.user.is_authenticated %}
        {% nav_active '/dashboard/' '/dashboard' as dashboard_active %}
        <li class="mobile-drawer__item">
          <a class="mobile-drawer__link{% if dashboard_active %} is-active{% endif %}" href="/dashboard/"{% if dashboard_active %} aria-current="page"{% endif %}>
            <span>Dashboard</span>
          </a>
        </li>
        {% endif %}
        {% nav_active '/crowngear/' '/crowngear' as crowngear_active %}
        <li class="mobile-drawer__item">
          <a class="mobile-drawer__link{% if crowngear_active %} is-active{% endif %}" href="/crowngear/"{% if crowngear_active %} aria-current="page"{% endif %}>
            <span>CrownGear</span>
          </a>
        </li>
        {% nav_active '/arenalive/' '/arenalive' as arenalive_active %}
        <li class="mobile-drawer__item">
          <a class="mobile-drawer__link{% if arenalive_active %} is-active{% endif %}" href="/arenalive/"{% if arenalive_active %} aria-current="page"{% endif %}>
            <span>ArenaLive{% if nav_live %} <span class="mobile-live-pill">Live</span>{% endif %}</span>
          </a>
        </li>
        {% nav_active '/community/' '/community' as community_active %}
        <li class="mobile-drawer__item">
          <a class="mobile-drawer__link{% if community_active %} is-active{% endif %}" href="/community/"{% if community_active %} aria-current="page"{% endif %}>
            <span>Community</span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="mobile-drawer__footer">
      <div class="mobile-drawer__actions">

        <a class="mobile-drawer__action" href="/notifications/">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M12 21a2 2 0 0 0 2-2h-4a2 2 0 0 0 2 2Z" />
            <path d="M6.5 16.5h11l-1.1-1.54a4.5 4.5 0 0 1-.9-2.7V10a4.5 4.5 0 0 0-9 0v2.26a4.5 4.5 0 0 1-.9 2.7L6.5 16.5Z" />
          </svg>
          <span>Alerts</span>
          {% if nav_unread_count %}
          <span class="mobile-drawer__badge" aria-hidden="true">{{ nav_unread_count }}</span>
          {% else %}
          <span class="mobile-drawer__badge" aria-hidden="true">3</span>
          {% endif %}
        </a>
      </div>

      {% if request.user.is_authenticated %}
        {% user_avatar_url request.user '/static/img/user_avatar/default-avatar.png' as mobile_avatar %}
        <div class="mobile-drawer__profile">
          <span class="mobile-drawer__profile-avatar">
            <img src="{{ mobile_avatar }}" alt="" />
          </span>
          <div class="mobile-drawer__profile-meta">
            <span class="mobile-drawer__profile-name">{{ request.user.get_full_name|default:request.user.username }}</span>
            <span class="mobile-drawer__profile-handle">@{{ request.user.username }}</span>
          </div>
          <a href="/accounts/logout/" class="mobile-drawer__signout">Sign out</a>
        </div>
      {% else %}
        <div class="mobile-drawer__auth">
          <a class="mobile-drawer__auth-primary" href="/accounts/login/">Sign in</a>
          <a class="mobile-drawer__auth-secondary" href="/accounts/signup/">Sign up</a>
        </div>
      {% endif %}
    </div>
  </div>
</div>
