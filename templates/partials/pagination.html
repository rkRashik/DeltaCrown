{# templates/partials/pagination.html #}
<nav class="pagination" data-testid="pagination" aria-label="Pagination">
  {% with qs=querystring|default:"" %}

    {# Prev #}
    {% if page_obj and page_obj.has_previous %}
      <a rel="prev" href="?page={{ page_obj.previous_page_number }}{{ qs }}">&laquo; Prev</a>
    {% else %}
      <span aria-disabled="true">&laquo; Prev</span>
    {% endif %}

    {# Page numbers #}
    {% if page_obj and page_obj.paginator %}
      {% for num in page_obj.paginator.page_range %}
        {% if num == page_obj.number %}
          <span class="current" aria-current="page">{{ num }}</span>
        {% else %}
          <a href="?page={{ num }}{{ qs }}">{{ num }}</a>
        {% endif %}
      {% endfor %}
    {% else %}
      {# Fallback when no page_obj provided #}
      <span class="current" aria-current="page">1</span>
    {% endif %}

    {# Next #}
    {% if page_obj and page_obj.has_next %}
      <a rel="next" href="?page={{ page_obj.next_page_number }}{{ qs }}">Next &raquo;</a>
    {% else %}
      <span aria-disabled="true">Next &raquo;</span>
    {% endif %}

  {% endwith %}
</nav>
