{% extends "base.html" %}
{% load static %}

{% block title %}DeltaCrown — Where Champions Rise{% endblock %}

{% block content %}
  <link rel="stylesheet" href="{% static 'siteui/css/home.css' %}">

  <!-- Hero: Animated gradient + NEXT EVENT -->
  <section class="home-hero">
    <div class="home-hero__bg" aria-hidden="true"></div>
    <div class="container home-hero__body">
      <h1 class="home-hero__title crown-text" data-reveal>From the Delta to the Crown</h1>
      <p class="home-hero__sub text-muted" data-reveal data-reveal-delay="200">Bangladesh's premier esports ecosystem.</p>

      {% with ft=featured_tournament %}
      <div class="home-next glass" data-reveal data-reveal-delay="350">
        <div class="home-next__k">NEXT EVENT</div>
        <div class="home-next__name">{{ ft.name|default:"Upcoming Tournament" }}</div>
        {% if ft and ft.start_iso %}
          <div class="home-next__count t-countdown" data-countdown data-deadline="{{ ft.start_iso }}">
            <span data-countdown-label>Starts in</span>: <span data-countdown-digits>—</span>
          </div>
        {% elif ft and ft.is_live %}
          <div class="home-next__live">Live Now</div>
        {% else %}
          <div class="home-next__tba text-muted">Start date TBA</div>
        {% endif %}
        <div class="home-next__actions">
          {% if ft and ft.registration_open %}
            <a class="btn-primary" href="{{ ft.register_url }}">Enter Now</a>
          {% elif ft and ft.is_live %}
            <a class="btn-primary" href="{{ ft.stream_url|default:'/tournaments/' }}">Watch Live</a>
          {% else %}
            <a class="btn-primary" href="{{ ft.detail_url|default:'/tournaments/' }}">View Details</a>
          {% endif %}
          <a class="btn-secondary" href="/tournaments/">Browse Tournaments</a>
        </div>
      </div>
      {% endwith %}
    </div>
  </section>

  <!-- Pillars: 3 cards -->
  <section class="container py-12">
    <h2 class="sec-h" data-reveal>Built for Competitors</h2>
    <div class="grid sm:grid-cols-3 gap-6 mt-4">
      <article class="pillar glass" data-reveal data-reveal-delay="100">
        <h3>Fair Brackets</h3>
        <p class="text-muted">Verified seeding and transparent dispute resolution.</p>
      </article>
      <article class="pillar glass" data-reveal data-reveal-delay="200">
        <h3>Secure Payments</h3>
        <p class="text-muted">Local gateways and manual verification for trust.</p>
      </article>
      <article class="pillar glass" data-reveal data-reveal-delay="300">
        <h3>Fast Payouts</h3>
        <p class="text-muted">Streamlined operations for winners and teams.</p>
      </article>
    </div>
  </section>

  <!-- Pathway Timeline: 3 steps -->
  <section class="container py-12">
    <h2 class="sec-h" data-reveal>Your Pathway</h2>
    <ol class="timeline mt-4">
      <li class="timeline-item" data-reveal>
        <div class="timeline-icon">1</div>
        <div class="timeline-body"><h3>Register</h3><p class="text-muted">Solo or as a team with simple forms.</p></div>
      </li>
      <li class="timeline-item" data-reveal data-reveal-delay="100">
        <div class="timeline-icon">2</div>
        <div class="timeline-body"><h3>Compete</h3><p class="text-muted">Fair schedules, verified matches, live updates.</p></div>
      </li>
      <li class="timeline-item" data-reveal data-reveal-delay="200">
        <div class="timeline-icon">3</div>
        <div class="timeline-body"><h3>Claim Glory</h3><p class="text-muted">Payouts on time, champions celebrated weekly.</p></div>
      </li>
    </ol>
  </section>

  <!-- By the Numbers: count-up -->
  <section class="container py-12">
    <h2 class="sec-h" data-reveal>By the Numbers</h2>
    <div class="grid sm:grid-cols-3 gap-6 mt-2">
      <div class="stat" data-count-to="{{ community_stats.players|default:0 }}">0</div>
      <div class="stat" data-count-to="{{ community_stats.prizes_bdt|default:0 }}" data-prefix="৳">0</div>
      <div class="stat" data-count-to="{{ community_stats.payout_accuracy|default:98 }}" data-suffix="%">0</div>
    </div>
    <div class="grid sm:grid-cols-3 gap-6 text-muted text-sm mt-2">
      <div>Registered Players</div>
      <div>Prizes Awarded</div>
      <div>Payout Accuracy</div>
    </div>
  </section>

  <!-- Champions of the Week -->
  <section class="container py-12">
    <h2 class="sec-h" data-reveal>Champions of the Week</h2>
    <article class="spotlight-card glass relative overflow-hidden" data-reveal>
      <div class="shine" aria-hidden="true"></div>
      <div class="flex flex-col sm:flex-row items-center gap-6">
        <img src="{% static 'siteui/svg/logo-deltacrown.svg' %}" alt="" class="h-16 w-16 opacity-80">
        <blockquote class="text-lg sm:text-xl leading-relaxed">
          “DeltaCrown’s fair brackets gave us a clear path to the finals.”
          <span class="block text-sm text-muted mt-2">— Team Phoenix</span>
        </blockquote>
      </div>
    </article>
  </section>

  <!-- Choose Your Path (Split CTA) -->
  <section class="container py-12">
    <div class="grid sm:grid-cols-2 gap-6">
      <a class="split-cta glass" href="/tournaments/" data-reveal>
        <h3>Join a Tournament</h3>
        <p class="text-muted">Compete today — solo or as a team.</p>
      </a>
      <a class="split-cta glass" href="/teams/" data-reveal data-reveal-delay="100">
        <h3>Build Your Team</h3>
        <p class="text-muted">Form a roster and aim for the crown.</p>
      </a>
    </div>
  </section>

  <!-- Trust Badges -->
  <section class="container py-12">
    <div class="flex flex-wrap items-center gap-3">
      <span class="t-badge">Verified Brackets</span>
      <span class="t-badge">Secure Payments</span>
      <span class="t-badge">Fast Payouts</span>
      <span class="t-badge">Community First</span>
    </div>
  </section>

  <script src="{% static 'siteui/js/home.js' %}"></script>
{% endblock %}
