{% comment %} Grid partial for AJAX updates {% endcomment %}
<div id="t-grid" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
  {% for t in tournaments %}
  <article class="group rounded-2xl ring-1 ring-white/10 bg-white/5 overflow-hidden hover:ring-white/20 transition flex flex-col">
    <div class="relative aspect-[16/9] bg-white/5">
      {% if t.banner %}
        <img src="{{ t.banner.url }}" alt="" class="w-full h-full object-cover group-hover:scale-[1.02] transition"/>
      {% elif t.banner_url %}
        <img src="{{ t.banner_url }}" alt="" class="w-full h-full object-cover group-hover:scale-[1.02] transition"/>
      {% else %}
        <img src="/static/siteui/svg/logo-deltacrown.svg" alt="" class="w-full h-full object-cover group-hover:scale-[1.02] transition"/>
      {% endif %}
      <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"></div>
      <span class="absolute top-3 right-3 chip">{{ t.status|capfirst }}</span>
      <div class="absolute bottom-3 left-3 right-3">
        <h2 class="text-white font-semibold leading-tight line-clamp-2">{{ t.name|default:t.slug }}</h2>
      </div>
    </div>
    <div class="p-5">
      <p class="text-white/70 text-sm">{% if t.start_at %}{{ t.start_at|date:"M j, g:i A" }}{% elif t.settings and t.settings.start_at %}{{ t.settings.start_at|date:"M j, g:i A" }}{% else %}TBA{% endif %} &bull; {{ t.location|default:"Online" }}</p>
      <div class="mt-3 flex flex-wrap gap-2">
        {% if t.entry_fee %}<span class="chip">Entry: {{ t.entry_fee }}</span>{% endif %}
        <span class="chip">{{ t.game_name|default:t.game }}</span>
        {% if t.reg_count %}<span class="chip">{{ t.reg_count }} registered</span>{% endif %}
      </div>
      <div class="mt-4 grid grid-cols-2 gap-2">
        <a href="/tournaments/{{ t.slug }}/" class="btn btn-ghost w-full">Details</a>
        {% if t.status in 'upcoming,open,registration' or t.can_register %}
          <a href="/tournaments/{{ t.slug }}/register/" class="btn btn-primary w-full">Register</a>
        {% else %}
          <a href="/tournaments/{{ t.slug }}/watch/" class="btn btn-secondary w-full">Watch</a>
        {% endif %}
      </div>
    </div>
  </article>
  {% empty %}
  <div class="rounded-2xl ring-1 ring-white/10 bg-white/5 p-6 text-white/80">No tournaments found.</div>
  {% endfor %}
</div>
