{% extends "base.html" %}
{% load static %}

{% block title %}Register â€” {{ tournament.name|default:tournament.title }}{% endblock %}

{% block content %}
<div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 py-8">
  <header class="mb-4">
    <h1 class="text-2xl font-semibold">Register for {{ tournament.name|default:tournament.title }}</h1>
    <p class="text-sm text-gray-600 dark:text-gray-300">Complete all steps to secure your slot.</p>
  </header>

  <ol class="flex items-center gap-2 text-sm" data-steps>
    <li class="px-3 py-1.5 rounded-xl bg-blue-600 text-white" data-step="1">1. Team / Solo</li>
    <li class="px-3 py-1.5 rounded-xl bg-slate-200 dark:bg-slate-800" data-step="2">2. Payment</li>
    <li class="px-3 py-1.5 rounded-xl bg-slate-200 dark:bg-slate-800" data-step="3">3. Review</li>
  </ol>

  <form method="post" enctype="multipart/form-data" id="reg-form" class="mt-4">
    {% csrf_token %}

    <section id="step-1" class="rounded-2xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-slate-900/60 p-4">
      <h2 class="font-semibold mb-2">Team / Solo</h2>
      {% if step1_form %}{{ step1_form.as_p }}{% else %}<p class="text-sm text-gray-600">Select team or solo and confirm IGN / roster.</p>{% endif %}
      <div class="mt-3 flex justify-end"><button class="px-4 py-2 rounded-xl bg-blue-600 text-white" data-next>Continue to Payment</button></div>
    </section>

    <section id="step-2" class="hidden rounded-2xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-slate-900/60 p-4 mt-4">
      <h2 class="font-semibold mb-2">Payment</h2>
      {% include "tournaments/_payment_instructions.html" %}
      {% if payment_form %}{{ payment_form.as_p }}{% else %}<p class="text-sm text-gray-600">Enter payer details and upload receipt (bKash / Nagad / Rocket).</p>{% endif %}
      <div class="mt-3 flex justify-between">
        <button class="px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-800" data-prev>Back</button>
        <button class="px-4 py-2 rounded-xl bg-blue-600 text-white" data-next>Continue to Review</button>
      </div>
    </section>

    <section id="step-3" class="hidden rounded-2xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-slate-900/60 p-4 mt-4">
      <h2 class="font-semibold mb-2">Review & Submit</h2>
      {% if review_html %}{{ review_html|safe }}{% else %}<p class="text-sm text-gray-600">Review your details and confirm.</p>{% endif %}
      <label class="flex items-center gap-2 mt-3 text-sm"><input type="checkbox" required> I agree to the rules and policies.</label>
      <div class="mt-3 flex justify-between">
        <button class="px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-800" data-prev>Back</button>
        <button type="submit" class="px-4 py-2 rounded-xl bg-blue-600 text-white">Submit registration</button>
      </div>
    </section>
  </form>
</div>

<script defer src="{% static 'siteui/js/reg_wizard.js' %}"></script>
{% endblock %}
