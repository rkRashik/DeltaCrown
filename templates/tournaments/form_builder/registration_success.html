{% extends "tournaments/base.html" %}
{% load static %}

{# ─────────────────────────────────────────────────────────
   Dynamic Registration Success
   Context: tournament, form_response, requires_payment,
            requires_approval
   Phase 4 Frontend Rebuild
   ───────────────────────────────────────────────────────── #}

{% block title %}Registration Submitted — {{ tournament.name }} | DeltaCrown{% endblock %}

{% block tournament_content %}

<div class="max-w-lg mx-auto px-4 sm:px-6 py-16 text-center">

  {# ── Success Icon ── #}
  <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-500/10 mb-6 ring-2 ring-green-500/30">
    <i data-lucide="check-circle" class="w-10 h-10 text-green-400"></i>
  </div>

  <h1 class="text-2xl font-display font-black text-white mb-2">Registration Submitted</h1>
  <p class="text-gray-400 mb-8">
    {% if requires_payment and requires_approval %}
      Your registration for <span class="text-white">{{ tournament.name }}</span> is pending payment &amp; approval.
    {% elif requires_payment %}
      Your registration is submitted. Complete your payment to secure your spot.
    {% elif requires_approval %}
      Your registration is submitted and awaiting organizer approval.
    {% else %}
      You're registered for <span class="text-dc-cyan">{{ tournament.name }}</span>!
    {% endif %}
  </p>

  {# ── Status Card ── #}
  <div class="glass rounded-xl p-6 mb-8 text-left">
    <dl class="space-y-3 text-sm">
      <div class="flex justify-between">
        <dt class="text-gray-500">Tournament</dt>
        <dd class="text-white">{{ tournament.name }}</dd>
      </div>
      {% if form_response %}
        <div class="flex justify-between">
          <dt class="text-gray-500">Ref&nbsp;#</dt>
          <dd class="text-dc-cyan font-mono text-xs">{{ form_response.id }}</dd>
        </div>
        <div class="flex justify-between">
          <dt class="text-gray-500">Status</dt>
          <dd>
            {% if requires_payment %}
              <span class="px-2 py-0.5 text-xs rounded-full bg-amber-500/20 text-amber-400">Payment Pending</span>
            {% elif requires_approval %}
              <span class="px-2 py-0.5 text-xs rounded-full bg-purple-500/20 text-purple-400">Awaiting Approval</span>
            {% else %}
              <span class="px-2 py-0.5 text-xs rounded-full bg-green-500/20 text-green-400">Confirmed</span>
            {% endif %}
          </dd>
        </div>
      {% endif %}
    </dl>
  </div>

  {# ── Actions ── #}
  <div class="flex flex-col sm:flex-row items-center justify-center gap-3">
    {% if requires_payment %}
      <a href="{% url 'tournaments:my_tournaments' %}"
         class="w-full sm:w-auto px-6 py-3 bg-dc-cyan text-dc-dark font-bold text-sm rounded-xl hover:bg-dc-cyan/90 transition shadow-[0_0_20px_rgba(6,182,212,0.3)]">
        <i data-lucide="credit-card" class="w-4 h-4 inline mr-1"></i> Complete Payment
      </a>
    {% endif %}
    <a href="{% url 'tournaments:my_tournaments' %}"
       class="w-full sm:w-auto px-6 py-3 border border-dc-border text-white text-sm rounded-xl hover:bg-white/5 transition">
      My Tournaments
    </a>
    <a href="{% url 'tournaments:detail' tournament.slug %}"
       class="w-full sm:w-auto px-5 py-3 text-sm text-gray-400 hover:text-white transition">
      Back to Tournament
    </a>
  </div>

</div>
{% endblock %}
