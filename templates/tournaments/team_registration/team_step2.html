{% extends "tournaments/team_registration/base.html" %}

{% block content %}
<div class="space-y-8">
    <!-- Step Header -->
    <div class="text-center">
        <h2 class="text-3xl font-bold text-white mb-2">
            <span class="text-4xl mr-2">‚úÖ</span>
            Review Team Details
        </h2>
        <p class="text-gray-400">Verify all information before proceeding</p>
    </div>

    <!-- Review Sections -->
    <form method="POST" class="space-y-6">
        {% csrf_token %}
        <input type="hidden" name="step" value="2">

        <!-- Team Details Review -->
        <div class="gradient-border rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white flex items-center">
                    <span class="text-2xl mr-2">üèÜ</span>
                    Team Details
                </h3>
                <a href="{% url 'tournaments:team_registration_step' tournament.slug 1 %}" 
                    class="text-primary hover:text-secondary text-sm">
                    <i class="fas fa-edit mr-1"></i>
                    Edit
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <div class="text-gray-400 mb-1">Team Name</div>
                    <div class="text-white font-bold text-lg">{{ step_data.team_name }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Team Tag</div>
                    <div class="text-white font-bold text-lg">[{{ step_data.team_tag }}]</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Region</div>
                    <div class="text-white font-medium">{{ step_data.region }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Country</div>
                    <div class="text-white font-medium">{{ step_data.country }}</div>
                </div>
            </div>
        </div>

        <!-- Team Captain Review -->
        <div class="gradient-border rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white flex items-center">
                    <span class="text-2xl mr-2">‚≠ê</span>
                    Team Captain
                </h3>
                <a href="{% url 'tournaments:team_registration_step' tournament.slug 1 %}" 
                    class="text-primary hover:text-secondary text-sm">
                    <i class="fas fa-edit mr-1"></i>
                    Edit
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <div class="text-gray-400 mb-1">Full Name</div>
                    <div class="text-white font-medium">{{ step_data.captain_full_name }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">In-Game Name</div>
                    <div class="text-white font-medium">{{ step_data.captain_display_name }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Riot ID</div>
                    <div class="text-white font-medium font-mono">{{ step_data.captain_riot_id }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Email</div>
                    <div class="text-white font-medium">{{ step_data.captain_email }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">WhatsApp</div>
                    <div class="text-white font-medium">{{ step_data.captain_phone }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Discord</div>
                    <div class="text-white font-medium">{{ step_data.captain_discord }}</div>
                </div>
            </div>
        </div>

        <!-- Team Roster Review -->
        <div class="gradient-border rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white flex items-center">
                    <span class="text-2xl mr-2">üë•</span>
                    Team Roster
                </h3>
                <a href="{% url 'tournaments:team_registration_step' tournament.slug 1 %}" 
                    class="text-primary hover:text-secondary text-sm">
                    <i class="fas fa-edit mr-1"></i>
                    Edit
                </a>
            </div>

            <div class="space-y-3">
                <!-- Captain (Player 1) -->
                <div class="bg-gray-800 rounded-lg p-4 border-l-4 border-yellow-500">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-yellow-500 font-bold mr-3">‚≠ê CAPTAIN</span>
                            <div>
                                <div class="text-white font-medium">{{ step_data.captain_display_name }}</div>
                                <div class="text-xs text-gray-400 font-mono">{{ step_data.captain_riot_id }}</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">{{ step_data.captain_full_name }}</div>
                    </div>
                </div>

                <!-- Player 2 -->
                <div class="bg-gray-800 rounded-lg p-4 border-l-4 border-primary">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-primary font-bold mr-3">PLAYER 2</span>
                            <div>
                                <div class="text-white font-medium">{{ step_data.player2_ign }}</div>
                                <div class="text-xs text-gray-400 font-mono">{{ step_data.player2_riot_id }}</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">{{ step_data.player2_name }}</div>
                    </div>
                </div>

                <!-- Player 3 -->
                <div class="bg-gray-800 rounded-lg p-4 border-l-4 border-primary">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-primary font-bold mr-3">PLAYER 3</span>
                            <div>
                                <div class="text-white font-medium">{{ step_data.player3_ign }}</div>
                                <div class="text-xs text-gray-400 font-mono">{{ step_data.player3_riot_id }}</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">{{ step_data.player3_name }}</div>
                    </div>
                </div>

                <!-- Player 4 -->
                <div class="bg-gray-800 rounded-lg p-4 border-l-4 border-primary">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-primary font-bold mr-3">PLAYER 4</span>
                            <div>
                                <div class="text-white font-medium">{{ step_data.player4_ign }}</div>
                                <div class="text-xs text-gray-400 font-mono">{{ step_data.player4_riot_id }}</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">{{ step_data.player4_name }}</div>
                    </div>
                </div>

                <!-- Player 5 -->
                <div class="bg-gray-800 rounded-lg p-4 border-l-4 border-primary">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-primary font-bold mr-3">PLAYER 5</span>
                            <div>
                                <div class="text-white font-medium">{{ step_data.player5_ign }}</div>
                                <div class="text-xs text-gray-400 font-mono">{{ step_data.player5_riot_id }}</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">{{ step_data.player5_name }}</div>
                    </div>
                </div>

                <!-- Substitute -->
                <div class="bg-gray-800 rounded-lg p-4 border-l-4 border-green-500">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-green-500 font-bold mr-3">üîÑ SUBSTITUTE</span>
                            <div>
                                <div class="text-white font-medium">{{ step_data.substitute_ign }}</div>
                                <div class="text-xs text-gray-400 font-mono">{{ step_data.substitute_riot_id }}</div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500">{{ step_data.substitute_name }}</div>
                    </div>
                </div>
            </div>

            <div class="mt-4 text-sm text-gray-400">
                <i class="fas fa-info-circle mr-1"></i>
                Total: 5 main players + 1 substitute = 6 players
            </div>
        </div>

        <!-- Tournament Rules Agreement -->
        <div class="gradient-border rounded-lg p-6">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="text-2xl mr-2">üìú</span>
                Team Registration Rules
            </h3>
            
            <div class="bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto text-sm text-gray-300">
                <h4 class="font-bold text-white mb-2">Team Requirements:</h4>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li>All team members must be registered with valid Riot IDs</li>
                    <li>Team name and tag must be unique and appropriate</li>
                    <li>Minimum 5 players + 1 substitute required</li>
                    <li>Captain is responsible for team communication</li>
                    <li>All players must be available during tournament dates</li>
                </ul>
                
                <h4 class="font-bold text-white mb-2">Match Rules:</h4>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li>Teams must check-in 30 minutes before match time</li>
                    <li>Captain must confirm team readiness before each match</li>
                    <li>Substitutions are only allowed between matches</li>
                    <li>All team members must join the designated Discord channel</li>
                    <li>Screenshots of match results must be submitted by captain</li>
                </ul>
                
                <h4 class="font-bold text-white mb-2">Code of Conduct:</h4>
                <ul class="list-disc list-inside space-y-1">
                    <li>Zero tolerance for cheating or exploitation</li>
                    <li>Respect all teams, staff, and tournament organizers</li>
                    <li>Follow all in-game and Discord community guidelines</li>
                    <li>Captain is responsible for team member behavior</li>
                    <li>Rule violations may result in team disqualification</li>
                </ul>
            </div>

            <div class="space-y-3">
                <label class="flex items-start cursor-pointer group">
                    <input type="checkbox" name="agree_rules" required 
                        class="mt-1 w-5 h-5 text-primary bg-gray-800 border-gray-600 rounded focus:ring-primary">
                    <span class="ml-3 text-sm text-gray-300 group-hover:text-white">
                        I confirm that all team information is accurate and all players have agreed to participate <span class="text-red-500">*</span>
                    </span>
                </label>

                <label class="flex items-start cursor-pointer group">
                    <input type="checkbox" name="agree_conduct" required 
                        class="mt-1 w-5 h-5 text-primary bg-gray-800 border-gray-600 rounded focus:ring-primary">
                    <span class="ml-3 text-sm text-gray-300 group-hover:text-white">
                        As team captain, I agree to abide by all tournament rules and take responsibility for team conduct <span class="text-red-500">*</span>
                    </span>
                </label>

                <label class="flex items-start cursor-pointer group">
                    <input type="checkbox" name="agree_contact" required 
                        class="mt-1 w-5 h-5 text-primary bg-gray-800 border-gray-600 rounded focus:ring-primary">
                    <span class="ml-3 text-sm text-gray-300 group-hover:text-white">
                        I agree to receive tournament updates and ensure my team is informed <span class="text-red-500">*</span>
                    </span>
                </label>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex items-center justify-between pt-6">
            <a href="{% url 'tournaments:team_registration_step' tournament.slug 1 %}" 
                class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                Back
            </a>
            
            <button type="submit" 
                class="px-8 py-3 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-lg glow-button">
                Proceed to Payment
                <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </form>
</div>
{% endblock %}
