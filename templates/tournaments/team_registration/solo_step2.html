{% extends "tournaments/team_registration/base.html" %}

{% block content %}
<div class="space-y-8">
    <!-- Step Header -->
    <div class="text-center">
        <h2 class="text-3xl font-bold text-white mb-2">
            <span class="text-4xl mr-2">âœ…</span>
            Review & Confirm
        </h2>
        <p class="text-gray-400">Double-check your information before proceeding</p>
    </div>

    <!-- Review Sections -->
    <form method="POST" class="space-y-6">
        {% csrf_token %}
        <input type="hidden" name="step" value="2">

        <!-- Personal Details Review -->
        <div class="gradient-border rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white flex items-center">
                    <span class="text-2xl mr-2">ðŸ‘¤</span>
                    Personal Details
                </h3>
                <a href="{% url 'tournaments:register' tournament_slug=tournament.slug %}" 
                    class="text-primary hover:text-secondary text-sm">
                    <i class="fas fa-edit mr-1"></i>
                    Edit
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <div class="text-gray-400 mb-1">Full Name</div>
                    <div class="text-white font-medium">{{ step_data.full_name }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Display Name</div>
                    <div class="text-white font-medium">{{ step_data.display_name }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Age</div>
                    <div class="text-white font-medium">{{ step_data.age }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Country/Region</div>
                    <div class="text-white font-medium">{{ step_data.country }}</div>
                </div>
            </div>
        </div>

        <!-- Game Details Review -->
        <div class="gradient-border rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white flex items-center">
                    <span class="text-2xl mr-2">ðŸŽ®</span>
                    Game Details
                </h3>
                <a href="{% url 'tournaments:register' tournament_slug=tournament.slug %}" 
                    class="text-primary hover:text-secondary text-sm">
                    <i class="fas fa-edit mr-1"></i>
                    Edit
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <div class="text-gray-400 mb-1">Riot ID</div>
                    <div class="text-white font-medium">{{ step_data.riot_id }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Platform / Server</div>
                    <div class="text-white font-medium">{{ step_data.platform_server }}</div>
                </div>
                {% if step_data.rank %}
                <div>
                    <div class="text-gray-400 mb-1">Current Rank</div>
                    <div class="text-white font-medium">{{ step_data.rank }}</div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Contact Information Review -->
        <div class="gradient-border rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-white flex items-center">
                    <span class="text-2xl mr-2">ðŸ“ž</span>
                    Contact Information
                </h3>
                <a href="{% url 'tournaments:register' tournament_slug=tournament.slug %}" 
                    class="text-primary hover:text-secondary text-sm">
                    <i class="fas fa-edit mr-1"></i>
                    Edit
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <div class="text-gray-400 mb-1">Email Address</div>
                    <div class="text-white font-medium">{{ step_data.email }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">WhatsApp / Phone</div>
                    <div class="text-white font-medium">{{ step_data.phone }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Discord Username</div>
                    <div class="text-white font-medium">{{ step_data.discord }}</div>
                </div>
                <div>
                    <div class="text-gray-400 mb-1">Preferred Contact</div>
                    <div class="text-white font-medium">{{ step_data.preferred_contact }}</div>
                </div>
            </div>
        </div>

        <!-- Tournament Rules Agreement -->
        <div class="gradient-border rounded-lg p-6">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="text-2xl mr-2">ðŸ“œ</span>
                Tournament Rules
            </h3>
            
            <div class="bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto text-sm text-gray-300">
                <h4 class="font-bold text-white mb-2">General Rules:</h4>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li>All players must be 13 years or older to participate</li>
                    <li>Players must use their registered Riot ID during matches</li>
                    <li>Be respectful to other players and staff</li>
                    <li>Check-in is required 30 minutes before match time</li>
                    <li>No cheating, hacking, or exploitation of bugs</li>
                </ul>
                
                <h4 class="font-bold text-white mb-2">Match Rules:</h4>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li>Matches will be played on APAC servers</li>
                    <li>All games will be played in Tournament Mode</li>
                    <li>Screenshots of match results must be submitted</li>
                    <li>Disputes must be reported within 15 minutes of match end</li>
                </ul>
                
                <h4 class="font-bold text-white mb-2">Code of Conduct:</h4>
                <ul class="list-disc list-inside space-y-1">
                    <li>Zero tolerance for toxic behavior or harassment</li>
                    <li>Follow all Discord community guidelines</li>
                    <li>Respect match scheduling and be punctual</li>
                    <li>Violation of rules may result in disqualification</li>
                </ul>
            </div>

            <div class="space-y-3">
                <label class="flex items-start cursor-pointer group">
                    <input type="checkbox" name="agree_rules" required 
                        class="mt-1 w-5 h-5 text-primary bg-gray-800 border-gray-600 rounded focus:ring-primary">
                    <span class="ml-3 text-sm text-gray-300 group-hover:text-white">
                        I have read and agree to abide by all tournament rules and regulations <span class="text-red-500">*</span>
                    </span>
                </label>

                <label class="flex items-start cursor-pointer group">
                    <input type="checkbox" name="agree_conduct" required 
                        class="mt-1 w-5 h-5 text-primary bg-gray-800 border-gray-600 rounded focus:ring-primary">
                    <span class="ml-3 text-sm text-gray-300 group-hover:text-white">
                        I agree to maintain good sportsmanship and follow the Code of Conduct <span class="text-red-500">*</span>
                    </span>
                </label>

                <label class="flex items-start cursor-pointer group">
                    <input type="checkbox" name="agree_contact" required 
                        class="mt-1 w-5 h-5 text-primary bg-gray-800 border-gray-600 rounded focus:ring-primary">
                    <span class="ml-3 text-sm text-gray-300 group-hover:text-white">
                        I agree to receive tournament updates via my provided contact methods <span class="text-red-500">*</span>
                    </span>
                </label>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex items-center justify-between pt-6">
            <a href="{% url 'tournaments:register' tournament_slug=tournament.slug %}" 
                class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                Back
            </a>
            
            <button type="submit" 
                class="px-8 py-3 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-lg glow-button">
                Proceed to Payment
                <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </form>
</div>
{% endblock %}
