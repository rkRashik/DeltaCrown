<!-- Step 2: Team Selection -->
<div class="team-selection">
  {% if eligible_teams %}
    <p class="text-body-secondary mb-6">
      Select the team you want to register for this tournament. Only teams where you have registration permission are shown.
    </p>

    <div class="team-selector">
      {% for team_data in eligible_teams %}
        <label class="team-card {% if team_data.team.id|stringformat:'s' == selected_team_id|stringformat:'s' %}selected{% endif %}">
          <div class="flex items-center gap-4">
            <input 
              type="radio" 
              name="team_id" 
              value="{{ team_data.team.id }}"
              {% if team_data.team.id|stringformat:'s' == selected_team_id|stringformat:'s' %}checked{% endif %}
              required
            >
            
            <div class="flex-shrink-0">
              {% if team_data.team.logo %}
                <img 
                  src="{{ team_data.team.logo.url }}" 
                  alt="{{ team_data.team.name }}"
                  class="w-16 h-16 rounded-lg object-cover"
                >
              {% else %}
                <div class="w-16 h-16 rounded-lg bg-primary/20 flex items-center justify-center">
                  <i class="fas fa-users text-primary text-2xl"></i>
                </div>
              {% endif %}
            </div>
            
            <div class="flex-1">
              <div class="flex items-center gap-3 mb-1">
                <h3 class="font-semibold text-lg">{{ team_data.team.name }}</h3>
                <span class="px-2 py-1 bg-primary/20 text-primary text-xs font-semibold rounded">
                  {{ team_data.permission_label }}
                </span>
              </div>
              
              <p class="text-sm text-body-secondary">
                {{ team_data.team.members.count }} member{{ team_data.team.members.count|pluralize }}
                {% if team_data.team.tag %}
                  â€¢ Tag: [{{ team_data.team.tag }}]
                {% endif %}
              </p>
            </div>
            
            <div class="flex-shrink-0">
              <i class="fas fa-check-circle text-primary text-2xl opacity-0"></i>
            </div>
          </div>
        </label>
      {% endfor %}
    </div>

    <!-- Permission Info -->
    <div class="mt-6 bg-surface-hover border border-line rounded-lg p-4">
      <div class="flex items-start gap-3">
        <i class="fas fa-info-circle text-primary mt-1"></i>
        <div class="text-sm">
          <p class="font-semibold mb-2">About Team Permissions</p>
          <p class="text-body-secondary">
            Only team owners, managers, and members with explicit registration permission can register teams for tournaments.
            If you don't see a team here, you may need to ask the team owner to grant you permission.
          </p>
        </div>
      </div>
    </div>

  {% else %}
    <!-- No Eligible Teams -->
    <div class="bg-warning/10 border border-warning rounded-lg p-6">
      <div class="flex items-start gap-4">
        <i class="fas fa-exclamation-triangle text-warning text-2xl"></i>
        <div>
          <h3 class="text-lg font-semibold mb-2">No Eligible Teams</h3>
          <p class="text-body-secondary mb-4">
            You don't have any teams that you can register for this tournament. 
            You need to be a member of a team with registration permission.
          </p>
          
          <div class="space-y-3">
            <a 
              href="{% url 'teams:create' %}" 
              class="inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors"
            >
              <i class="fas fa-plus"></i>
              Create a New Team
            </a>
            
            <p class="text-sm text-body-secondary">
              Or ask your team owner/manager to grant you registration permission in team settings.
            </p>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
</div>

<style>
.team-card.selected {
  border-color: var(--color-primary);
  background: var(--color-primary-hover);
}

.team-card.selected .fa-check-circle {
  opacity: 1 !important;
}
</style>
