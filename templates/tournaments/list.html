{% extends "tournaments/base.html" %}
{% load static humanize %}

{# ─────────────────────────────────────────────────────────
   FE-T-001: Tournament List / Discovery Page
   Phase 4 — Exact replica of user's list_demo.html design
   ───────────────────────────────────────────────────────── #}

{% block title %}Tournaments | DeltaCrown{% endblock %}
{% block og_title %}Tournaments | DeltaCrown{% endblock %}

{% block tournament_css %}
<style>
    /* --- DISCOVERY PAGE AESTHETICS --- */

    /* Glassmorphism */
    .glass { background: rgba(10, 10, 10, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); }
    .glass-strong { background: rgba(20, 20, 20, 0.85); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); }

    /* Navigation Pills */
    .nav-pill {
        display: flex; align-items: center; gap: 10px; padding: 10px 14px;
        border-radius: 12px; color: #9ca3af; transition: all 0.2s ease;
        border: 1px solid transparent; width: 100%; text-align: left; cursor: pointer;
    }
    .nav-pill:hover { background: rgba(255,255,255,0.03); color: #fff; border-color: rgba(255,255,255,0.05); }
    .nav-pill.active { background: rgba(6, 182, 212, 0.1); color: #06b6d4; border-color: rgba(6, 182, 212, 0.25); box-shadow: 0 0 15px rgba(6,182,212,0.1); }

    /* Game Icons */
    .game-icon {
        width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center;
        font-size: 10px; font-weight: 900; color: #000; flex-shrink: 0;
    }

    /* Hero Carousel */
    .hero-slide {
        position: absolute; inset: 0; opacity: 0; transition: opacity 0.8s ease-in-out;
        background-size: cover; background-position: center;
    }
    .hero-slide.active { opacity: 1; }
    .hero-overlay {
        background: linear-gradient(90deg, #050505 0%, rgba(5,5,5,0.8) 40%, rgba(5,5,5,0.2) 100%);
    }

    /* Tournament Cards */
    .card-modern {
        background: #0a0a0a; border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px; overflow: hidden; position: relative;
        transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    }
    .card-modern:hover {
        transform: translateY(-4px);
        border-color: rgba(6, 182, 212, 0.4);
        box-shadow: 0 10px 30px -10px rgba(6, 182, 212, 0.15);
    }
    .card-img-wrap { height: 160px; position: relative; overflow: hidden; }
    .card-img-wrap img { transition: transform 0.6s ease; }
    .card-modern:hover .card-img-wrap img { transform: scale(1.08); }
    .card-img-wrap::after {
        content: ''; position: absolute; inset: 0;
        background: linear-gradient(to bottom, transparent 0%, #0a0a0a 100%);
    }

    /* Live card border glow */
    .card-modern.card-live { border-color: rgba(239, 68, 68, 0.2); }
    .card-modern.card-live:hover { border-color: rgba(239, 68, 68, 0.5); box-shadow: 0 10px 30px -10px rgba(239,68,68,0.15); }

    /* Completed card */
    .card-modern.card-ended { opacity: 0.75; filter: grayscale(0.3); }
    .card-modern.card-ended:hover { opacity: 1; filter: grayscale(0); }

    /* Scrollbar Hide */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>
{% endblock %}

{% block tournament_content %}

{# ═══ Hero Carousel ═══ #}
<div class="relative w-full h-[300px] md:h-[380px] overflow-hidden border-b border-dc-border group">
  {% for t in featured_tournaments %}
  <div class="hero-slide{% if forloop.first %} active{% endif %}"
       style="background-image: url('{% if t.banner_image %}{{ t.banner_image.url }}{% else %}https://images.unsplash.com/photo-1624138784181-dc7f5b75e52e?q=80&w=2670&auto=format&fit=crop{% endif %}');">
    <div class="absolute inset-0 hero-overlay flex items-center">
      <div class="max-w-[1600px] mx-auto px-6 w-full pt-10">
        <div class="max-w-2xl space-y-4">
          <div class="flex items-center gap-3">
            {% if t.status == 'live' %}
            <span class="px-3 py-1 rounded bg-red-600/90 text-white text-[10px] font-bold uppercase tracking-wider shadow-lg animate-pulse">Live Now</span>
            {% elif t.status == 'registration_open' %}
            <span class="px-3 py-1 rounded bg-green-600/90 text-white text-[10px] font-bold uppercase tracking-wider shadow-lg">Open</span>
            {% else %}
            <span class="px-3 py-1 rounded bg-dc-purple/90 text-white text-[10px] font-bold uppercase tracking-wider shadow-lg">Upcoming</span>
            {% endif %}
            <span class="text-xs font-bold text-gray-300 flex items-center gap-1">
              <i data-lucide="monitor" class="w-3 h-3 text-{% if t.status == 'live' %}red-500{% else %}dc-cyan{% endif %}"></i>
              {{ t.game.display_name }}
            </span>
          </div>
          <h1 class="font-display font-black text-4xl md:text-6xl text-white leading-none drop-shadow-2xl">
            {{ t.name|upper }}
          </h1>
          <p class="text-gray-300 text-sm md:text-base max-w-lg line-clamp-2">{{ t.description|truncatewords:25 }}</p>
          <div class="flex items-center gap-4 pt-2">
            <a href="{% url 'tournaments:detail' t.slug %}"
               class="px-6 py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition flex items-center gap-2">
              <i data-lucide="{% if t.status == 'live' %}play{% else %}arrow-right{% endif %}" class="w-4 h-4 fill-black"></i>
              {% if t.status == 'live' %}Watch Stream{% else %}View Details{% endif %}
            </a>
            {% if t.prize_pool %}
            <div class="text-sm font-medium text-white bg-black/50 px-4 py-2 rounded-lg border border-white/10">
              <span class="text-gray-400">Prize:</span>
              <span class="text-dc-gold font-bold">৳{{ t.prize_pool|floatformat:0|intcomma }}</span>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="hero-slide active" style="background: linear-gradient(135deg, #050505, #0d1117);">
    <div class="absolute inset-0 hero-overlay flex items-center">
      <div class="max-w-[1600px] mx-auto px-6 w-full pt-10">
        <div class="max-w-2xl space-y-4">
          <h1 class="font-display font-black text-4xl md:text-6xl text-white leading-none drop-shadow-2xl">
            <span class="text-dc-cyan">COMPETE</span> &amp; CONQUER
          </h1>
          <p class="text-gray-300 text-sm md:text-base max-w-lg">Browse tournaments, register your team, and climb the leaderboard.</p>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}

  {% if featured_tournaments %}
  <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2">
    {% for t in featured_tournaments %}
    <div class="h-1 rounded-full transition-all duration-300 {% if forloop.first %}w-8 bg-white{% else %}w-2 bg-white/30{% endif %}"></div>
    {% endfor %}
  </div>
  {% endif %}
</div>

{# ═══ Main 3-Column Layout ═══ #}
<div class="max-w-[1600px] mx-auto px-4 lg:px-6 py-8 flex-1 w-full">
  <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

    {# ── Left Sidebar: Game + Format Filters ── #}
    <div class="hidden lg:block lg:col-span-2 space-y-8 sticky top-24 h-fit">

      {# Search #}
      <form method="get" class="relative group">
        {% for key, val in request.GET.items %}{% if key != 'search' and key != 'page' %}
        <input type="hidden" name="{{ key }}" value="{{ val }}">
        {% endif %}{% endfor %}
        <i data-lucide="search" class="absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 group-focus-within:text-dc-cyan transition-colors"></i>
        <input type="text" name="search" value="{{ current_search }}" placeholder="Search events..."
               class="w-full bg-dc-card border border-dc-border rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-600 focus:border-dc-cyan/50 focus:ring-1 focus:ring-dc-cyan/50 outline-none transition-all shadow-sm">
      </form>

      {# Game filter #}
      <div>
        <h3 class="text-[11px] font-bold text-gray-500 uppercase tracking-widest mb-3 px-2">Select Game</h3>
        <div class="space-y-1">
          <a href="?{% if current_status %}status={{ current_status }}{% endif %}{% if current_search %}&search={{ current_search }}{% endif %}"
             class="nav-pill{% if not current_game %} active{% endif %}">
            <div class="game-icon bg-dc-cyan/20 text-dc-cyan"><i data-lucide="layout-grid" class="w-3.5 h-3.5"></i></div>
            <span class="text-sm font-semibold">All Games</span>
          </a>
          {% for game in games %}
          <a href="?game={{ game.slug }}{% if current_status %}&status={{ current_status }}{% endif %}{% if current_search %}&search={{ current_search }}{% endif %}"
             class="nav-pill group{% if current_game == game.slug %} active{% endif %}">
            {% if game.icon %}
            <img src="{{ game.icon }}" class="w-6 h-6 rounded-md object-cover" alt="{{ game.name }}">
            {% else %}
            <div class="game-icon bg-dc-cyan text-white">{{ game.name|truncatechars:2 }}</div>
            {% endif %}
            <span class="text-sm font-medium group-hover:text-white">{{ game.name }}</span>
          </a>
          {% endfor %}
        </div>
      </div>

      {# Format filter #}
      <div>
        <h3 class="text-[11px] font-bold text-gray-500 uppercase tracking-widest mb-3 px-2">Format</h3>
        <div class="flex flex-wrap gap-2 px-1">
          {% for opt in format_options %}
          <a href="?format={{ opt.value }}{% if current_game %}&game={{ current_game }}{% endif %}{% if current_status %}&status={{ current_status }}{% endif %}"
             class="px-3 py-1.5 rounded-lg border text-xs transition
               {% if current_format == opt.value %}bg-dc-cyan/10 border-dc-cyan/40 text-dc-cyan{% else %}border-white/10 bg-white/5 text-gray-300 hover:border-dc-cyan/40 hover:text-white{% endif %}">
            {{ opt.label }}
          </a>
          {% endfor %}
        </div>
      </div>

      {# Status filter #}
      <div>
        <h3 class="text-[11px] font-bold text-gray-500 uppercase tracking-widest mb-3 px-2">Status</h3>
        <div class="flex flex-wrap gap-2 px-1">
          {% for opt in status_options %}
          <a href="?status={{ opt.value }}{% if current_game %}&game={{ current_game }}{% endif %}{% if current_search %}&search={{ current_search }}{% endif %}"
             class="px-3 py-1.5 rounded-lg border text-xs transition
               {% if current_status == opt.value %}bg-dc-cyan/10 border-dc-cyan/40 text-dc-cyan{% else %}border-white/10 bg-white/5 text-gray-300 hover:border-dc-cyan/40 hover:text-white{% endif %}">
            {{ opt.label }}
          </a>
          {% endfor %}
        </div>
      </div>
    </div>

    {# ── Main Content: Tournament Grid ── #}
    <div class="col-span-1 lg:col-span-7 space-y-6">

      {# Header bar #}
      <div class="flex items-center justify-between pb-4 border-b border-dc-border">
        <h2 class="font-display font-bold text-2xl text-white">Explore Tournaments</h2>
        <div class="flex items-center gap-3">
          <select onchange="window.location.search='?sort='+this.value"
                  class="bg-dc-card border border-dc-border text-xs text-gray-300 rounded-lg px-3 py-2 outline-none focus:border-dc-cyan/50">
            <option value="trending">Sort: Trending</option>
            <option value="soonest">Sort: Soonest</option>
            <option value="prize">Prize: High to Low</option>
          </select>
        </div>
      </div>

      {# Mobile game pills #}
      <div class="lg:hidden flex gap-2 overflow-x-auto pb-4 no-scrollbar">
        <a href="?{% if current_status %}status={{ current_status }}{% endif %}"
           class="px-4 py-2 rounded-lg text-xs font-bold whitespace-nowrap {% if not current_game %}bg-dc-cyan text-black{% else %}bg-dc-card border border-dc-border text-gray-400{% endif %}">All</a>
        {% for game in games %}
        <a href="?game={{ game.slug }}{% if current_status %}&status={{ current_status }}{% endif %}"
           class="px-4 py-2 rounded-lg text-xs font-medium whitespace-nowrap {% if current_game == game.slug %}bg-dc-cyan text-black{% else %}bg-dc-card border border-dc-border text-gray-400{% endif %}">{{ game.name }}</a>
        {% endfor %}
      </div>

      {# Tournament card grid #}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
        {% for t in tournament_list %}
        <a href="{% url 'tournaments:detail' t.slug %}"
           class="card-modern group cursor-pointer {% if t.status == 'live' %}card-live{% elif t.status == 'completed' %}card-ended{% endif %}">
          <div class="card-img-wrap">
            <img src="{% if t.banner_image %}{{ t.banner_image.url }}{% else %}https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1000&auto=format&fit=crop{% endif %}"
                 class="w-full h-full object-cover" alt="{{ t.name }}">
            {# Left badges #}
            <div class="absolute top-3 left-3 flex gap-2 z-10">
              {% if t.participation_type == 'team' %}
              <span class="bg-black/60 backdrop-blur border border-white/10 text-white text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1">
                <i data-lucide="users" class="w-3 h-3 text-dc-cyan"></i> Team
              </span>
              {% else %}
              <span class="bg-black/60 backdrop-blur border border-white/10 text-white text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1">
                <i data-lucide="user" class="w-3 h-3 text-dc-cyan"></i> Solo
              </span>
              {% endif %}
            </div>
            {# Right status badge #}
            <div class="absolute top-3 right-3 z-10">
              {% if t.status == 'live' %}
              <span class="bg-red-600 text-white text-[10px] font-bold px-2 py-1 rounded shadow-lg uppercase animate-pulse">● Live</span>
              {% elif t.status == 'registration_open' %}
              <span class="bg-green-500 text-black text-[10px] font-bold px-2 py-1 rounded shadow-lg uppercase">Open</span>
              {% elif t.status == 'completed' %}
              <span class="bg-gray-800 text-gray-300 text-[10px] font-bold px-2 py-1 rounded uppercase">Ended</span>
              {% else %}
              <span class="bg-dc-purple text-white text-[10px] font-bold px-2 py-1 rounded shadow-lg uppercase">{{ t.tournament_start|date:"M j" }}</span>
              {% endif %}
            </div>
          </div>

          <div class="p-5 {% if t.status == 'live' %}relative overflow-hidden{% endif %}">
            {% if t.status == 'live' %}
            <div class="absolute top-0 right-0 w-32 h-32 bg-red-600/10 rounded-full blur-3xl -z-10 pointer-events-none"></div>
            {% endif %}

            <div class="flex items-center justify-between mb-2">
              <span class="text-[10px] font-bold uppercase tracking-wider
                {% if t.status == 'live' %}text-red-400{% elif t.status == 'completed' %}text-gray-500{% else %}text-dc-cyan{% endif %}">
                {{ t.game.display_name }}
              </span>
              {% if t.status != 'live' %}
              <span class="text-[10px] text-gray-500">
                {% if t.status == 'completed' %}Ended{% else %}Starts {{ t.tournament_start|date:"M j" }}{% endif %}
              </span>
              {% endif %}
            </div>

            <h3 class="font-display font-bold text-lg text-white mb-4 transition-colors line-clamp-1
              {% if t.status == 'live' %}group-hover:text-red-500{% elif t.status == 'completed' %}{% else %}group-hover:text-dc-cyan{% endif %}">
              {{ t.name }}
            </h3>

            {# Stats bar #}
            <div class="flex items-center justify-between p-3 rounded-lg mb-4
              {% if t.status == 'live' %}bg-red-500/5 border border-red-500/10{% elif t.status == 'completed' %}bg-gradient-to-r from-dc-gold/10 to-transparent border border-dc-gold/20{% else %}bg-white/5 border border-white/5{% endif %}">
              {% if t.status == 'completed' %}
              <div class="flex items-center gap-3 w-full">
                <div class="w-8 h-8 rounded bg-dc-gold/20 flex items-center justify-center text-dc-gold"><i data-lucide="crown" class="w-4 h-4 fill-current"></i></div>
                <div>
                  <div class="text-[10px] font-bold text-dc-gold uppercase">Completed</div>
                  <div class="text-sm font-bold text-white">View Results</div>
                </div>
              </div>
              {% else %}
              <div class="text-center">
                <div class="text-[10px] text-gray-500 uppercase font-bold">Prize</div>
                <div class="text-dc-gold font-bold font-display">{% if t.prize_pool %}৳{{ t.prize_pool|floatformat:0|intcomma }}{% else %}TBD{% endif %}</div>
              </div>
              <div class="w-px h-6 bg-white/10"></div>
              <div class="text-center">
                <div class="text-[10px] text-gray-500 uppercase font-bold">Entry</div>
                <div class="text-white font-bold font-display">{% if t.entry_fee and t.entry_fee > 0 %}৳{{ t.entry_fee|floatformat:0|intcomma }}{% else %}Free{% endif %}</div>
              </div>
              <div class="w-px h-6 bg-white/10"></div>
              <div class="text-center">
                <div class="text-[10px] text-gray-500 uppercase font-bold">Slots</div>
                <div class="text-white font-bold font-display">{{ t.registration_count }}/{{ t.max_participants }}</div>
              </div>
              {% endif %}
            </div>

            {# Action button #}
            {% if t.status == 'live' %}
            <span class="w-full py-2.5 rounded-lg bg-white/5 border border-white/10 group-hover:bg-red-600 group-hover:border-red-600 group-hover:text-white text-gray-300 font-bold text-sm transition-all flex items-center justify-center gap-2">
              <i data-lucide="tv" class="w-4 h-4"></i> Watch Stream
            </span>
            {% elif t.status == 'completed' %}
            <span class="w-full py-2.5 rounded-lg bg-transparent border border-white/10 group-hover:bg-white/5 text-gray-400 group-hover:text-white font-bold text-sm transition-all flex items-center justify-center">
              View Results
            </span>
            {% elif t.status == 'registration_open' %}
            <span class="w-full py-2.5 rounded-lg bg-dc-cyan hover:bg-dc-cyan/90 text-black font-bold text-sm transition-all flex items-center justify-center gap-2">
              Register {% if t.participation_type == 'team' %}Team{% endif %} <i data-lucide="arrow-right" class="w-4 h-4"></i>
            </span>
            {% else %}
            <span class="w-full py-2.5 rounded-lg bg-white/5 border border-white/10 group-hover:bg-dc-purple group-hover:border-dc-purple text-white font-bold text-sm transition-all flex items-center justify-center">
              Pre-Register
            </span>
            {% endif %}
          </div>
        </a>
        {% empty %}
        <div class="col-span-2 text-center py-20">
          <i data-lucide="search" class="w-12 h-12 mx-auto text-gray-600 mb-4"></i>
          <h3 class="font-display font-bold text-xl text-white mb-2">No tournaments found</h3>
          <p class="text-sm text-gray-500">Try adjusting your filters or check back later for upcoming events.</p>
          <a href="{% url 'tournaments:list' %}" class="inline-block mt-4 px-6 py-2 bg-dc-cyan text-black font-bold rounded-lg text-sm">Clear Filters</a>
        </div>
        {% endfor %}
      </div>

      {# Pagination / Load More #}
      {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}{% if current_game %}&game={{ current_game }}{% endif %}{% if current_status %}&status={{ current_status }}{% endif %}{% if current_search %}&search={{ current_search }}{% endif %}"
         class="w-full py-4 rounded-xl border border-white/5 bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 transition-all font-medium flex items-center justify-center gap-2">
        Load More Events <i data-lucide="chevron-down" class="w-4 h-4"></i>
      </a>
      {% endif %}
    </div>

    {# ── Right Sidebar ── #}
    <div class="hidden lg:block lg:col-span-3 space-y-6">

      {# My Tournaments widget #}
      {% if user.is_authenticated %}
      <div class="bg-dc-card border border-dc-border rounded-2xl p-5 shadow-lg">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2">
            <i data-lucide="user" class="w-3.5 h-3.5 text-dc-cyan"></i> My Tournaments
          </h3>
        </div>
        <div class="space-y-3">
          {% for t in tournament_list %}
            {% if t.id in user_registered_tournaments %}
            <a href="{% url 'tournaments:detail' t.slug %}"
               class="block p-3 rounded-xl bg-gradient-to-r from-dc-cyan/10 to-transparent border border-dc-cyan/20 cursor-pointer hover:border-dc-cyan/50 transition">
              <div class="flex justify-between items-start mb-1">
                <span class="text-sm font-bold text-white">{{ t.name|truncatewords:5 }}</span>
                {% if t.status == 'live' %}
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-yellow-500"></span>
                </span>
                {% endif %}
              </div>
              <div class="flex items-center justify-between mt-2">
                <span class="text-[10px] text-gray-400">{{ t.tournament_start|date:"M j \a\t g:i A" }}</span>
                <span class="text-[10px] text-green-400 font-bold">Registered</span>
              </div>
            </a>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      {% endif %}

      {# Host a Tournament CTA #}
      <div class="relative overflow-hidden rounded-2xl p-6 group cursor-pointer border border-dc-purple/30">
        <div class="absolute inset-0 bg-gradient-to-br from-dc-purple/20 to-black transition opacity-80 group-hover:opacity-100"></div>
        <div class="relative z-10 text-center">
          <div class="w-12 h-12 mx-auto bg-dc-purple rounded-full flex items-center justify-center mb-3 shadow-[0_0_20px_rgba(139,92,246,0.3)] group-hover:scale-110 transition-transform">
            <i data-lucide="trophy" class="w-6 h-6 text-white"></i>
          </div>
          <h3 class="font-display font-bold text-white text-lg mb-1">Host a Tournament</h3>
          <p class="text-xs text-gray-300 mb-4 px-2">Automated brackets, payments, and scoring. Free for community events.</p>
          <button class="w-full py-2 bg-white text-black text-xs font-bold rounded-lg hover:bg-gray-200 transition-colors">
            Create Now
          </button>
        </div>
      </div>

      {# Latest Winners #}
      <div class="bg-dc-card border border-dc-border rounded-2xl p-5">
        <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2">
          <i data-lucide="crown" class="w-3.5 h-3.5 text-dc-gold"></i> Latest Winners
        </h3>
        <div class="space-y-4">
          {% for t in tournament_list %}
            {% if t.status == 'completed' and forloop.counter <= 3 %}
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded bg-white/10 flex items-center justify-center font-bold text-[10px] text-white">
                {{ t.game.display_name|truncatechars:3 }}
              </div>
              <div class="flex-1 min-w-0">
                <div class="text-sm font-bold text-white truncate">{{ t.name|truncatewords:4 }}</div>
                <div class="text-[10px] text-gray-500 truncate">{{ t.game.display_name }}</div>
              </div>
              {% if t.prize_pool %}
              <div class="text-right">
                <div class="text-xs font-bold text-dc-gold">৳{{ t.prize_pool|floatformat:0|intcomma }}</div>
              </div>
              {% endif %}
            </div>
            {% if not forloop.last %}
            <div class="w-full h-px bg-white/5"></div>
            {% endif %}
            {% endif %}
          {% endfor %}
        </div>
      </div>

    </div>
  </div>
</div>

{# ═══ Hero Carousel Script ═══ #}
<script>
  (function() {
    const slides = document.querySelectorAll('.hero-slide');
    if (slides.length > 1) {
      let current = 0;
      setInterval(() => {
        slides[current].classList.remove('active');
        current = (current + 1) % slides.length;
        slides[current].classList.add('active');
        // Update dots
        const dots = document.querySelectorAll('.hero-slide ~ .absolute .h-1');
        dots.forEach((d, i) => {
          d.classList.toggle('w-8', i === current);
          d.classList.toggle('bg-white', i === current);
          d.classList.toggle('w-2', i !== current);
          d.classList.toggle('bg-white/30', i !== current);
        });
      }, 5000);
    }
  })();
</script>

{% endblock %}
