{# Matches Tab - Complete Redesign with Duel vs Battle Royale variants #}

<section class="td-tab-panel td-tab-panel-matches" data-tab="matches">
  {# Modern Header #}
  <div class="relative overflow-hidden bg-gradient-to-br from-slate-900/90 to-slate-800/90 backdrop-blur-xl border border-slate-700/50 rounded-3xl p-6 sm:p-8 mb-6">
    <div class="absolute top-0 right-0 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl animate-pulse-slow"></div>
    
    <div class="relative flex items-start justify-between gap-6">
      <div class="flex items-center gap-4">
        <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/30 flex items-center justify-center">
          <svg class="w-7 h-7 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
          </svg>
        </div>
        <div>
          <h2 class="text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400">Match Schedule</h2>
          <p class="text-sm sm:text-base text-slate-400 mt-1">Live results & upcoming fixtures</p>
        </div>
      </div>
      
      {# Filter Chips #}
      <div class="flex flex-wrap gap-2" id="tdMatchesFilters" data-filter-group="status">
        <button type="button" class="px-4 py-2 rounded-xl border-2 border-cyan-500/50 bg-gradient-to-r from-cyan-600 to-blue-600 text-white text-sm font-bold hover:scale-105 transition-all duration-300 shadow-lg shadow-cyan-500/20 is-active" data-status="all">
          All
        </button>
        <button type="button" class="px-4 py-2 rounded-xl border-2 border-red-500/30 bg-slate-800/50 text-slate-300 text-sm font-semibold hover:border-red-500/50 hover:bg-red-500/10 hover:text-red-400 hover:scale-105 transition-all duration-300" data-status="live">
          <span class="inline-block w-2 h-2 bg-red-500 rounded-full animate-ping mr-1.5"></span>
          Live
        </button>
        <button type="button" class="px-4 py-2 rounded-xl border-2 border-emerald-500/30 bg-slate-800/50 text-slate-300 text-sm font-semibold hover:border-emerald-500/50 hover:bg-emerald-500/10 hover:text-emerald-400 hover:scale-105 transition-all duration-300" data-status="upcoming">
          Upcoming
        </button>
        <button type="button" class="px-4 py-2 rounded-xl border-2 border-slate-500/30 bg-slate-800/50 text-slate-300 text-sm font-semibold hover:border-slate-400 hover:bg-slate-700/50 hover:text-slate-200 hover:scale-105 transition-all duration-300" data-status="completed">
          Completed
        </button>
      </div>
    </div>
  </div>

  {% if matches %}
    <div class="space-y-4" id="tdMatchesList">
      {% for match in matches %}
        {# Determine if this is a Battle Royale match or Duel match #}
        {% if game_spec.slug == 'pubg' or game_spec.slug == 'freefire' %}
          {# ========== TYPE B: BATTLE ROYALE ROW ========== #}
          <article 
            class="group relative overflow-hidden bg-gradient-to-br from-slate-900/90 to-slate-800/90 backdrop-blur-md border-2 {% if match.is_live %}border-red-500/50 shadow-lg shadow-red-500/20{% else %}border-slate-700/50{% endif %} rounded-2xl hover:scale-[1.01] hover:border-cyan-500/50 transition-all duration-300 td-match-card"
            data-match-id="{{ match.id }}"
            data-status="{{ match.ui_status }}"
          >
            {# Banner Content #}
            <div class="p-6 cursor-pointer" onclick="toggleBRLeaderboard({{ match.id }})">
              <div class="grid grid-cols-12 gap-4 items-center">
                {# Left: Round & Map (cols 1-4) #}
                <div class="col-span-12 sm:col-span-4">
                  <div class="flex items-center gap-4">
                    <div class="flex-shrink-0 w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-500/30 flex items-center justify-center">
                      <span class="text-2xl font-black text-purple-400">{{ match.lobby_info.round|default:match.round_number }}</span>
                    </div>
                    <div>
                      <div class="text-xs uppercase tracking-widest font-bold text-slate-400">Round {{ match.lobby_info.round|default:match.round_number }}/{{ match.lobby_info.total_rounds|default:6 }}</div>
                      <div class="text-lg font-black text-white mt-0.5">MAP: {{ match.lobby_info.map|default:"TBD" }}</div>
                      {% if match.is_live %}
                        <div class="flex items-center gap-2 mt-1">
                          <span class="w-2 h-2 bg-red-500 rounded-full animate-ping"></span>
                          <span class="text-xs font-bold text-red-400 uppercase">{{ match.lobby_info.alive_teams|default:16 }} Teams Alive</span>
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>
                
                {# Center: Winner/Status (cols 5-8) #}
                <div class="col-span-12 sm:col-span-5">
                  {% if match.winner_id and match.participant1_name %}
                    <div class="flex items-center gap-3">
                      <svg class="w-8 h-8 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                      <div>
                        <div class="text-xs uppercase tracking-wide font-bold text-yellow-400">Winner</div>
                        <div class="text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-400">{{ match.participant1_name }}</div>
                        <div class="text-sm text-slate-400 font-semibold">{{ match.participant1_score|default:0 }} Points</div>
                      </div>
                    </div>
                  {% elif match.is_live %}
                    <div class="flex items-center gap-2 px-4 py-2 rounded-xl bg-red-500/20 border border-red-500/50 w-fit">
                      <span class="w-3 h-3 bg-red-500 rounded-full animate-ping"></span>
                      <span class="text-lg font-black text-red-400 uppercase">Live Now</span>
                    </div>
                  {% else %}
                    <div class="text-sm text-slate-400">
                      {% if match.starts_at_display %}
                        <div class="flex items-center gap-2">
                          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                          </svg>
                          {{ match.starts_at_display }}
                        </div>
                      {% else %}
                        <span class="text-slate-500">Scheduled Soon</span>
                      {% endif %}
                    </div>
                  {% endif %}
                </div>
                
                {# Right: Action Button (cols 9-12) #}
                <div class="col-span-12 sm:col-span-3 flex justify-end">
                  {% if match.is_live and match.stream_url %}
                    <a href="{{ match.stream_url }}" class="px-6 py-3 rounded-xl bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-bold flex items-center gap-2 hover:scale-105 transition-all duration-300 shadow-lg shadow-red-500/30" target="_blank" rel="noopener noreferrer">
                      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                      </svg>
                      Watch
                    </a>
                  {% else %}
                    <button class="px-6 py-3 rounded-xl bg-slate-800/80 hover:bg-slate-700/80 text-slate-300 hover:text-white font-semibold hover:scale-105 transition-all duration-300 flex items-center gap-2">
                      Leaderboard
                      <svg class="w-4 h-4 transform group-hover:rotate-180 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                      </svg>
                    </button>
                  {% endif %}
                </div>
              </div>
            </div>
            
            {# Hidden Accordion: Leaderboard Table #}
            <div id="br-leaderboard-{{ match.id }}" class="hidden border-t border-slate-700/50 bg-slate-950/30 p-6">
              <div class="overflow-x-auto">
                <table class="w-full">
                  <thead class="bg-slate-800/50">
                    <tr class="text-left text-xs uppercase tracking-wide font-bold text-slate-400">
                      <th class="px-4 py-3 rounded-l-lg">Rank</th>
                      <th class="px-4 py-3">Team</th>
                      <th class="px-4 py-3 text-right">Kills</th>
                      <th class="px-4 py-3 text-right">Placement</th>
                      <th class="px-4 py-3 text-right rounded-r-lg">Total Pts</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-slate-800">
                    {% for entry in match.lobby_info.leaderboard|default:[]|slice:":16" %}
                      <tr class="{% if forloop.counter <= 3 %}bg-gradient-to-r {% if forloop.counter == 1 %}from-yellow-500/10 to-transparent{% elif forloop.counter == 2 %}from-slate-400/10 to-transparent{% else %}from-amber-600/10 to-transparent{% endif %}{% endif %} hover:bg-slate-800/30 transition-colors">
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-2">
                            <span class="w-8 h-8 rounded-lg {% if forloop.counter == 1 %}bg-gradient-to-br from-yellow-500 to-yellow-600 text-yellow-950{% elif forloop.counter == 2 %}bg-gradient-to-br from-slate-400 to-slate-500 text-slate-950{% elif forloop.counter == 3 %}bg-gradient-to-br from-amber-600 to-amber-700 text-amber-950{% else %}bg-slate-800 text-slate-400{% endif %} flex items-center justify-center font-black text-sm">
                              {{ entry.rank }}
                            </span>
                          </div>
                        </td>
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-3">
                            {% if entry.alive %}
                              <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
                            {% endif %}
                            <span class="font-bold text-white">{{ entry.team_name }}</span>
                          </div>
                        </td>
                        <td class="px-4 py-3 text-right font-semibold text-slate-300">{{ entry.kills }}</td>
                        <td class="px-4 py-3 text-right font-semibold text-cyan-400">{{ entry.placement_points }}</td>
                        <td class="px-4 py-3 text-right font-black text-lg text-white">{{ entry.total_points }}</td>
                      </tr>
                    {% empty %}
                      <tr>
                        <td colspan="5" class="px-4 py-8 text-center text-slate-500">No leaderboard data available</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </article>
          
        {% else %}
          {# ========== TYPE A: DUEL ROW ========== #}
          <article 
            class="group relative overflow-hidden bg-gradient-to-br from-slate-900/90 to-slate-800/90 backdrop-blur-md border-2 {% if match.is_live %}border-red-500/50 shadow-lg shadow-red-500/20{% elif match.is_completed %}border-slate-700/50{% else %}border-cyan-500/30{% endif %} rounded-2xl hover:scale-[1.01] hover:shadow-2xl transition-all duration-300 td-match-card"
            data-match-id="{{ match.id }}"
            data-status="{{ match.ui_status }}"
          >
            {# Hover Glow #}
            <div class="absolute inset-0 {% if match.is_live %}bg-gradient-to-br from-red-500/10 to-orange-500/10{% else %}bg-gradient-to-br from-cyan-500/5 to-blue-500/5{% endif %} blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            
            <div class="relative p-6">
              <div class="grid grid-cols-12 gap-4 sm:gap-6 items-center">
                {# Cols 1-2: Context (Stage & Time) #}
                <div class="col-span-12 sm:col-span-2 space-y-2">
                  <div class="text-xs uppercase tracking-widest font-bold text-slate-400">
                    {{ match.lobby_info.stage|default:match.stage_label|default:"Match" }}
                  </div>
                  <div>
                    {% if match.is_live %}
                      <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-red-500/20 border border-red-500/50 w-fit">
                        <span class="w-2 h-2 bg-red-500 rounded-full animate-ping"></span>
                        <span class="text-xs font-black text-red-400 uppercase">LIVE</span>
                      </div>
                    {% elif match.starts_at_display %}
                      <div class="flex items-center gap-1.5 text-slate-400">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-xs font-semibold">{{ match.starts_at_display }}</span>
                      </div>
                    {% else %}
                      <span class="text-xs text-slate-500">TBD</span>
                    {% endif %}
                  </div>
                  {% if match.lobby_info.best_of %}
                    <div class="text-xs text-slate-500 font-semibold">BO{{ match.lobby_info.best_of }}</div>
                  {% endif %}
                </div>
                
                {# Cols 3-9: The Matchup #}
                <div class="col-span-12 sm:col-span-7">
                  <div class="flex items-center justify-center gap-4 sm:gap-6">
                    {# Team 1 #}
                    <div class="flex-1 flex items-center justify-end gap-3 {% if match.team1_is_winner %}scale-105{% endif %} transition-transform">
                      <div class="text-right flex-1 min-w-0">
                        <div class="text-base sm:text-lg lg:text-xl font-black text-white truncate {% if match.team1_is_winner %}text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-400{% endif %}">
                          {{ match.team1_name|default:"TBD" }}
                        </div>
                        {% if match.team1_is_winner %}
                          <div class="flex items-center gap-1 justify-end mt-0.5">
                            <svg class="w-3.5 h-3.5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                            </svg>
                            <span class="text-xs text-yellow-400 font-bold uppercase">Winner</span>
                          </div>
                        {% endif %}
                      </div>
                      <div class="flex-shrink-0 w-14 h-14 sm:w-16 sm:h-16 rounded-xl bg-gradient-to-br from-slate-800/50 to-slate-700/50 border-2 {% if match.team1_is_winner %}border-yellow-500/50 shadow-lg shadow-yellow-500/20{% else %}border-slate-600/30{% endif %} p-2 group-hover:scale-110 transition-transform">
                        {% if match.team1_logo_url %}
                          <img src="{{ match.team1_logo_url }}" alt="{{ match.team1_name }}" class="w-full h-full object-contain">
                        {% else %}
                          <div class="w-full h-full rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center">
                            <span class="text-cyan-400 font-black text-sm">{{ match.team1_name|default:"?"|slice:":2"|upper }}</span>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    
                    {# Score Badge #}
                    <div class="flex flex-col items-center gap-1">
                      <div class="px-4 py-2 rounded-xl bg-slate-800/90 border-2 {% if game_spec.slug == 'fc26' or game_spec.slug == 'efootball' %}border-emerald-500/30{% else %}border-slate-600/30{% endif %} shadow-xl">
                        <div class="flex items-center gap-3">
                          <span class="text-2xl sm:text-3xl font-black {% if match.is_live %}text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400 animate-pulse{% elif match.team1_is_winner %}text-yellow-400{% else %}text-white{% endif %}">
                            {{ match.score1|default:"-" }}
                          </span>
                          <span class="text-lg font-bold text-slate-500">-</span>
                          <span class="text-2xl sm:text-3xl font-black {% if match.is_live %}text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400 animate-pulse{% elif match.team2_is_winner %}text-yellow-400{% else %}text-white{% endif %}">
                            {{ match.score2|default:"-" }}
                          </span>
                        </div>
                      </div>
                      {% if match.lobby_info.best_of %}
                        <span class="text-xs text-slate-500 font-semibold">Best of {{ match.lobby_info.best_of }}</span>
                      {% endif %}
                    </div>
                    
                    {# Team 2 #}
                    <div class="flex-1 flex items-center gap-3 {% if match.team2_is_winner %}scale-105{% endif %} transition-transform">
                      <div class="flex-shrink-0 w-14 h-14 sm:w-16 sm:h-16 rounded-xl bg-gradient-to-br from-slate-800/50 to-slate-700/50 border-2 {% if match.team2_is_winner %}border-yellow-500/50 shadow-lg shadow-yellow-500/20{% else %}border-slate-600/30{% endif %} p-2 group-hover:scale-110 transition-transform">
                        {% if match.team2_logo_url %}
                          <img src="{{ match.team2_logo_url }}" alt="{{ match.team2_name }}" class="w-full h-full object-contain">
                        {% else %}
                          <div class="w-full h-full rounded-lg bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center">
                            <span class="text-purple-400 font-black text-sm">{{ match.team2_name|default:"?"|slice:":2"|upper }}</span>
                          </div>
                        {% endif %}
                      </div>
                      <div class="flex-1 min-w-0">
                        <div class="text-base sm:text-lg lg:text-xl font-black text-white truncate {% if match.team2_is_winner %}text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-400{% endif %}">
                          {{ match.team2_name|default:"TBD" }}
                        </div>
                        {% if match.team2_is_winner %}
                          <div class="flex items-center gap-1 mt-0.5">
                            <svg class="w-3.5 h-3.5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                            </svg>
                            <span class="text-xs text-yellow-400 font-bold uppercase">Winner</span>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
                
                {# Cols 10-12: Action #}
                <div class="col-span-12 sm:col-span-3 flex justify-end">
                  {% if match.is_live and match.stream_url %}
                    <a href="{{ match.stream_url }}" class="px-5 py-3 rounded-xl bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-bold flex items-center gap-2 hover:scale-105 transition-all duration-300 shadow-lg shadow-red-500/30" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation();">
                      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                      </svg>
                      Watch
                    </a>
                  {% elif match.is_completed and match.vod_url %}
                    <a href="{{ match.vod_url }}" class="px-5 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold flex items-center gap-2 hover:scale-105 transition-all duration-300 shadow-lg shadow-purple-500/30" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation();">
                      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"/>
                      </svg>
                      Replay
                    </a>
                  {% else %}
                    <button class="px-5 py-3 rounded-xl bg-slate-800/80 hover:bg-slate-700/80 text-slate-300 hover:text-white font-semibold hover:scale-105 transition-all duration-300 td-match-details-btn" aria-label="View details">
                      Details
                      <svg class="inline-block w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                      </svg>
                    </button>
                  {% endif %}
                </div>
              </div>
            </div>
          </article>
        {% endif %}
      {% endfor %}
    </div>

  {% else %}
    {# Empty State #}
    <div class="relative overflow-hidden bg-gradient-to-br from-slate-900/80 to-slate-800/80 backdrop-blur-xl border border-slate-700/50 rounded-3xl p-16 text-center">
      <div class="absolute top-0 left-1/4 w-64 h-64 bg-cyan-500/5 rounded-full blur-3xl animate-pulse-slow"></div>
      <div class="relative">
        <div class="inline-flex w-32 h-32 rounded-3xl bg-gradient-to-br from-slate-800/50 to-slate-700/50 border-2 border-slate-600/30 items-center justify-center mb-6">
          <svg class="w-16 h-16 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
        </div>
        <h3 class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-slate-300 to-slate-500 mb-3">
          No Matches Scheduled Yet
        </h3>
        <p class="text-lg text-slate-400 max-w-md mx-auto">
          The match schedule will appear here once the tournament begins.
        </p>
      </div>
    </div>
  {% endif %}
</section>

{# JavaScript for Battle Royale Accordion #}
<script>
function toggleBRLeaderboard(matchId) {
    const leaderboard = document.getElementById(`br-leaderboard-${matchId}`);
    if (leaderboard) {
        leaderboard.classList.toggle('hidden');
    }
}

// Filter functionality (simple client-side filtering)
document.querySelectorAll('[data-status]').forEach(btn => {
    btn.addEventListener('click', function() {
        const status = this.dataset.status;
        
        // Update active state
        document.querySelectorAll('[data-status]').forEach(b => b.classList.remove('is-active', 'border-cyan-500/50', 'bg-gradient-to-r', 'from-cyan-600', 'to-blue-600'));
        this.classList.add('is-active', 'border-cyan-500/50', 'bg-gradient-to-r', 'from-cyan-600', 'to-blue-600');
        
        // Filter matches
        document.querySelectorAll('.td-match-card').forEach(card => {
            if (status === 'all') {
                card.style.display = 'block';
            } else {
                const matchStatus = card.dataset.status;
                card.style.display = matchStatus === status ? 'block' : 'none';
            }
        });
    });
});
</script>
