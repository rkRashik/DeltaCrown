{% comment %}
  Hub Sidebar — Team identity + tab navigation + resources
  Used in both desktop sidebar and mobile drawer.
{% endcomment %}

{% comment %}Team Identity Block{% endcomment %}
{% if is_team and team_name %}
<div class="p-5 border-b border-white/5">
  <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2">Competing As</p>
  <div class="flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/5">
    {% if team_logo_url %}
      <img src="{{ team_logo_url }}" alt="{{ team_tag }}" class="w-8 h-8 rounded border border-white/10 object-cover">
    {% else %}
      <div class="w-8 h-8 rounded bg-[#00F0FF]/20 border border-[#00F0FF]/30 flex items-center justify-center text-[#00F0FF] font-black text-sm"
           style="font-family:Outfit,sans-serif;">{{ team_tag }}</div>
    {% endif %}
    <div class="overflow-hidden flex-1 min-w-0">
      <p class="text-sm font-bold text-white truncate">{{ team_name }}</p>
      <p class="text-[10px] text-gray-400" style="font-family:'Space Grotesk',monospace;">
        {{ starters|length }}/{{ min_roster }} starters &middot; {{ subs|length }} sub{{ subs|length|pluralize }}
      </p>
    </div>
  </div>
</div>
{% elif not is_team %}
<div class="p-5 border-b border-white/5">
  <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2">Competing As</p>
  <div class="flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/5">
    <div class="w-8 h-8 rounded bg-[#7000FF]/20 border border-[#7000FF]/30 flex items-center justify-center text-[#7000FF] font-black text-sm">
      {{ request.user.username|truncatechars:2 }}
    </div>
    <div class="overflow-hidden flex-1 min-w-0">
      <p class="text-sm font-bold text-white truncate">{{ request.user.get_full_name|default:request.user.username }}</p>
      <p class="text-[10px] text-gray-400" style="font-family:'Space Grotesk',monospace;">Solo Participant</p>
    </div>
  </div>
</div>
{% endif %}

{% comment %}── Navigation Tabs ──────────────────────────────────────────{% endcomment %}
<div class="flex-1 overflow-y-auto py-4 px-3 space-y-1">

  <p class="px-3 text-[10px] font-black text-gray-600 uppercase tracking-widest mb-2 mt-2">Tournament Hub</p>

  <button class="hub-nav-btn active" data-hub-tab="overview" onclick="HubEngine.switchTab('overview')">
    <div class="flex items-center gap-3">
      <i data-lucide="layout-dashboard" class="w-4 h-4"></i>
      <span>Overview</span>
    </div>
  </button>

  <button class="hub-nav-btn" data-hub-tab="matches" onclick="HubEngine.switchTab('matches')">
    <div class="flex items-center gap-3">
      <i data-lucide="swords" class="w-4 h-4"></i>
      <span>Match Lobby</span>
    </div>
  </button>

  {% if is_team %}
  <button class="hub-nav-btn" data-hub-tab="squad" onclick="HubEngine.switchTab('squad')">
    <div class="flex items-center gap-3">
      <i data-lucide="shield" class="w-4 h-4"></i>
      <span>Squad</span>
    </div>
    {% if squad_warnings %}
      <span class="w-5 h-5 rounded flex items-center justify-center bg-[#FFB800] text-black text-[10px] font-bold">!</span>
    {% endif %}
  </button>
  {% endif %}

  <button class="hub-nav-btn" data-hub-tab="schedule" onclick="HubEngine.switchTab('schedule')">
    <div class="flex items-center gap-3">
      <i data-lucide="calendar" class="w-4 h-4"></i>
      <span>Schedule</span>
    </div>
  </button>

  <p class="px-3 text-[10px] font-black text-gray-600 uppercase tracking-widest mb-2 mt-6">Competition</p>

  <button class="hub-nav-btn" data-hub-tab="bracket" onclick="HubEngine.switchTab('bracket')">
    <div class="flex items-center gap-3">
      <i data-lucide="git-merge" class="w-4 h-4 transform rotate-90"></i>
      <span>Bracket</span>
    </div>
  </button>

  <button class="hub-nav-btn" data-hub-tab="standings" onclick="HubEngine.switchTab('standings')">
    <div class="flex items-center gap-3">
      <i data-lucide="bar-chart-2" class="w-4 h-4"></i>
      <span>Standings</span>
    </div>
  </button>

  <p class="px-3 text-[10px] font-black text-gray-600 uppercase tracking-widest mb-2 mt-6">Resources</p>

  <button class="hub-nav-btn" data-hub-tab="prizes" onclick="HubEngine.switchTab('prizes')">
    <div class="flex items-center gap-3">
      <i data-lucide="trophy" class="w-4 h-4"></i>
      <span>Prizes</span>
    </div>
  </button>

  <button class="hub-nav-btn" data-hub-tab="resources" onclick="HubEngine.switchTab('resources')">
    <div class="flex items-center gap-3">
      <i data-lucide="library" class="w-4 h-4"></i>
      <span>Resources</span>
    </div>
  </button>

  <button class="hub-nav-btn" data-hub-tab="participants" onclick="HubEngine.switchTab('participants')">
    <div class="flex items-center gap-3">
      <i data-lucide="users" class="w-4 h-4"></i>
      <span>Participants</span>
    </div>
  </button>

  {% if tournament.rules_pdf %}
  <button class="hub-nav-btn" data-hub-tab="rulebook" onclick="HubEngine.switchTab('rulebook')">
    <div class="flex items-center gap-3">
      <i data-lucide="book-open" class="w-4 h-4"></i>
      <span>Rulebook</span>
    </div>
  </button>
  {% elif tournament.rules_text %}
  <button class="hub-nav-btn" data-hub-tab="rulebook" onclick="HubEngine.switchTab('rulebook')">
    <div class="flex items-center gap-3">
      <i data-lucide="book-open" class="w-4 h-4"></i>
      <span>Rulebook</span>
    </div>
  </button>
  {% endif %}

  {% if tournament.stream_twitch_url or tournament.stream_youtube_url %}
  <a href="{{ tournament.stream_twitch_url|default:tournament.stream_youtube_url }}" target="_blank" rel="noopener"
     class="hub-nav-btn">
    <div class="flex items-center gap-3">
      <i data-lucide="tv" class="w-4 h-4 text-[#9146FF]"></i>
      <span>Watch Stream</span>
    </div>
    <i data-lucide="external-link" class="w-3 h-3 opacity-50"></i>
  </a>
  {% endif %}
</div>

{% comment %}Social & Contact Links{% endcomment %}
{% if discord_url or contact_email or social_twitter or social_instagram or social_website %}
<div class="px-3 pb-2">
  <p class="px-3 text-[10px] font-black text-gray-600 uppercase tracking-widest mb-3 mt-2">Connect</p>

  {% if discord_url %}
  <a href="{{ discord_url }}" target="_blank" rel="noopener"
     class="flex items-center gap-3 p-3 rounded-lg bg-[#5865F2]/10 hover:bg-[#5865F2]/20 border border-[#5865F2]/20 hover:border-[#5865F2]/40 transition-all mb-2 group">
    <i data-lucide="message-circle" class="w-4 h-4 text-[#5865F2]"></i>
    <span class="text-sm font-medium text-[#5865F2] group-hover:text-white transition-colors">Discord Server</span>
    <i data-lucide="external-link" class="w-3 h-3 text-[#5865F2]/50 ml-auto"></i>
  </a>
  {% endif %}

  {% if social_twitter %}
  <a href="{{ social_twitter }}" target="_blank" rel="noopener"
     class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition-all text-gray-400 hover:text-white">
    <i data-lucide="twitter" class="w-3.5 h-3.5"></i>
    <span class="text-xs font-medium">X / Twitter</span>
  </a>
  {% endif %}

  {% if social_instagram %}
  <a href="{{ social_instagram }}" target="_blank" rel="noopener"
     class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition-all text-gray-400 hover:text-white">
    <i data-lucide="instagram" class="w-3.5 h-3.5"></i>
    <span class="text-xs font-medium">Instagram</span>
  </a>
  {% endif %}

  {% if social_website %}
  <a href="{{ social_website }}" target="_blank" rel="noopener"
     class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition-all text-gray-400 hover:text-white">
    <i data-lucide="globe" class="w-3.5 h-3.5"></i>
    <span class="text-xs font-medium">Website</span>
  </a>
  {% endif %}
</div>
{% endif %}

{% comment %}Bottom Actions{% endcomment %}
<div class="p-4 border-t border-white/5 bg-black/30 space-y-2">
  {% if contact_email %}
  <a href="mailto:{{ contact_email }}?subject=Tournament%20Inquiry%20-%20{{ tournament.name|urlencode }}"
     class="w-full px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all flex items-center justify-center gap-2 text-xs font-bold text-white">
    <i data-lucide="message-square" class="w-4 h-4 text-[#00F0FF]"></i> Contact Admins
  </a>
  {% elif tournament.organizer %}
  <button onclick="HubEngine.showContactModal()"
     class="w-full px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all flex items-center justify-center gap-2 text-xs font-bold text-white">
    <i data-lucide="message-square" class="w-4 h-4 text-[#00F0FF]"></i> Contact Admins
  </button>
  {% endif %}
  <a href="{% url 'tournaments:detail' slug=tournament.slug %}"
     class="w-full px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all flex items-center justify-center gap-2 text-xs font-bold text-white">
    <i data-lucide="arrow-left" class="w-4 h-4 text-gray-400"></i> Back to Tournament
  </a>
</div>
