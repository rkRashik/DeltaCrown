{% extends "base.html" %}
{% load static %}
{% block title %}Search — DeltaCrown{% endblock %}
{% block content %}
<section class="container py-8">
  <form class="glass p-4 rounded-2xl" method="get" action="/search/">
    <div class="grid sm:grid-cols-6 gap-3">
      <input type="search" name="q" value="{{ q }}" class="filter-input sm:col-span-4" placeholder="Search tournaments and teams…">
      <select name="type" class="filter-select sm:col-span-2">
        <option value="" {% if not type %}selected{% endif %}>All</option>
        <option value="tournaments" {% if type == 'tournaments' %}selected{% endif %}>Tournaments</option>
        <option value="teams" {% if type == 'teams' %}selected{% endif %}>Teams</option>
      </select>
    </div>
    <div class="mt-3 flex gap-2 justify-end">
      <button class="btn-secondary" type="submit">Search</button>
      <a class="btn-ghost" href="/search/">Reset</a>
    </div>
  </form>

  {% if q %}
  <div class="mt-6 grid gap-8">
    <section>
      <h3 class="font-semibold mb-2">Tournaments {% if tournaments %}<span class="text-muted">({{ tournaments|length }})</span>{% endif %}</h3>
      {% if tournaments %}
        <div class="t-grid">
          {% for t in tournaments %}
            {% include "tournaments/partials/_card.html" with t=t %}
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">No tournaments matched.</p>
      {% endif %}
    </section>

    <section>
      <h3 class="font-semibold mb-2">Teams {% if teams %}<span class="text-muted">({{ teams|length }})</span>{% endif %}</h3>
      {% if teams %}
        <div class="t-grid">
          {% for team in teams %}
            {% include "teams/partials/_card.html" %}
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">No teams matched.</p>
      {% endif %}
    </section>
  </div>
  {% endif %}
</section>
{% endblock %}

