{% load static %}
{# Ranking row component for leaderboards #}
{% comment %}
Usage:
  {% include 'teams/components/_ranking_row.html' with ranking=ranking show_game=True %}
{% endcomment %}

<tr class="ranking-row {% if ranking.rank <= 3 %}ranking-podium ranking-rank-{{ ranking.rank }}{% endif %}">
    <td class="rank-cell">
        <div class="rank-number">
            {% if ranking.rank == 1 %}
                ü•á <span class="rank-text">1</span>
            {% elif ranking.rank == 2 %}
                ü•à <span class="rank-text">2</span>
            {% elif ranking.rank == 3 %}
                ü•â <span class="rank-text">3</span>
            {% else %}
                <span class="rank-text">{{ ranking.rank }}</span>
            {% endif %}
        </div>
    </td>
    
    <td class="team-cell">
        <div class="team-info">
            {% if ranking.team.logo %}
                <img src="{{ ranking.team.logo.url }}" alt="{{ ranking.team.name }}" class="team-logo">
            {% else %}
                <div class="team-logo-placeholder">{{ ranking.team.tag|first|upper }}</div>
            {% endif %}
            <div class="team-details">
                <a href="{% url 'teams:team_profile' slug=ranking.team.slug %}" class="team-name">
                    {{ ranking.team.name }}
                </a>
                <span class="team-tag">[{{ ranking.team.tag }}]</span>
            </div>
        </div>
    </td>
    
    {% if show_game %}
    <td class="game-cell">
        <span class="game-name">{{ ranking.game|upper }}</span>
    </td>
    {% endif %}
    
    <td class="tier-cell">
        {% include 'teams/components/_tier_badge.html' with division=ranking.division elo=ranking.elo_rating %}
    </td>
    
    <td class="elo-cell">
        <span class="elo-value">{{ ranking.elo_rating }}</span>
        <span class="elo-label">ELO</span>
    </td>
    
    <td class="points-cell">
        <span class="points-value">{{ ranking.points }}</span>
        <span class="points-label">pts</span>
    </td>
    
    <td class="record-cell">
        <span class="wins">{{ ranking.matches_won }}W</span>
        <span class="separator">-</span>
        <span class="losses">{{ ranking.matches_lost }}L</span>
        {% if ranking.win_rate %}
            <span class="win-rate">({{ ranking.win_rate|floatformat:1 }}%)</span>
        {% endif %}
    </td>
    
    {% if ranking.win_streak > 0 or ranking.loss_streak > 0 %}
    <td class="streak-cell">
        {% if ranking.win_streak > 0 %}
            <span class="streak-win">üî• {{ ranking.win_streak }} W</span>
        {% elif ranking.loss_streak > 0 %}
            <span class="streak-loss">‚ùÑÔ∏è {{ ranking.loss_streak }} L</span>
        {% endif %}
    </td>
    {% endif %}
</tr>

<style>
.ranking-row {
    border-bottom: 1px solid #e5e7eb;
    transition: background-color 0.15s;
}

.ranking-row:hover {
    background-color: #f9fafb;
}

.ranking-podium {
    font-weight: 600;
}

.ranking-rank-1 {
    background-color: #fef3c7;
}

.ranking-rank-2 {
    background-color: #f3f4f6;
}

.ranking-rank-3 {
    background-color: #fce7cd;
}

.rank-cell {
    padding: 1rem;
    text-align: center;
    width: 80px;
}

.rank-number {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 1.25rem;
    font-weight: 700;
}

.team-cell {
    padding: 1rem;
}

.team-info {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.team-logo {
    width: 40px;
    height: 40px;
    border-radius: 0.375rem;
    object-fit: cover;
}

.team-logo-placeholder {
    width: 40px;
    height: 40px;
    border-radius: 0.375rem;
    background: linear-gradient(135deg, #7c3aed, #a78bfa);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.25rem;
}

.team-details {
    display: flex;
    flex-direction: column;
}

.team-name {
    font-weight: 600;
    color: #111827;
    text-decoration: none;
}

.team-name:hover {
    color: #7c3aed;
}

.team-tag {
    font-size: 0.875rem;
    color: #6b7280;
}

.game-cell, .tier-cell, .elo-cell, .points-cell, .record-cell, .streak-cell {
    padding: 1rem;
    text-align: center;
}

.elo-value, .points-value {
    font-weight: 700;
    color: #111827;
}

.elo-label, .points-label {
    font-size: 0.75rem;
    color: #6b7280;
    margin-left: 0.25rem;
}

.record-cell {
    font-family: 'Courier New', monospace;
}

.wins {
    color: #059669;
    font-weight: 600;
}

.losses {
    color: #dc2626;
    font-weight: 600;
}

.separator {
    color: #9ca3af;
    margin: 0 0.25rem;
}

.win-rate {
    font-size: 0.875rem;
    color: #6b7280;
    margin-left: 0.5rem;
}

.streak-win {
    color: #f59e0b;
    font-weight: 600;
}

.streak-loss {
    color: #3b82f6;
    font-weight: 600;
}
</style>
