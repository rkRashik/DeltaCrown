{% load static %}
{# ðŸŽ® GAMING TEAM NAVIGATION SYSTEM ðŸŽ® 
   Usage:
   - List page: {% include 'teams/partials/team_nav.html' with active_page='list' %}
   - Team pages: {% include 'teams/partials/team_nav.html' with team=team active_page='detail' %}
   
   Pages: 'list', 'detail', 'create', 'manage', 'invite', 'settings'
#}

<div class="gaming-team-navigation">
  <!-- Gaming Breadcrumbs -->
  <div class="gaming-breadcrumbs">
    <div class="breadcrumb-bg-effect"></div>
    
    <nav class="breadcrumb-nav">
      <!-- Home -->
      <a href="/" class="breadcrumb-item">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      
      <div class="breadcrumb-separator">
        <i class="fas fa-chevron-right"></i>
      </div>
      
      <!-- Teams Section -->
      <a href="{% url 'teams:list' %}" class="breadcrumb-item {% if active_page == 'list' %}active{% endif %}">
        <i class="fas fa-users"></i>
        <span>Teams</span>
      </a>
      
      {% if team %}
        <div class="breadcrumb-separator">
          <i class="fas fa-chevron-right"></i>
        </div>
        
        <!-- Team Detail -->
        <a href="{% url 'teams:detail' team.slug %}" class="breadcrumb-item {% if active_page == 'detail' %}active{% endif %}">
          {% if team.logo %}
            <img src="{{ team.logo.url }}" class="breadcrumb-team-logo" alt="{{ team.name }}">
          {% else %}
            <div class="breadcrumb-team-logo-placeholder">{{ team.name|first|upper }}</div>
          {% endif %}
          <span>{{ team.name }}</span>
        </a>
        
        <!-- Sub-pages -->
        {% if active_page == 'manage' %}
          <div class="breadcrumb-separator">
            <i class="fas fa-chevron-right"></i>
          </div>
          <span class="breadcrumb-item active">
            <i class="fas fa-cog"></i>
            <span>Manage</span>
          </span>
        {% elif active_page == 'invite' %}
          <div class="breadcrumb-separator">
            <i class="fas fa-chevron-right"></i>
          </div>
          <span class="breadcrumb-item active">
            <i class="fas fa-user-plus"></i>
            <span>Invite</span>
          </span>
        {% elif active_page == 'settings' %}
          <div class="breadcrumb-separator">
            <i class="fas fa-chevron-right"></i>
          </div>
          <span class="breadcrumb-item active">
            <i class="fas fa-edit"></i>
            <span>Settings</span>
          </span>
        {% endif %}
      {% elif active_page == 'create' %}
        <div class="breadcrumb-separator">
          <i class="fas fa-chevron-right"></i>
        </div>
        <span class="breadcrumb-item active">
          <i class="fas fa-plus"></i>
          <span>Create Team</span>
        </span>
      {% endif %}
    </nav>
  </div>

  <!-- Gaming Action Bar -->
  {% if team %}
  <div class="gaming-action-bar">
    <div class="action-bar-bg"></div>
    
    <!-- Team Quick Info -->
    <div class="team-quick-info">
      <div class="team-info-card">
        {% if team.logo %}
          <img src="{{ team.logo.url }}" class="quick-team-logo" alt="{{ team.name }}">
        {% else %}
          <div class="quick-team-logo-placeholder">{{ team.name|first|upper }}</div>
        {% endif %}
        
        <div class="quick-team-details">
          <div class="quick-team-name">{{ team.name }}</div>
          {% if team.tag %}
            <div class="quick-team-tag">[{{ team.tag }}]</div>
          {% endif %}
          <div class="quick-team-stats">
            <span><i class="fas fa-users"></i> {{ team.active_members.count }}</span>
            <span><i class="fas fa-trophy"></i> {{ team.wins|default:"0" }}</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Navigation Tabs -->
    <div class="nav-tabs">
      <a href="{% url 'teams:detail' team.slug %}" 
         class="nav-tab {% if active_page == 'detail' %}active{% endif %}">
        <i class="fas fa-info-circle"></i>
        <span>Overview</span>
      </a>
      
      {% if user_is_member %}
        {% if is_captain %}
          <a href="{% url 'teams:manage' team.slug %}" 
             class="nav-tab {% if active_page == 'manage' %}active{% endif %}">
            <i class="fas fa-cog"></i>
            <span>Manage</span>
          </a>
          
          <a href="{% url 'teams:invite_member' team.slug %}" 
             class="nav-tab {% if active_page == 'invite' %}active{% endif %}">
            <i class="fas fa-user-plus"></i>
            <span>Invite</span>
          </a>
          
          <a href="{% url 'teams:settings' team.slug %}" 
             class="nav-tab {% if active_page == 'settings' %}active{% endif %}">
            <i class="fas fa-edit"></i>
            <span>Settings</span>
          </a>
        {% endif %}
      {% endif %}
      
      <a href="#" class="nav-tab">
        <i class="fas fa-chart-line"></i>
        <span>Statistics</span>
      </a>
      
      <a href="#" class="nav-tab">
        <i class="fas fa-calendar"></i>
        <span>Schedule</span>
      </a>
    </div>
    
    <!-- Quick Actions -->
    <div class="quick-actions">
      {% if not user_is_member %}
        {% if user_can_join %}
          <a href="{% url 'teams:join' team.slug %}" class="action-btn primary">
            <i class="fas fa-plus"></i>
            <span>Join Team</span>
          </a>
        {% elif team.is_recruiting %}
          {# TODO: Add teams:apply URL pattern if needed #}
          <span class="action-btn disabled">
            <i class="fas fa-paper-plane"></i>
            <span>Apply</span>
          </span>
        {% endif %}
      {% endif %}
      
      <button class="action-btn secondary" onclick="shareTeam()">
        <i class="fas fa-share"></i>
        <span class="action-text">Share</span>
      </button>
      
      <button class="action-btn secondary" onclick="followTeam()">
        <i class="fas fa-heart"></i>
        <span class="action-text">Follow</span>
      </button>
    </div>
  </div>
  {% endif %}
</div>

<style>
/* ðŸŽ® GAMING TEAM NAVIGATION STYLES ðŸŽ® */
.gaming-team-navigation {
    position: relative;
    z-index: 10;
}

/* Gaming Breadcrumbs */
.gaming-breadcrumbs {
    background: rgba(16, 21, 62, 0.9);
    backdrop-filter: blur(15px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
}

.breadcrumb-bg-effect {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        rgba(255, 0, 255, 0.05) 0%, 
        rgba(0, 255, 255, 0.05) 50%, 
        rgba(255, 0, 255, 0.05) 100%);
    animation: breadcrumbFlow 8s infinite linear;
}

@keyframes breadcrumbFlow {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.breadcrumb-nav {
    max-width: 1400px;
    margin: 0 auto;
    padding: 16px 30px;
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
    z-index: 2;
}

.breadcrumb-item {
    display: flex;
    align-items: center;
    gap: 8px;
    color: rgba(255, 255, 255, 0.7);
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: 8px;
    transition: all 0.2s ease;
    position: relative;
}

.breadcrumb-item:hover {
    color: #00ffff;
    background: rgba(0, 255, 255, 0.1);
    text-decoration: none;
    transform: translateY(-1px);
}

.breadcrumb-item.active {
    color: #ff0080;
    background: rgba(255, 0, 128, 0.15);
    font-weight: 600;
}

.breadcrumb-separator {
    color: rgba(255, 255, 255, 0.4);
    font-size: 12px;
    margin: 0 4px;
}

.breadcrumb-team-logo {
    width: 20px;
    height: 20px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    object-fit: cover;
}

.breadcrumb-team-logo-placeholder {
    width: 20px;
    height: 20px;
    border-radius: 4px;
    background: linear-gradient(135deg, #ff00ff, #00ffff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: 700;
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

/* Gaming Action Bar */
.gaming-action-bar {
    background: rgba(26, 26, 46, 0.9);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
}

.action-bar-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(ellipse at 20% 50%, rgba(255, 0, 255, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 50%, rgba(0, 255, 255, 0.08) 0%, transparent 50%);
}

.gaming-action-bar {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px 30px;
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 30px;
    align-items: center;
    position: relative;
    z-index: 2;
}

/* Team Quick Info */
.team-info-card {
    display: flex;
    align-items: center;
    gap: 12px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 12px;
}

.quick-team-logo {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    object-fit: cover;
    box-shadow: 0 0 12px rgba(0, 255, 255, 0.3);
}

.quick-team-logo-placeholder {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: linear-gradient(135deg, #ff00ff, #00ffff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: 900;
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 0 12px rgba(255, 0, 255, 0.3);
}

.quick-team-name {
    font-size: 18px;
    font-weight: 700;
    background: linear-gradient(135deg, #ff00ff, #00ffff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0 0 2px 0;
}

.quick-team-tag {
    color: #ff0080;
    font-size: 14px;
    font-weight: 600;
    margin: 0 0 4px 0;
}

.quick-team-stats {
    display: flex;
    gap: 12px;
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
}

.quick-team-stats span {
    display: flex;
    align-items: center;
    gap: 4px;
}

.quick-team-stats i {
    color: #00ffff;
}

/* Navigation Tabs */
.nav-tabs {
    display: flex;
    gap: 4px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 12px;
    padding: 4px;
}

.nav-tab {
    display: flex;
    align-items: center;
    gap: 8px;
    color: rgba(255, 255, 255, 0.7);
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    padding: 8px 16px;
    border-radius: 8px;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.nav-tab::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s ease;
}

.nav-tab:hover::before {
    left: 100%;
}

.nav-tab:hover {
    color: #00ffff;
    background: rgba(0, 255, 255, 0.1);
    text-decoration: none;
    transform: translateY(-1px);
}

.nav-tab.active {
    color: white;
    background: linear-gradient(135deg, #ff0080, #8000ff);
    box-shadow: 0 0 16px rgba(255, 0, 128, 0.3);
}

.nav-tab.active:hover {
    background: linear-gradient(135deg, #ff0099, #9000ff);
}

/* Quick Actions */
.quick-actions {
    display: flex;
    gap: 8px;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.action-btn:hover::before {
    left: 100%;
}

.action-btn.primary {
    background: linear-gradient(135deg, #ff0080, #8000ff);
    color: white;
}

.action-btn.primary:hover {
    background: linear-gradient(135deg, #ff0099, #9000ff);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 0, 128, 0.4);
    color: white;
    text-decoration: none;
}

.action-btn.secondary {
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.action-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: #00ffff;
    color: #00ffff;
    transform: translateY(-2px);
}

.action-btn.disabled {
    background: rgba(100, 100, 100, 0.3);
    color: rgba(255, 255, 255, 0.4);
    border: 1px solid rgba(100, 100, 100, 0.5);
    cursor: not-allowed;
    opacity: 0.6;
}

.action-btn.disabled:hover {
    background: rgba(100, 100, 100, 0.3);
    color: rgba(255, 255, 255, 0.4);
    transform: none;
}

/* Responsive Design */
@media (max-width: 1200px) {
    .gaming-action-bar {
        grid-template-columns: 1fr;
        gap: 20px;
        text-align: center;
    }
    
    .nav-tabs {
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .quick-actions {
        justify-content: center;
    }
}

@media (max-width: 768px) {
    .breadcrumb-nav {
        padding: 12px 15px;
        flex-wrap: wrap;
    }
    
    .gaming-action-bar {
        padding: 15px 15px;
    }
    
    .nav-tabs {
        flex-direction: column;
        width: 100%;
    }
    
    .nav-tab {
        justify-content: center;
    }
    
    .action-text {
        display: none;
    }
    
    .team-info-card {
        flex-direction: column;
        text-align: center;
    }
}

@media (max-width: 480px) {
    .breadcrumb-item span {
        display: none;
    }
    
    .breadcrumb-item:first-child span {
        display: inline;
    }
    
    .quick-actions {
        flex-direction: column;
        width: 100%;
    }
    
    .action-btn {
        justify-content: center;
    }
}
</style>

<script>
function shareTeam() {
    if (navigator.share) {
        navigator.share({
            title: '{{ team.name }} - Elite Gaming Team',
            text: 'Check out this amazing esports team!',
            url: window.location.href
        });
    } else {
        navigator.clipboard.writeText(window.location.href);
        // Show notification
        const btn = event.target.closest('.action-btn');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i> <span class="action-text">Copied!</span>';
        setTimeout(() => {
            btn.innerHTML = originalText;
        }, 2000);
    }
}

function followTeam() {
    const btn = event.target.closest('.action-btn');
    const icon = btn.querySelector('i');
    const text = btn.querySelector('.action-text');
    
    if (icon.classList.contains('fa-heart')) {
        icon.classList.remove('fa-heart');
        icon.classList.add('fa-heart-broken');
        if (text) text.textContent = 'Unfollow';
        btn.style.background = 'rgba(255, 0, 0, 0.2)';
        btn.style.borderColor = 'rgba(255, 0, 0, 0.3)';
    } else {
        icon.classList.remove('fa-heart-broken');
        icon.classList.add('fa-heart');
        if (text) text.textContent = 'Follow';
        btn.style.background = '';
        btn.style.borderColor = '';
    }
}
</script>