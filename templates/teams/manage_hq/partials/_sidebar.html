<aside id="sidebar" class="fixed lg:sticky top-0 left-0 z-50 lg:z-auto
     h-screen w-[86vw] max-w-[360px] lg:w-auto
     -translate-x-[110%] lg:translate-x-0 transition-transform duration-200
     border-r border-line bg-white/5 backdrop-blur-xl">

    <div class="p-4 h-full flex flex-col gap-3 overflow-hidden">
        <!-- Team Header -->
        <div class="rounded-2xl border border-line bg-card shadow-soft p-3">
            <div class="flex items-center gap-3">
                <div class="h-11 w-11 rounded-2xl grid place-items-center"
                    style="background: linear-gradient(135deg, color-mix(in oklab, var(--team-primary) 80%, #000), rgba(255,255,255,.06)); border:1px solid rgba(255,255,255,.14)">
                    {% if team.logo %}
                    <img src="{{ team.logo.url }}" alt="{{ team.name }}" class="w-full h-full object-cover rounded-2xl">
                    {% else %}
                    <span class="font-black tracking-tight">{{ team.tag|default:team.name|slice:":2"|upper }}</span>
                    {% endif %}
                </div>
                <div class="min-w-0">
                    <div class="flex items-center gap-2">
                        <div class="font-semibold truncate">{{ team.name|default:"Team" }}</div>
                        <span class="text-[11px] px-2 py-[2px] rounded-full border border-line bg-white/5 text-white/80">
                            {{ team.game.display_name|default:"Game" }}
                        </span>
                    </div>
                    <div class="text-xs text-muted truncate">
                        <span>
                            {% if user_membership.role == 'OWNER' %}
                                ðŸ‘‘ Owner
                            {% elif user_membership.role == 'MANAGER' %}
                                ðŸ’¼ Manager
                            {% elif user_membership.role == 'COACH' %}
                                ðŸ‘” Coach
                            {% else %}
                                ðŸ‘¤ Member
                            {% endif %}
                        </span> â€¢ Management Console
                    </div>
                </div>
            </div>

            <!-- Quick actions -->
            {% if can_manage_roster %}
            <div class="grid grid-cols-2 gap-2 mt-3">
                <button id="qaInvite"
                    class="rounded-xl border border-line bg-white/5 hover:bg-white/10 transition px-3 py-2 text-xs flex items-center justify-center gap-2">
                    <i data-lucide="user-plus" class="w-4 h-4"></i> Invite
                </button>
                <button id="qaAnnounce"
                    class="rounded-xl border border-line bg-white/5 hover:bg-white/10 transition px-3 py-2 text-xs flex items-center justify-center gap-2">
                    <i data-lucide="megaphone" class="w-4 h-4"></i> Post
                </button>
            </div>
            {% endif %}
        </div>

        <!-- Nav -->
        <nav class="flex-1 overflow-auto pr-1 pb-3">
            <div class="mt-2">
                <div class="px-2 py-2 text-[11px] tracking-[.18em] uppercase text-white/50 flex items-center justify-between">
                    <span>Core</span>
                    <span class="text-[10px] px-2 py-[2px] rounded-full border border-line bg-white/5">LIVE</span>
                </div>

                <div class="space-y-1">
                    <a class="nav-item flex items-center gap-3 px-3 py-2 rounded-xl border border-transparent hover:bg-white/5 hover:border-line transition"
                        href="#command" data-route="command" aria-current="page">
                        <span class="h-8 w-8 rounded-xl grid place-items-center bg-white/5 border border-line">
                            <i data-lucide="radar" class="w-4 h-4"></i>
                        </span>
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium truncate">Command Center</div>
                            <div class="text-[12px] text-muted truncate">Today, alerts, actions</div>
                        </div>
                    </a>

                    <a class="nav-item flex items-center gap-3 px-3 py-2 rounded-xl border border-transparent hover:bg-white/5 hover:border-line transition"
                        href="#roster" data-route="roster">
                        <span class="h-8 w-8 rounded-xl grid place-items-center bg-white/5 border border-line">
                            <i data-lucide="users" class="w-4 h-4"></i>
                        </span>
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium truncate">Roster Ops</div>
                            <div class="text-[12px] text-muted truncate">Players, staff, roles</div>
                        </div>
                    </a>

                    <a class="nav-item flex items-center gap-3 px-3 py-2 rounded-xl border border-transparent hover:bg-white/5 hover:border-line transition"
                        href="#profile" data-route="profile">
                        <span class="h-8 w-8 rounded-xl grid place-items-center bg-white/5 border border-line">
                            <i data-lucide="palette" class="w-4 h-4"></i>
                        </span>
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium truncate">Team Profile</div>
                            <div class="text-[12px] text-muted truncate">Public identity</div>
                        </div>
                    </a>

                    <a class="nav-item flex items-center gap-3 px-3 py-2 rounded-xl border border-transparent hover:bg-white/5 hover:border-line transition"
                        href="#settings" data-route="settings">
                        <span class="h-8 w-8 rounded-xl grid place-items-center bg-white/5 border border-line">
                            <i data-lucide="shield" class="w-4 h-4"></i>
                        </span>
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium truncate">Settings & Security</div>
                            <div class="text-[12px] text-muted truncate">Privacy, access</div>
                        </div>
                    </a>
                </div>
            </div>
        </nav>

        <!-- Mobile close -->
        <button id="closeSidebar"
            class="lg:hidden rounded-xl border border-line bg-white/5 hover:bg-white/10 transition px-3 py-2 text-sm flex items-center justify-center gap-2">
            <i data-lucide="x" class="w-4 h-4"></i> Close
        </button>
    </div>
</aside>
