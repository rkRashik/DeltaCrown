{% extends "base.html" %}
{% block title %}Transfer Captain — {{ team.name }}{% endblock %}

{% block content %}
{% meta_tags title="Transfer Captain" description="Transfer team captaincy to another member." %}

<section aria-labelledby="h1" data-testid="team-transfer-captain">
  <h1 id="h1" class="mb-3">Transfer Captain</h1>

  <article class="card p-3">
    <p class="text-muted mb-2"><strong>Team:</strong> {{ team.name }} <span class="badge">{{ team.tag }}</span></p>

    <form method="post" novalidate>
      {% csrf_token %}

      {% if form and form.member %}
        {{ form.non_field_errors }}
        {% include "components/form_field.html" with field=form.member help="Choose the new captain from current members." %}
      {% else %}
        <div class="form-field">
          <label class="label" for="member">New captain</label>
          <select id="member" name="member" class="form-control" required>
            {% for m in team.members.all %}
              <option value="{{ m.id }}">{{ m.display_name|default:m.user.username }}</option>
            {% endfor %}
          </select>
        </div>
      {% endif %}

      <div class="d-flex gap-2">
        <button class="btn btn-primary" type="submit" data-busy-text="Transferring…">Confirm Transfer</button>
        <a class="btn btn-outline" href="/teams/{{ team.tag|urlencode }}/">Cancel</a>
      </div>
    </form>
  </article>
</section>
{% endblock %}
