{% extends "base.html" %}
{% load static %}

{% block title %}Teams — DeltaCrown{% endblock %}

{% block content %}
<section class="container py-8">
  <nav aria-label="Breadcrumb" class="text-sm mb-2">
    <ol class="flex items-center gap-2 text-muted">
      <li><a class="link-nav" href="/">Home</a></li>
      <span>/</span>
      <li aria-current="page" class="text-body">Teams</li>
    </ol>
  </nav>
  <header class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 mb-4">
    <div>
      <h1 class="sec-h">Teams</h1>
      <p class="text-muted">Discover rosters, follow rivals, and find your next lineup.</p>
    </div>
    <div class="flex gap-2">
      {% if request.user.is_authenticated %}
        <a class="btn-primary" href="/teams/create/">Create Team</a>
      {% else %}
        <a class="btn-secondary" href="/accounts/login/">Sign in to create</a>
      {% endif %}
    </div>
  </header>

  <form id="teams-filter" class="filter-bar glass rounded-2xl p-4" method="get" action="">
    <div class="filter-bar__row">
      <div class="filter-field">
        <label class="filter-label">Search</label>
        <input type="search" name="q" value="{{ q }}" class="filter-input" placeholder="Search teams…">
      </div>
      <div class="filter-field">
        <label class="filter-label">Game</label>
        <select name="game" class="filter-select" id="teams-game">
          <option value="" {% if not game %}selected{% endif %}>All</option>
          <option value="valorant" {% if game == 'valorant' %}selected{% endif %}>Valorant</option>
          <option value="efootball" {% if game == 'efootball' %}selected{% endif %}>eFootball</option>
        </select>
      </div>
      <div class="filter-field">
        <label class="filter-label">Recruiting</label>
        <select name="open" class="filter-select" id="teams-open">
          <option value="" {% if not open %}selected{% endif %}>Any</option>
          <option value="1" {% if open == '1' %}selected{% endif %}>Open to join</option>
        </select>
      </div>
      <div class="filter-actions">
        <button class="btn-secondary" type="submit">Apply</button>
        <a class="btn-ghost" href="/teams/">Reset</a>
      </div>
    </div>
  </form>

  {% if teams %}
    <div id="teams-grid" class="t-grid mt-6">
      {% for tm in teams %}
        {% include "teams/partials/_card.html" with team=tm %}
      {% endfor %}
    </div>
  {% else %}
    <div class="mt-6">
      {% include "components/empty.html" with 
        title="No teams found" 
        subtitle="Try different filters or create your own team." 
        icon=static('siteui/svg/empty/empty-teams.svg') %}
    </div>
  {% endif %}
</section>
{% endblock %}
