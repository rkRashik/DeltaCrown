{% extends "base.html" %}
{% load static %}

{% block title %}{{ team.name }} â€” Team{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'siteui/css/teams-detail-responsive.css' %}?v=1.0">
<link rel="stylesheet" href="{% static 'siteui/css/teams-detail-hero-v2.css' %}?v=1.0">
<link rel="stylesheet" href="{% static 'teams/css/team-join-modern.css' %}?v=1.0">
<link rel="stylesheet" href="{% static 'teams/css/team-list-premium-complete.css' %}?v=7.0">
{% endblock %}

{% block content %}
<div class="team-detail-container">
  <!-- Modern Esports Hero Section -->
  <div class="team-esports-hero">
    <!-- Full-Width Banner Background -->
    <div class="team-hero-banner">
      {% if team.banner_image %}
        <img src="{{ team.banner_image.url }}" alt="{{ team.name }} banner" class="banner-image">
      {% else %}
        <div class="banner-placeholder">
          <div class="placeholder-pattern"></div>
        </div>
      {% endif %}
      <div class="banner-overlay"></div>
      <div class="banner-gradient"></div>
    </div>
    
    <!-- Hero Content Container -->
    <div class="team-hero-container">
      <div class="team-hero-layout">
        <!-- Left Side: Team Identity -->
        <div class="team-identity-section">
          <!-- Team Logo with Glow Effect -->
          <div class="team-logo-display">
            {% if team.logo %}
              <img src="{{ team.logo.url }}" alt="{{ team.name }} logo" class="team-logo-img">
            {% else %}
              <div class="team-logo-placeholder">
                <span class="logo-initials">{{ team.name|slice:":2"|upper }}</span>
              </div>
            {% endif %}
            <div class="logo-glow"></div>
          </div>
          
          <!-- Team Info -->
          <div class="team-identity-info">
            <h1 class="team-name-display">{{ team.name }}</h1>
            
            <div class="team-badges-row">
              <div class="team-game-tag">
                <i class="fas fa-gamepad"></i>
                <span>{{ team.game|title }}</span>
              </div>
              {% if team.is_recruiting and not is_member %}
                <div class="team-recruiting-tag">
                  <i class="fas fa-bullhorn"></i>
                  <span>Recruiting</span>
                </div>
              {% endif %}
              {% if team.region %}
                <div class="team-region-tag">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>{{ team.region }}</span>
                </div>
              {% endif %}
            </div>
            
            {% if team.tagline %}
              <p class="team-motto">{{ team.tagline }}</p>
            {% endif %}
          </div>
        </div>
        
        <!-- Right Side: Stats & Actions -->
        <div class="team-actions-section">
          <!-- Stats Cards -->
          <div class="team-stats-cards">
            <div class="stat-card">
              <div class="stat-icon-wrapper">
                <i class="fas fa-users"></i>
              </div>
              <div class="stat-details">
                <div class="stat-number">{{ team.memberships.count|default:0 }}</div>
                <div class="stat-label">Members</div>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon-wrapper">
                <i class="fas fa-trophy"></i>
              </div>
              <div class="stat-details">
                <div class="stat-number">{{ team.tournament_wins|default:0 }}</div>
                <div class="stat-label">Wins</div>
              </div>
            </div>
            
            <div class="stat-card">
              <div class="stat-icon-wrapper">
                <i class="fas fa-star"></i>
              </div>
              <div class="stat-details">
                <div class="stat-number">{{ team.total_points|default:0 }}</div>
                <div class="stat-label">Points</div>
              </div>
            </div>
          </div>
          
          <!-- Action Buttons - Role-Aware CTAs (Phase 16) -->
          <div class="team-action-buttons">
            {% if is_captain or is_manager %}
              <!-- Owner/Manager: Primary = Manage Team -->
              <a href="{% url 'teams:manage' team.slug %}" class="btn btn-primary">
                <i class="fas fa-cogs"></i>
                <span>Manage Team</span>
              </a>
              <a href="{% url 'teams:game_rankings' game_slug=team.game %}" class="btn btn-secondary">
                <i class="fas fa-trophy"></i>
                <span>Rankings</span>
              </a>
            {% elif is_member %}
              <!-- Member: Primary = Team Chat, Secondary = Rankings -->
              <a href="#tab-team-hub" class="btn btn-primary" onclick="document.querySelector('[data-tab=&quot;team-hub&quot;]').click()">
                <i class="fas fa-comments"></i>
                <span>Team Chat</span>
              </a>
              <a href="{% url 'teams:game_rankings' game_slug=team.game %}" class="btn btn-secondary">
                <i class="fas fa-trophy"></i>
                <span>Rankings</span>
              </a>
            {% else %}
              <!-- Public: Apply (if recruiting) or Follow -->
              {% if not user.is_authenticated %}
                <a href="{% url 'account_login' %}" class="btn btn-primary">
                  <i class="fas fa-sign-in-alt"></i>
                  <span>Login to Join</span>
                </a>
              {% elif already_in_team_for_game %}
                <button class="btn btn-disabled" disabled title="You already belong to a team in {{ team.game|title }}.">
                  <i class="fas fa-users"></i>
                  <span>Already in {{ team.game|title }} team</span>
                </button>
              {% elif team.is_recruiting %}
                <button 
                  type="button" 
                  class="btn btn-primary join-team-btn"
                  data-team-slug="{{ team.slug }}"
                  data-team-name="{{ team.name }}"
                  data-game-code="{{ team.game }}"
                  data-game-name="{{ team.get_game_display }}">
                  <i class="fas fa-user-plus"></i>
                  <span>Apply to Join</span>
                </button>
              {% else %}
                <button class="btn btn-secondary" onclick="alert('Follow feature coming soon!')">
                  <i class="fas fa-star"></i>
                  <span>Follow Team</span>
                </button>
              {% endif %}
              <a href="{% url 'teams:game_rankings' game_slug=team.game %}" class="btn btn-ghost">
                <i class="fas fa-trophy"></i>
                <span>Rankings</span>
              </a>
            {% endif %}
            
            {% include "teams/partials/share_menu.html" with title=team.name url=request.build_absolute_uri %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-6">
    <div class="tabs" data-tabs>
      <button class="tab active" data-tab="roster">Roster</button>
      {% if is_member %}
      <button class="tab" data-tab="team-hub">Team Hub</button>
      {% endif %}
      <button class="tab" data-tab="matches">Matches</button>
      <button class="tab" data-tab="stats">Stats</button>
      <button class="tab" data-tab="media">Media</button>
    </div>

    <section id="tab-roster" class="tab-panel mt-4">
      {% include "teams/_roster.html" with roster=roster team=team is_captain=is_captain %}
    </section>

    {% if is_member %}
    <section id="tab-team-hub" class="tab-panel mt-4 hidden">
      <!-- Member Dashboard Header -->
      <div class="card glass p-6 mb-6">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h2 class="text-2xl font-bold flex items-center gap-3">
              <i class="fas fa-tachometer-alt text-cyan-400"></i>
              {% if is_captain %}
                Captain Dashboard
              {% elif user_membership.role == 'MANAGER' %}
                Manager Dashboard
              {% else %}
                Member Dashboard
              {% endif %}
            </h2>
            <p class="text-gray-400 mt-1">Welcome back, {{ request.user.username }}!</p>
          </div>
          <div class="text-right">
            <div class="text-sm text-gray-400">Your Role</div>
            <div class="font-semibold text-lg">
              {% if is_captain %}
                <i class="fas fa-crown text-yellow-400"></i> Captain
              {% elif user_membership.role == 'MANAGER' %}
                <i class="fas fa-user-tie text-blue-400"></i> Manager
              {% elif user_membership.role == 'COACH' %}
                <i class="fas fa-chalkboard-teacher text-green-400"></i> Coach
              {% else %}
                <i class="fas fa-user text-gray-400"></i> {{ user_membership.get_role_display }}
              {% endif %}
            </div>
          </div>
        </div>
        
        <!-- Quick Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
          <div class="p-4 rounded-lg bg-gradient-to-br from-cyan-500/10 to-blue-500/10 border border-cyan-500/20">
            <div class="text-sm text-gray-400">Team Members</div>
            <div class="text-2xl font-bold text-cyan-400">{{ roster|length }}</div>
          </div>
          <div class="p-4 rounded-lg bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20">
            <div class="text-sm text-gray-400">Tournaments</div>
            <div class="text-2xl font-bold text-purple-400">{{ team.tournament_count|default:0 }}</div>
          </div>
          <div class="p-4 rounded-lg bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/20">
            <div class="text-sm text-gray-400">Win Rate</div>
            <div class="text-2xl font-bold text-green-400">{{ team.win_rate|default:"0" }}%</div>
          </div>
          <div class="p-4 rounded-lg bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/20">
            <div class="text-sm text-gray-400">Rank Points</div>
            <div class="text-2xl font-bold text-yellow-400">{{ team.total_points|default:0 }}</div>
          </div>
        </div>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        
        <!-- Member Actions Card -->
        <div class="card glass p-6">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-user-cog text-cyan-400"></i>
            My Actions
          </h3>
          
          <div class="space-y-3">
            <!-- Update Game ID -->
            <button 
              class="w-full btn btn-secondary justify-start text-left"
              onclick="updateGameID('{{ team.game }}', '{{ team.get_game_display }}')">
              <i class="fas fa-id-card"></i>
              <span>Update Game ID</span>
            </button>

            <!-- View My Stats -->
            <a href="{% url 'user_profile:profile' user.username %}" class="w-full btn btn-secondary justify-start">
              <i class="fas fa-chart-bar"></i>
              <span>View My Stats</span>
            </a>

            <!-- Notifications -->
            <button class="w-full btn btn-secondary justify-start text-left" onclick="showTeamNotifications()">
              <i class="fas fa-bell"></i>
              <span>Team Notifications</span>
              {% if pending_notifications_count %}
              <span class="badge bg-red-500 ml-auto">{{ pending_notifications_count }}</span>
              {% endif %}
            </button>

            <!-- Team Calendar -->
            <a href="#" class="w-full btn btn-secondary justify-start" onclick="alert('Team calendar feature coming soon!'); return false;">
              <i class="fas fa-calendar-alt"></i>
              <span>Team Calendar</span>
            </a>

            <!-- Practice Schedule -->
            <a href="#" class="w-full btn btn-secondary justify-start" onclick="alert('Practice schedule feature coming soon!'); return false;">
              <i class="fas fa-clock"></i>
              <span>Practice Schedule</span>
            </a>
            
            <!-- Manager/Captain Actions -->
            {% if is_captain or user_membership.role == 'MANAGER' %}
            <div class="pt-3 mt-3 border-t border-gray-700">
              <div class="text-xs text-gray-400 mb-2 font-semibold uppercase">Management Actions</div>
              
              <a href="{% url 'teams:invite_member' team.slug %}" class="w-full btn btn-primary justify-start mb-2">
                <i class="fas fa-user-plus"></i>
                <span>Invite Members</span>
              </a>
              
              {% if is_captain %}
              <a href="{% url 'teams:settings' team.slug %}" class="w-full btn btn-primary justify-start mb-2">
                <i class="fas fa-cog"></i>
                <span>Team Settings</span>
              </a>
              
              <a href="{% url 'teams:dashboard' team.slug %}" class="w-full btn btn-primary justify-start mb-2">
                <i class="fas fa-tachometer-alt"></i>
                <span>Full Dashboard</span>
              </a>
              {% endif %}
            </div>
            {% endif %}

            <!-- Leave Team (Always at bottom, danger action) -->
            <div class="pt-3 mt-3 border-t border-red-900/30">
              <button 
                class="w-full btn btn-danger justify-start text-left"
                onclick="showLeaveTeamModal('{{ team.slug }}', '{{ team.name }}', {{ roster|length }}, {{ is_captain|yesno:'true,false' }})">
                <i class="fas fa-sign-out-alt"></i>
                <span>Leave Team</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Team Communication Card -->
        <div class="card glass p-6">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-comments text-purple-400"></i>
            Communication
          </h3>
          
          <div class="space-y-4">
            {% if team.discord %}
            <a href="{{ team.discord }}" target="_blank" rel="noopener" class="block p-4 rounded-lg bg-indigo-600 hover:bg-indigo-700 transition-colors">
              <div class="flex items-center gap-3">
                <i class="fab fa-discord text-2xl"></i>
                <div>
                  <div class="font-semibold">Discord Server</div>
                  <div class="text-sm opacity-75">Join team chat</div>
                </div>
              </div>
            </a>
            {% endif %}

            <div class="p-4 rounded-lg border border-gray-700 bg-gray-800/50">
              <div class="flex items-start gap-3">
                <i class="fas fa-info-circle text-cyan-400 mt-1"></i>
                <div class="text-sm">
                  <p class="font-semibold mb-1">Team Coordination</p>
                  <p class="text-gray-400">Connect with your teammates through Discord or social media. Stay updated on practice schedules and tournament registrations.</p>
                </div>
              </div>
            </div>

            <!-- Contact Captain -->
            {% if not is_captain and team.captain %}
            <div class="p-4 rounded-lg border border-gray-700">
              <div class="flex items-center gap-3">
                <i class="fas fa-user-shield text-lg text-yellow-400"></i>
                <div>
                  <div class="text-sm text-gray-400">Team Captain</div>
                  <div class="font-semibold">{{ team.captain.user.username }}</div>
                </div>
              </div>
            </div>
            {% endif %}
          </div>
        </div>

        <!-- Quick Links Card -->
        <div class="card glass p-6">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-bolt text-yellow-400"></i>
            Quick Links
          </h3>
          
          <div class="space-y-2">
            <a href="{% url 'teams:team_tournaments' team.slug %}" class="flex items-center gap-3 p-3 rounded hover:bg-white/5 transition-colors">
              <i class="fas fa-trophy text-yellow-400"></i>
              <span>Tournament History</span>
            </a>
            
            <a href="{% url 'teams:team_analytics' team.id %}" class="flex items-center gap-3 p-3 rounded hover:bg-white/5 transition-colors">
              <i class="fas fa-chart-line text-green-400"></i>
              <span>Team Analytics</span>
            </a>
            
            {% if is_captain %}
            <a href="{% url 'teams:invite_member' team.slug %}" class="flex items-center gap-3 p-3 rounded hover:bg-white/5 transition-colors">
              <i class="fas fa-user-plus text-blue-400"></i>
              <span>Invite Members</span>
            </a>
            {% endif %}
          </div>
        </div>

        <!-- Team Status Card -->
        <div class="card glass p-6">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-info-circle text-blue-400"></i>
            Team Info
          </h3>
          
          <div class="space-y-3">
            <div class="flex justify-between items-center">
              <span class="text-gray-400">Members</span>
              <span class="font-semibold">{{ roster|length }}</span>
            </div>
            
            <div class="flex justify-between items-center">
              <span class="text-gray-400">Your Role</span>
              <span class="font-semibold">
                {% if is_captain %}
                  <i class="fas fa-crown text-yellow-400"></i> Captain
                {% else %}
                  <i class="fas fa-user"></i> Member
                {% endif %}
              </span>
            </div>
            
            <div class="flex justify-between items-center">
              <span class="text-gray-400">Team Status</span>
              <span class="font-semibold">
                {% if team.is_active %}
                  <span class="text-green-400"><i class="fas fa-check-circle"></i> Active</span>
                {% else %}
                  <span class="text-gray-400"><i class="fas fa-pause-circle"></i> Inactive</span>
                {% endif %}
              </span>
            </div>

            <div class="flex justify-between items-center">
              <span class="text-gray-400">Recruitment</span>
              <span class="font-semibold">
                {% if team.is_open %}
                  <span class="text-green-400"><i class="fas fa-unlock"></i> Open</span>
                {% else %}
                  <span class="text-yellow-400"><i class="fas fa-lock"></i> Invite Only</span>
                {% endif %}
              </span>
            </div>
          </div>
        </div>
        
        <!-- Team Achievements Card -->
        <div class="card glass p-6">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-medal text-yellow-400"></i>
            Team Achievements
          </h3>
          
          <div class="space-y-3">
            {% if team.achievements.exists %}
              {% for achievement in team.achievements.all|slice:":4" %}
              <div class="flex items-center gap-3 p-3 rounded-lg bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border border-yellow-500/20">
                <div class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center flex-shrink-0">
                  <i class="fas fa-trophy text-yellow-400"></i>
                </div>
                <div class="flex-1">
                  <div class="font-semibold text-sm">{{ achievement.title }}</div>
                  <div class="text-xs text-gray-400">{{ achievement.earned_date|date:"M d, Y" }}</div>
                </div>
              </div>
              {% endfor %}
              {% if team.achievements.count > 4 %}
              <a href="#" class="text-sm text-cyan-400 hover:text-cyan-300 flex items-center gap-2">
                <span>View all {{ team.achievements.count }} achievements</span>
                <i class="fas fa-arrow-right"></i>
              </a>
              {% endif %}
            {% else %}
              <div class="text-center py-6 text-gray-500">
                <i class="fas fa-medal text-3xl mb-2 opacity-50"></i>
                <p class="text-sm">No achievements yet</p>
                <p class="text-xs">Participate in tournaments to earn achievements!</p>
              </div>
            {% endif %}
          </div>
        </div>

        <!-- Upcoming Events Card -->
        <div class="card glass p-6">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-calendar-check text-purple-400"></i>
            Upcoming Events
          </h3>
          
          <div class="space-y-3">
            {% if team.upcoming_matches or team.upcoming_tournaments %}
              {% for event in team.upcoming_events|slice:":3" %}
              <div class="p-3 rounded-lg border border-purple-500/20 bg-purple-500/5 hover:bg-purple-500/10 transition-colors">
                <div class="flex items-start gap-3">
                  <div class="w-10 h-10 rounded bg-purple-500/20 flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-{{ event.icon|default:'calendar' }} text-purple-400"></i>
                  </div>
                  <div class="flex-1">
                    <div class="font-semibold text-sm">{{ event.title }}</div>
                    <div class="text-xs text-gray-400">{{ event.date|date:"M d, Y - g:i A" }}</div>
                  </div>
                </div>
              </div>
              {% endfor %}
            {% else %}
              <div class="text-center py-6 text-gray-500">
                <i class="fas fa-calendar-times text-3xl mb-2 opacity-50"></i>
                <p class="text-sm">No upcoming events</p>
              </div>
            {% endif %}
          </div>
        </div>

        <!-- Team Resources Card -->
        <div class="card glass p-6">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-book text-blue-400"></i>
            Team Resources
          </h3>
          
          <div class="space-y-2">
            <a href="#" class="flex items-center gap-3 p-3 rounded hover:bg-white/5 transition-colors" onclick="alert('Team strategies feature coming soon!'); return false;">
              <i class="fas fa-chess text-blue-400"></i>
              <span>Strategies & Tactics</span>
            </a>
            
            <a href="#" class="flex items-center gap-3 p-3 rounded hover:bg-white/5 transition-colors" onclick="alert('Training materials feature coming soon!'); return false;">
              <i class="fas fa-graduation-cap text-green-400"></i>
              <span>Training Materials</span>
            </a>
            
            <a href="#" class="flex items-center gap-3 p-3 rounded hover:bg-white/5 transition-colors" onclick="alert('Match recordings feature coming soon!'); return false;">
              <i class="fas fa-video text-red-400"></i>
              <span>Match Recordings</span>
            </a>
            
            <a href="#" class="flex items-center gap-3 p-3 rounded hover:bg-white/5 transition-colors" onclick="alert('Team wiki feature coming soon!'); return false;">
              <i class="fas fa-file-alt text-purple-400"></i>
              <span>Team Wiki</span>
            </a>
          </div>
        </div>

        <!-- Recent Activity Card -->
        <div class="card glass p-6 md:col-span-2">
          <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-history text-green-400"></i>
            Recent Activity
          </h3>
          
          <div class="space-y-3 max-h-64 overflow-y-auto">
            {% if team.recent_activities %}
              {% for activity in team.recent_activities|slice:":5" %}
              <div class="p-3 rounded-lg bg-gray-800/50 border border-gray-700 flex items-start gap-3">
                <i class="fas {{ activity.icon }} text-cyan-400 mt-1"></i>
                <div class="flex-1">
                  <p class="text-sm">{{ activity.description }}</p>
                  <span class="text-xs text-gray-500">{{ activity.created_at|timesince }} ago</span>
                </div>
              </div>
              {% endfor %}
            {% else %}
              <div class="text-center py-8 text-gray-500">
                <i class="fas fa-inbox text-4xl mb-2 opacity-50"></i>
                <p>No recent activity</p>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </section>
    {% endif %}

    <section id="tab-matches" class="tab-panel mt-4 hidden">
      {% include "teams/_matches.html" with team=team %}
    </section>

    <section id="tab-stats" class="tab-panel mt-4 hidden">
      {% include "teams/_stats_blocks.html" with team=team %}
    </section>

    <section id="tab-media" class="tab-panel mt-4 hidden">
      <div class="card glass p-4">
        {% if team.discord or team.youtube or team.twitch or team.facebook %}
          <h3 class="text-lg font-semibold mb-2">Social & Media</h3>
          <ul class="list-disc pl-6">
            {% if team.discord %}<li><a class="link" href="{{ team.discord }}" target="_blank" rel="noopener">Discord</a></li>{% endif %}
            {% if team.youtube %}<li><a class="link" href="{{ team.youtube }}" target="_blank" rel="noopener">YouTube</a></li>{% endif %}
            {% if team.twitch %}<li><a class="link" href="{{ team.twitch }}" target="_blank" rel="noopener">Twitch</a></li>{% endif %}
            {% if team.facebook %}<li><a class="link" href="{{ team.facebook }}" target="_blank" rel="noopener">Facebook</a></li>{% endif %}
          </ul>
        {% else %}
          <p class="text-gray-600 dark:text-gray-300">No media links yet.</p>
        {% endif %}
      </div>
    </section>
  </div>
</div>

<script src="{% static 'teams/js/team-join-modern.js' %}" defer></script>
<script src="{% static 'teams/js/team-leave-modern.js' %}" defer></script>
<script src="{% static 'siteui/js/teams-detail.js' %}" defer></script>

<script>
  // Initialize modern team join on detail page
  document.addEventListener('DOMContentLoaded', function() {
    const joinBtn = document.querySelector('.join-team-btn');
    if (joinBtn) {
      joinBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const teamSlug = this.dataset.teamSlug;
        const teamName = this.dataset.teamName;
        const gameCode = this.dataset.gameCode;
        const gameName = this.dataset.gameName;
        
        const modernJoin = new ModernTeamJoin();
        modernJoin.initJoin(teamSlug, teamName, gameCode, gameName);
      });
    }
  });

  // Function to update game ID
  function updateGameID(gameCode, gameName) {
    const modal = new ModernTeamJoin();
    modal.gameCode = gameCode;
    modal.gameName = gameName;
    modal.teamSlug = '{{ team.slug }}';
    modal.teamData = { name: '{{ team.name }}' };
    modal.needsGameID = true;
    
    // Show game ID modal for update
    modal.showGameIDModal();
  }

  // Function to show team notifications
  function showTeamNotifications() {
    // Create notifications modal
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80';
    modal.innerHTML = `
      <div class="card glass max-w-2xl w-full max-h-[80vh] overflow-y-auto">
        <div class="flex items-center justify-between p-6 border-b border-gray-700">
          <h3 class="text-2xl font-bold flex items-center gap-2">
            <i class="fas fa-bell text-cyan-400"></i>
            Team Notifications
          </h3>
          <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-white">
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>
        <div class="p-6">
          <div class="space-y-3">
            <div class="p-4 rounded-lg bg-cyan-900/20 border border-cyan-700/50">
              <div class="flex items-start gap-3">
                <i class="fas fa-trophy text-cyan-400 mt-1"></i>
                <div class="flex-1">
                  <p class="font-semibold">Tournament Registration Open</p>
                  <p class="text-sm text-gray-400 mt-1">New tournament available for registration</p>
                  <span class="text-xs text-gray-500">2 hours ago</span>
                </div>
              </div>
            </div>
            
            <div class="p-4 rounded-lg bg-purple-900/20 border border-purple-700/50">
              <div class="flex items-start gap-3">
                <i class="fas fa-user-plus text-purple-400 mt-1"></i>
                <div class="flex-1">
                  <p class="font-semibold">New Member Joined</p>
                  <p class="text-sm text-gray-400 mt-1">A new player has joined the team</p>
                  <span class="text-xs text-gray-500">5 hours ago</span>
                </div>
              </div>
            </div>

            <div class="text-center py-8 text-gray-500">
              <i class="fas fa-check-circle text-4xl mb-2 opacity-50"></i>
              <p>You're all caught up!</p>
            </div>
          </div>
        </div>
      </div>
    `;
    document.body.appendChild(modal);
  }
</script>
{% endblock %}

{% block footer %}
{# Footer removed for team detail page #}
{% endblock %}
