# Generated by ChatGPT on 2025-09-06 11:39
from django.db import migrations, models
import django.db.models.deletion

class Migration(migrations.Migration):
    dependencies = [
        ("teams", "0011_alter_team_game"),
        ("tournaments", "0001_initial"),
    ]

    operations = [
        migrations.CreateModel(
            name="TeamAchievement",
            fields=[
                ("id", models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("title", models.CharField(max_length=160)),
                ("placement", models.CharField(choices=[("WINNER", "Winner"), ("RUNNER_UP", "Runner-up"), ("TOP4", "Top 4"), ("TOP8", "Top 8"), ("PARTICIPANT", "Participant")], default="PARTICIPANT", max_length=20)),
                ("year", models.PositiveIntegerField(blank=True, null=True)),
                ("notes", models.CharField(blank=True, default="", max_length=255)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("team", models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name="achievements", to="teams.team")),
                ("tournament", models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name="team_achievements", to="tournaments.tournament")),
            ],
            options={"ordering": ["-year", "title"]},
        ),
        migrations.CreateModel(
            name="TeamStats",
            fields=[
                ("id", models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("matches_played", models.PositiveIntegerField(default=0)),
                ("wins", models.PositiveIntegerField(default=0)),
                ("losses", models.PositiveIntegerField(default=0)),
                ("win_rate", models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ("streak", models.IntegerField(default=0, help_text="Positive = current win streak, negative = current loss streak")),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("team", models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name="stats_snapshots", to="teams.team")),
            ],
            options={"ordering": ["-updated_at"]},
        ),
        migrations.AddIndex(
            model_name="teamachievement",
            index=models.Index(fields=["team"], name="teams_team_team_id_ach_idx"),
        ),
        migrations.AddIndex(
            model_name="teamachievement",
            index=models.Index(fields=["year"], name="teams_team_year_idx"),
        ),
        migrations.AddIndex(
            model_name="teamstats",
            index=models.Index(fields=["team"], name="teams_stat_team_idx"),
        ),
        migrations.AddIndex(
            model_name="teamstats",
            index=models.Index(fields=["updated_at"], name="teams_stat_updated_idx"),
        ),
    ]
