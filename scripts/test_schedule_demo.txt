# Test TournamentSchedule in Django shell
from datetime import timedelta
from django.utils import timezone
from apps.tournaments.models import Tournament, TournamentSchedule

print("=" * 60)
print("ğŸ¯ TournamentSchedule Pilot Demonstration")
print("=" * 60)
print()

# Create test tournament
print("1ï¸âƒ£  Creating test tournament...")
tournament = Tournament.objects.create(
    name="Test Tournament - Schedule Demo",
    slug="test-schedule-demo",
    game="valorant",
    status="DRAFT"
)
print(f"   âœ… Created: {tournament.name}")
print()

# Create schedule
print("2ï¸âƒ£  Creating schedule...")
now = timezone.now()
schedule = TournamentSchedule.objects.create(
    tournament=tournament,
    reg_open_at=now + timedelta(days=1),
    reg_close_at=now + timedelta(days=7),
    start_at=now + timedelta(days=8),
    end_at=now + timedelta(days=9),
    check_in_open_mins=60,
    check_in_close_mins=10,
)
print(f"   âœ… Schedule created")
print(f"   ğŸ“… Registration: {schedule.get_registration_window_display()}")
print(f"   ğŸ“… Tournament: {schedule.get_tournament_window_display()}")
print()

# Access via relationship
print("3ï¸âƒ£  Accessing schedule via tournament...")
retrieved_schedule = tournament.schedule
print(f"   âœ… tournament.schedule works!")
print(f"   ğŸ”— Schedule ID: {retrieved_schedule.id}")
print()

# Test computed properties
print("4ï¸âƒ£  Testing computed properties...")
print(f"   ğŸ“Š Registration Status: {schedule.registration_status}")
print(f"   ğŸ“Š Tournament Status: {schedule.tournament_status}")
print(f"   ğŸ“Š Check-in Window: {schedule.check_in_window_text}")
print(f"   ğŸ”´ Registration Open? {schedule.is_registration_open}")
print(f"   ğŸ”´ Tournament Live? {schedule.is_tournament_live}")
print(f"   ğŸ”´ Check-in Open? {schedule.is_check_in_open}")
print()

# Cleanup
print("5ï¸âƒ£  Cleaning up test data...")
tournament.delete()
print("   âœ… Test tournament deleted")
print()

print("=" * 60)
print("ğŸ‰ Demonstration Complete!")
print("=" * 60)
