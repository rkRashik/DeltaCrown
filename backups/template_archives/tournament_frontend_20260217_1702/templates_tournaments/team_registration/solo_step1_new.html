{% extends "tournaments/team_registration/base.html" %}

{% block content %}
<div class="space-y-8">
    <!-- Step Header -->
    <div class="text-center">
        <h2 class="text-3xl font-bold text-white mb-2">
            <span class="text-4xl mr-2">ğŸ®</span>
            Player Information
        </h2>
        <p class="text-gray-400">Register for {{ tournament.name }}</p>
    </div>

    <!-- Form -->
    <form method="POST" class="space-y-8">
        {% csrf_token %}
        <input type="hidden" name="step" value="1">

        <!-- Personal Information Section -->
        <div class="gradient-border rounded-lg p-6">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="text-2xl mr-2">ğŸ‘¤</span>
                Personal Information
            </h3>
            
            <div class="space-y-4">
                <!-- Full Name - ALWAYS REQUIRED -->
                <div>
                    <label for="full_name" class="block text-sm font-medium text-gray-300 mb-2">
                        Full Name <span class="text-red-500">*</span>
                    </label>
                    <div class="text-xs text-gray-400 mb-2">
                        <i class="fas fa-info-circle mr-1"></i>
                        Enter your real name
                    </div>
                    <input type="text" id="full_name" name="full_name" required
                        value="{% if user.first_name or user.last_name %}{{ user.get_full_name }}{% endif %}"
                        placeholder="Amanul Hakim"
                        class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                </div>

                <!-- Display Name/IGN - ALWAYS REQUIRED -->
                <div>
                    <label for="display_name" class="block text-sm font-medium text-gray-300 mb-2">
                        Display Name (Nickname) <span class="text-red-500">*</span>
                    </label>
                    <div class="text-xs text-gray-400 mb-2">
                        <i class="fas fa-info-circle mr-1"></i>
                        This name will appear in brackets & streams
                    </div>
                    <input type="text" id="display_name" name="display_name" required
                        placeholder="RazorBlade"
                        class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Age - CONDITIONAL -->
                    {% if form_config.enable_age_field %}
                    <div>
                        <label for="age" class="block text-sm font-medium text-gray-300 mb-2">
                            Age <span class="text-red-500">*</span>
                        </label>
                        <div class="text-xs text-gray-400 mb-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            Must be 13 or older to participate
                        </div>
                        <input type="number" id="age" name="age" required min="13" max="100"
                            placeholder="18"
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                    </div>
                    {% endif %}

                    <!-- Country - CONDITIONAL -->
                    {% if form_config.enable_country_field %}
                    <div>
                        <label for="country" class="block text-sm font-medium text-gray-300 mb-2">
                            Country <span class="text-red-500">*</span>
                        </label>
                        <select id="country" name="country" required
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white">
                            <option value="">Select country...</option>
                            <option value="Bangladesh">ğŸ‡§ğŸ‡© Bangladesh</option>
                            <option value="India">ğŸ‡®ğŸ‡³ India</option>
                            <option value="Pakistan">ğŸ‡µğŸ‡° Pakistan</option>
                            <option value="Nepal">ğŸ‡³ğŸ‡µ Nepal</option>
                            <option value="Sri Lanka">ğŸ‡±ğŸ‡° Sri Lanka</option>
                            <option value="Other">ğŸŒ Other</option>
                        </select>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Game Information Section -->
        <div class="gradient-border rounded-lg p-6">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="text-2xl mr-2">ğŸ¯</span>
                Game Information
            </h3>
            
            <div class="space-y-4">
                <!-- Game ID (e.g., Riot ID) - ALWAYS REQUIRED -->
                <div>
                    <label for="game_id" class="block text-sm font-medium text-gray-300 mb-2">
                        {{ tournament.game.profile_id_field|default:"Game ID" }} <span class="text-red-500">*</span>
                    </label>
                    <div class="text-xs text-gray-400 mb-2">
                        <i class="fas fa-info-circle mr-1"></i>
                        {% if tournament.game.slug == 'valorant' %}
                        Format: PlayerName#TAG (e.g., Warrior#BD01)
                        {% elif tournament.game.slug == 'pubg-mobile' %}
                        Your PUBG Mobile ID
                        {% elif tournament.game.slug == 'mobile-legends' %}
                        Your Mobile Legends ID and IGN
                        {% else %}
                        Your in-game player ID
                        {% endif %}
                    </label>
                    <input type="text" id="game_id" name="game_id" required
                        placeholder="{% if tournament.game.slug == 'valorant' %}PlayerName#BD01{% else %}Enter your ID{% endif %}"
                        class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Platform/Server - CONDITIONAL -->
                    {% if form_config.enable_platform_field %}
                    <div>
                        <label for="platform" class="block text-sm font-medium text-gray-300 mb-2">
                            Platform/Server <span class="text-red-500">*</span>
                        </label>
                        <select id="platform" name="platform" required
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white">
                            <option value="">Select platform...</option>
                            <option value="PC">ğŸ–¥ï¸ PC</option>
                            <option value="Mobile">ğŸ“± Mobile</option>
                            <option value="Console">ğŸ® Console</option>
                            <option value="APAC">ğŸŒ Asia-Pacific</option>
                            <option value="NA">ğŸŒ North America</option>
                            <option value="EU">ğŸŒ Europe</option>
                        </select>
                    </div>
                    {% endif %}

                    <!-- Current Rank - CONDITIONAL -->
                    {% if form_config.enable_rank_field %}
                    <div>
                        <label for="rank" class="block text-sm font-medium text-gray-300 mb-2">
                            Current Rank <span class="text-gray-400">(Optional)</span>
                        </label>
                        <input type="text" id="rank" name="rank"
                            placeholder="{% if tournament.game.slug == 'valorant' %}e.g., Diamond 2{% elif tournament.game.slug == 'pubg-mobile' %}e.g., Crown III{% else %}Your rank{% endif %}"
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Contact Information Section -->
        <div class="gradient-border rounded-lg p-6">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="text-2xl mr-2">ğŸ“</span>
                Contact Information
            </h3>
            
            <div class="space-y-4">
                <!-- Email - ALWAYS REQUIRED -->
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">
                        Email Address <span class="text-red-500">*</span>
                    </label>
                    <div class="text-xs text-gray-400 mb-2">
                        <i class="fas fa-info-circle mr-1"></i>
                        We'll send match info here
                    </div>
                    <input type="email" id="email" name="email" required
                        value="{{ user.email }}"
                        placeholder="amanul@example.com"
                        class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Phone/WhatsApp - CONDITIONAL -->
                    {% if form_config.enable_phone_field %}
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-300 mb-2">
                            WhatsApp / Phone Number <span class="text-red-500">*</span>
                        </label>
                        <div class="text-xs text-gray-400 mb-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            Urgent match updates
                        </div>
                        <input type="tel" id="phone" name="phone" required
                            placeholder="01700000000"
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                    </div>
                    {% endif %}

                    <!-- Discord - CONDITIONAL -->
                    {% if form_config.enable_discord_field %}
                    <div>
                        <label for="discord" class="block text-sm font-medium text-gray-300 mb-2">
                            Discord Username <span class="text-red-500">*</span>
                        </label>
                        <div class="text-xs text-gray-400 mb-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            Example: Razor#1234
                        </div>
                        <input type="text" id="discord" name="discord" required
                            placeholder="Razor#1234"
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500">
                    </div>
                    {% endif %}
                </div>

                <!-- Preferred Contact Method - CONDITIONAL -->
                {% if form_config.enable_preferred_contact_field %}
                <div>
                    <label for="preferred_contact" class="block text-sm font-medium text-gray-300 mb-2">
                        Preferred Contact Method <span class="text-red-500">*</span>
                    </label>
                    <select id="preferred_contact" name="preferred_contact" required
                        class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white">
                        <option value="">Select method...</option>
                        <option value="Email">ğŸ“§ Email</option>
                        <option value="WhatsApp">ğŸ’¬ WhatsApp</option>
                        <option value="Discord">ğŸ® Discord</option>
                        <option value="Telegram">ğŸ“± Telegram</option>
                    </select>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex justify-between items-center pt-6">
            <a href="{{ tournament.get_absolute_url }}" 
               class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>Cancel
            </a>
            <button type="submit" 
                    class="px-8 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-semibold transition-colors">
                Next: Review & Terms
                <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </form>
</div>
{% endblock %}
