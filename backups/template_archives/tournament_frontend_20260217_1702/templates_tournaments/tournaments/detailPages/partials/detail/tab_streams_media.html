{# Streams & Media Tab - Live streams and VODs #}

<section class="td-tab-panel td-tab-panel-streams" data-tab="streams-media">
  <div class="td-streams-header">
    <h2 class="td-streams-title">Streams & Media</h2>
    <p class="td-streams-subtitle">Watch live broadcasts and highlights</p>
  </div>

  {% if has_streams %}
    {# Featured Stream Section #}
    {% if featured_stream %}
      <section class="td-featured-stream">
        <div class="td-featured-stream-header">
          <h3 class="td-featured-stream-title">
            {% if featured_stream.is_live %}
              <span class="td-live-indicator">ðŸ”´ LIVE</span>
            {% endif %}
            {{ featured_stream.title }}
          </h3>
          <div class="td-stream-platform">
            {% if featured_stream.platform == 'youtube' %}
              <span class="td-platform-badge td-platform-youtube">YouTube</span>
            {% elif featured_stream.platform == 'twitch' %}
              <span class="td-platform-badge td-platform-twitch">Twitch</span>
            {% else %}
              <span class="td-platform-badge">Stream</span>
            {% endif %}
          </div>
        </div>
        
        <div class="td-stream-player">
          <div class="td-stream-embed">
            <iframe 
              src="{{ featured_stream.embed_url }}" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen
              title="{{ featured_stream.title }}">
            </iframe>
          </div>
        </div>
        
        <div class="td-stream-footer">
          <a href="{{ featured_stream.url }}" class="td-stream-external-link" target="_blank" rel="noopener noreferrer">
            <span class="td-link-icon">ðŸ”—</span>
            Open in new tab
          </a>
        </div>
      </section>
    {% endif %}

    {# Additional Streams Section #}
    {% if additional_streams %}
      <section class="td-additional-streams">
        <h3 class="td-section-subtitle">Additional Streams</h3>
        <div class="td-streams-grid">
          {% for stream in additional_streams %}
            <article class="td-stream-card">
              <div class="td-stream-card-header">
                <h4 class="td-stream-card-title">{{ stream.title }}</h4>
                {% if stream.language %}
                  <span class="td-stream-language">{{ stream.language }}</span>
                {% endif %}
              </div>
              <a href="{{ stream.url }}" class="td-stream-card-link" target="_blank" rel="noopener noreferrer">
                Watch Stream â†’
              </a>
            </article>
          {% endfor %}
        </div>
      </section>
    {% endif %}

    {# VODs Section #}
    {% if vods %}
      <section class="td-vods-section">
        <h3 class="td-section-subtitle">Past Broadcasts</h3>
        <div class="td-vods-grid">
          {% for vod in vods %}
            <article class="td-vod-card">
              {% if vod.thumbnail %}
                <div class="td-vod-thumbnail">
                  <img src="{{ vod.thumbnail }}" alt="{{ vod.title }}">
                  {% if vod.duration %}
                    <span class="td-vod-duration">{{ vod.duration }}</span>
                  {% endif %}
                </div>
              {% endif %}
              <div class="td-vod-content">
                <h4 class="td-vod-title">{{ vod.title }}</h4>
                {% if vod.uploaded_at %}
                  <p class="td-vod-date">{{ vod.uploaded_at|date:"M d, Y" }}</p>
                {% endif %}
                <a href="{{ vod.url }}" class="td-vod-link" target="_blank" rel="noopener noreferrer">
                  <span class="td-link-icon">â–¶</span>
                  Watch Replay
                </a>
              </div>
            </article>
          {% endfor %}
        </div>
      </section>
    {% endif %}

  {% else %}
    {# Empty State #}
    <div class="td-streams-empty">
      <div class="td-empty-icon">ðŸ“º</div>
      <p class="td-empty-title">No streams have been added yet</p>
      <p class="td-empty-subtitle">
        Check back later for live broadcasts and highlights from this tournament
      </p>
    </div>
  {% endif %}
</section>

