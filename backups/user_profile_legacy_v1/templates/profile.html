{% extends "base.html" %}
{% load static %}

{% block title %}{{ profile.display_name|default:profile_user.username }} - Esports Portfolio{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block content %}
<!-- ============================================
     GLASSMORPHIC CYBERPUNK 2025 USER PROFILE
     Module 1: Design System Applied
     Module 2: Cinematic Hero Section
     ============================================ -->

<div class="min-h-screen bg-slate-950">
    
    <!-- ============================================
         MODULE 2: THE CINEMATIC HERO SECTION
         Full-width banner with dynamic action bar
         ============================================ -->
    <section class="relative w-full h-[220px] md:h-[280px] overflow-hidden">
        <!-- Background Image -->
        {% if profile.banner %}
            <img src="{{ profile.banner.url }}" 
                 alt="{{ profile.display_name }}'s Banner" 
                 class="absolute inset-0 w-full h-full object-cover">
        {% else %}
            <!-- Default Gradient Background -->
            <div class="absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600"></div>
            <!-- Cyber Grid Overlay -->
            <div class="absolute inset-0 opacity-20" style="background-image: repeating-linear-gradient(0deg, transparent, transparent 50px, rgba(255,255,255,0.05) 50px, rgba(255,255,255,0.05) 51px), repeating-linear-gradient(90deg, transparent, transparent 50px, rgba(255,255,255,0.05) 50px, rgba(255,255,255,0.05) 51px);"></div>
        {% endif %}
        
        <!-- Cinematic Fade Overlay (Bottom 100px) -->
        <div class="absolute bottom-0 left-0 right-0 h-32 hero-fade"></div>
        
        <!-- Content Container (Bottom Aligned) -->
        <div class="absolute bottom-0 left-0 right-0 container mx-auto px-4 md:px-6 pb-6">
            <!-- Mobile Layout: Center Aligned -->
            <div class="md:hidden flex flex-col items-center text-center">
                <!-- Avatar (Large Circle with Overlap) -->
                <div class="relative -mb-16">
                    {% if profile.avatar %}
                        <img src="{{ profile.avatar.url }}" 
                             alt="{{ profile_user.username }}" 
                             class="w-32 h-32 rounded-full border-[6px] border-slate-950 object-cover {% if profile.is_live %}ring-4 ring-rose-500 pulse-glow{% endif %}">
                    {% else %}
                        <div class="w-32 h-32 rounded-full border-[6px] border-slate-950 bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-5xl font-black text-white {% if profile.is_live %}ring-4 ring-rose-500 pulse-glow{% endif %}">
                            {{ profile_user.username|first|upper }}
                        </div>
                    {% endif %}
                    
                    <!-- Live Badge (If streaming) -->
                    {% if profile.is_live %}
                    <div class="absolute bottom-0 right-0 px-2 py-1 bg-rose-600 rounded-full text-xs font-black text-white uppercase live-badge flex items-center gap-1">
                        <span class="w-2 h-2 bg-white rounded-full"></span>
                        Live
                    </div>
                    {% endif %}
                </div>
                
                <!-- Name & Gamertag -->
                <div class="mt-20">
                    <h1 class="text-3xl md:text-5xl font-black uppercase tracking-tight text-white flex items-center justify-center gap-2">
                        {{ profile.display_name|default:profile_user.username }}
                        {% if profile.is_kyc_verified %}
                        <span class="verified-badge">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                        </span>
                        {% endif %}
                    </h1>
                    <p class="text-sm md:text-base text-slate-400 mt-2 font-semibold">
                        @{{ profile_user.username }} ‚Ä¢ Lvl {{ profile.level }}
                    </p>
                </div>
            </div>
            
            <!-- Desktop Layout: Left Aligned with Action Bar -->
            <div class="hidden md:flex items-end justify-between">
                <div class="flex items-end gap-6">
                    <!-- Avatar (Large Circle with Overlap) -->
                    <div class="relative">
                        {% if profile.avatar %}
                            <img src="{{ profile.avatar.url }}" 
                                 alt="{{ profile_user.username }}" 
                                 class="w-40 h-40 rounded-full border-[6px] border-slate-950 object-cover {% if profile.is_live %}ring-4 ring-rose-500 pulse-glow{% endif %}">
                        {% else %}
                            <div class="w-40 h-40 rounded-full border-[6px] border-slate-950 bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-6xl font-black text-white {% if profile.is_live %}ring-4 ring-rose-500 pulse-glow{% endif %}">
                                {{ profile_user.username|first|upper }}
                            </div>
                        {% endif %}
                        
                        <!-- Live Badge -->
                        {% if profile.is_live %}
                        <div class="absolute bottom-2 right-2 px-3 py-1.5 bg-rose-600 rounded-full text-xs font-black text-white uppercase live-badge flex items-center gap-1.5">
                            <span class="w-2.5 h-2.5 bg-white rounded-full"></span>
                            Live
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Name & Gamertag -->
                    <div class="pb-2">
                        <h1 class="text-5xl font-black uppercase tracking-tight text-white flex items-center gap-3">
                            {{ profile.display_name|default:profile_user.username }}
                            {% if profile.is_kyc_verified %}
                            <span class="verified-badge">
                                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                            </span>
                            {% endif %}
                        </h1>
                        <p class="text-base text-slate-400 mt-2 font-semibold">
                            @{{ profile_user.username }} ‚Ä¢ Lvl {{ profile.level }}
                        </p>
                    </div>
                </div>
                
                <!-- DYNAMIC ACTION BAR (Owner vs Visitor) -->
                <div class="pb-2">
                    {% if is_own_profile %}
                    <!-- SCENARIO A: I AM THE OWNER - Settings & Share Only -->
                    <div class="flex items-center gap-3">
                        <!-- Settings Button -->
                        <a href="{% url 'user_profile:settings' %}" 
                           class="px-5 py-2.5 glass-card hover:border-indigo-500/50 rounded-lg text-white font-bold text-sm transition-all flex items-center gap-2 shadow-lg">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            ‚öô Settings
                        </a>
                        
                        <!-- Share Portfolio Button -->
                        <button onclick="shareProfile()" 
                                class="px-5 py-2.5 glass-card hover:border-indigo-500/50 rounded-lg text-white font-bold text-sm transition-all flex items-center gap-2 shadow-lg">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                            </svg>
                            ‚Üó Share
                        </button>
                    </div>
                    
                    {% else %}
                    <!-- SCENARIO B: I AM A VISITOR - Visitor Actions -->
                    <div class="flex items-center gap-3">
                        <!-- Follow Button -->
                        <button id="followBtn" 
                                onclick="toggleFollow('{{ profile_user.id }}')"
                                data-following="false"
                                class="px-6 py-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg text-white font-bold text-sm transition-all flex items-center gap-2 shadow-lg">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                            </svg>
                            Follow
                        </button>
                        
                        <!-- Challenge Button (Rose Gradient) -->
                        <button class="px-6 py-3 bg-gradient-to-r from-rose-600 to-pink-600 hover:from-rose-700 hover:to-pink-700 rounded-lg text-white font-bold text-sm transition-all flex items-center gap-2 shadow-lg">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                            </svg>
                            Challenge
                        </button>
                        
                        <!-- Message Button (Glass Ghost) -->
                        <button class="px-5 py-3 glass-card hover:border-indigo-500/50 rounded-lg text-white font-bold text-sm transition-all flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                            </svg>
                            Message
                        </button>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
    
    <!-- Mobile Action Bar (Fixed at Bottom - Visible only on Mobile for Visitors) -->
    {% if not is_own_profile %}
    <div class="md:hidden fixed bottom-0 left-0 right-0 z-50 mobile-action-bar p-4">
        <div class="flex items-center gap-3">
            <button id="followBtnMobile" 
                    onclick="toggleFollow('{{ profile_user.id }}')"
                    data-following="false"
                    class="flex-1 px-4 py-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg text-white font-bold text-sm transition-all flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                </svg>
                Follow
            </button>
            
            <button class="flex-1 px-4 py-3 bg-gradient-to-r from-rose-600 to-pink-600 rounded-lg text-white font-bold text-sm transition-all flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                </svg>
                Challenge
            </button>
            
            <button class="px-4 py-3 glass-card rounded-lg text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
            </button>
        </div>
    </div>
    {% endif %}
    
    <!-- CSRF Token for AJAX requests -->
    {% csrf_token %}
    
    <!-- ============================================
         MODULE 3 + 4: DESKTOP 3-COLUMN LAYOUT
         Left: Identity & Trust
         Middle: Game Feed (Trophies, Passport, Matches)
         Right: Career & Economy (Next section)
         ============================================ -->
    <div class="hidden md:grid grid-cols-12 gap-6 container mx-auto px-4 md:px-6 py-8 pb-20">
        
        <!-- ==================== LEFT COLUMN: IDENTITY & TRUST (col-span-3, Sticky) ==================== -->
        <aside class="col-span-3 space-y-6 sticky top-24 h-fit">
            
            <!-- IDENTITY CARD (Avatar + Name + Action Buttons) -->
            <div class="glass-card rounded-2xl p-6 shadow-2xl">
                <!-- Avatar (128px with Pulsing Green Border) -->
                <div class="flex justify-center mb-4">
                    <div class="relative">
                        {% if profile.avatar %}
                            <img src="{{ profile.avatar.url }}" 
                                 alt="{{ profile_user.username }}" 
                                 class="w-32 h-32 rounded-full border-4 border-emerald-500 shadow-lg shadow-emerald-500/50 object-cover animate-pulse-border">
                        {% else %}
                            <div class="w-32 h-32 rounded-full border-4 border-emerald-500 shadow-lg shadow-emerald-500/50 bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-5xl font-black text-white animate-pulse-border">
                                {{ profile_user.username|first|upper }}
                            </div>
                        {% endif %}
                        
                        <!-- Verification Badge -->
                        {% if profile.is_kyc_verified %}
                            <div class="absolute bottom-0 right-0 w-8 h-8 bg-blue-500 rounded-full border-2 border-slate-950 flex items-center justify-center">
                                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Name & Username -->
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-black text-white mb-1 tracking-tight uppercase flex items-center justify-center gap-2">
                        {{ profile.display_name|default:profile_user.username }}
                        {% if profile.is_kyc_verified %}
                            <span class="text-blue-400 text-xl" title="Verified">‚úî</span>
                        {% endif %}
                    </h2>
                    <p class="text-sm text-slate-400">@{{ profile_user.username }} ‚Ä¢ Lvl {{ profile.level }}</p>
                </div>
                
                <!-- Action Buttons -->
                {% if is_own_profile %}
                    <div class="grid grid-cols-2 gap-3">
                        <a href="{% url 'user_profile:settings' %}" 
                           class="px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white text-center font-bold text-sm transition-colors shadow-lg">
                            Edit
                        </a>
                        <button onclick="shareProfile()" 
                                class="px-4 py-2.5 bg-slate-700/60 hover:bg-slate-700 border border-white/10 rounded-lg text-white font-bold text-sm transition-colors">
                            Share
                        </button>
                    </div>
                {% else %}
                    <div class="grid grid-cols-2 gap-3">
                        <button id="followBtnSidebar" 
                                onclick="toggleFollow('{{ profile_user.id }}')"
                                data-following="false"
                                class="px-4 py-2.5 bg-emerald-600 hover:bg-emerald-700 rounded-lg text-white font-bold text-sm transition-colors shadow-lg">
                            Follow
                        </button>
                        <button class="px-4 py-2.5 bg-slate-700/60 hover:bg-slate-700 border border-white/10 rounded-lg text-white font-bold text-sm transition-colors">
                            Message
                        </button>
                    </div>
                {% endif %}
            </div>
            
            <!-- CARD 1: VITAL STATS (The Passport) -->
            <div class="glass-card rounded-2xl p-6">
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-5 border-b border-white/10 pb-3">
                    Vital Statistics
                </h3>
                
                <div class="space-y-4">
                    <!-- Location -->
                    {% if privacy_settings.show_country and profile.country %}
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">üìç</span>
                        <div class="flex-1">
                            <p class="text-sm font-bold text-white">Location</p>
                            <p class="text-sm text-slate-300">
                                {% if profile.country_flag %}{{ profile.country_flag }}{% endif %} 
                                {{ profile.country }}{% if profile.city %}, {{ profile.city }}{% endif %}
                            </p>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Age -->
                    {% if privacy_settings.show_age and profile.age %}
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">üéÇ</span>
                        <div class="flex-1">
                            <p class="text-sm font-bold text-white">Age</p>
                            <p class="text-sm text-slate-300">{{ profile.age }} years old</p>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Phone -->
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">üìû</span>
                        <div class="flex-1">
                            <p class="text-sm font-bold text-white">Phone</p>
                            {% if is_own_profile or privacy_settings.show_phone %}
                                {% if profile.phone %}
                                    <p class="text-sm text-slate-300">{{ profile.phone }}</p>
                                {% else %}
                                    <p class="text-sm text-slate-500 italic">Not provided</p>
                                {% endif %}
                            {% else %}
                                <div class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                                    </svg>
                                    <p class="text-sm text-slate-500">Hidden</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Trust Meter -->
                    <div class="border-t border-white/10 pt-5 mt-5">
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-xs font-black text-slate-400 uppercase tracking-wide">Reputation Score</span>
                            <span class="text-sm font-bold text-emerald-400">{{ profile.reputation_score|default:85 }}%</span>
                        </div>
                        <div class="w-full bg-slate-800 rounded-full h-2 overflow-hidden">
                            <div id="reputationBar" 
                                 class="reputation-fill h-2 rounded-full bg-gradient-to-r from-emerald-500 to-blue-500" 
                                 data-score="{{ profile.reputation_score|default:85 }}"
                                 style="width: 0%;"></div>
                        </div>
                        <p class="text-xs font-semibold mt-2 {% if profile.reputation_score >= 80 %}text-emerald-400{% elif profile.reputation_score >= 50 %}text-amber-400{% else %}text-rose-400{% endif %}">
                            {% if profile.reputation_score >= 80 %}
                                ‚úì High Trust
                            {% elif profile.reputation_score >= 50 %}
                                ‚ö† Moderate Trust
                            {% else %}
                                ‚ö† Low Trust
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- CARD 2: SOCIAL GRID -->
            {% if privacy_settings.show_social_links and social %}
            <div class="glass-card rounded-2xl p-6">
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-5 border-b border-white/10 pb-3">
                    Connected Socials
                </h3>
                
                <div class="space-y-3">
                    {% for link in social %}
                    <a href="{{ link.url }}" 
                       target="_blank" 
                       class="flex items-center gap-3 p-3 rounded-lg bg-slate-800/60 hover:bg-slate-700 border border-white/10 hover:border-white/20 transition-all group">
                        <!-- Platform Icon -->
                        <div class="w-10 h-10 rounded-lg flex items-center justify-center text-2xl flex-shrink-0
                                    {% if link.platform == 'Discord' %}bg-[#5865F2]/20
                                    {% elif link.platform == 'Twitch' %}bg-[#9146FF]/20
                                    {% elif link.platform == 'YouTube' %}bg-[#FF0000]/20
                                    {% elif link.platform == 'Facebook' %}bg-[#1877F2]/20
                                    {% elif link.platform == 'Twitter' %}bg-[#1DA1F2]/20
                                    {% elif link.platform == 'Instagram' %}bg-gradient-to-br from-[#f09433] to-[#bc1888]
                                    {% else %}bg-slate-700/50
                                    {% endif %}">
                            {% if link.platform == "Discord" %}üéÆ
                            {% elif link.platform == "Twitch" %}üì∫
                            {% elif link.platform == "YouTube" %}‚ñ∂Ô∏è
                            {% elif link.platform == "Facebook" %}üë•
                            {% elif link.platform == "Twitter" %}üê¶
                            {% elif link.platform == "Instagram" %}üì∑
                            {% endif %}
                        </div>
                        
                        <!-- Platform Info -->
                        <div class="flex-1 min-w-0">
                            <p class="text-sm font-bold text-white group-hover:text-indigo-400 transition-colors">
                                {{ link.platform }}
                            </p>
                            {% if link.handle %}
                            <p class="text-xs text-slate-400 truncate">{{ link.handle }}</p>
                            {% endif %}
                        </div>
                        
                        <!-- Status Badge -->
                        {% if link.platform == "Discord" %}
                            <span class="text-xs px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded-full font-semibold">Online</span>
                        {% elif link.platform == "Twitch" and link.is_live %}
                            <span class="text-xs px-2 py-1 bg-rose-600 text-white rounded-full font-semibold live-badge">LIVE</span>
                        {% endif %}
                        
                        <!-- Arrow Icon -->
                        <svg class="w-4 h-4 text-slate-500 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
        </aside>
        
        <!-- ==================== MIDDLE COLUMN: THE GAME FEED (col-span-6, Scrollable) ==================== -->
        <main class="col-span-6 space-y-6">
            
            <!-- COMPONENT 1: THE TROPHY SHELF -->
            {% if pinned_badges %}
            <div class="glass-card rounded-2xl p-6">
                <h3 class="text-sm font-black text-white mb-5 flex items-center gap-3 border-b border-white/10 pb-4">
                    <span class="text-3xl trophy-glow">üèÜ</span> Trophy Cabinet
                </h3>
                
                <div class="flex gap-6 overflow-x-auto pb-3 scrollbar-hide">
                    {% for user_badge in pinned_badges %}
                    <div class="flex-shrink-0 text-center group cursor-pointer" data-tooltip="{{ user_badge.badge.name }}">
                        <div class="w-20 h-20 rounded-xl bg-gradient-to-br from-amber-400 via-yellow-500 to-orange-600 flex items-center justify-center text-4xl mb-2 transform group-hover:scale-110 transition-transform shadow-xl trophy-glow border-2 border-amber-400/50">
                            {{ user_badge.badge.icon|default:"üèÜ" }}
                        </div>
                        <p class="text-xs text-slate-300 font-semibold max-w-[80px] truncate">
                            {{ user_badge.badge.name }}
                        </p>
                        <p class="text-[10px] text-slate-500 mt-0.5">{{ user_badge.earned_date|date:"M Y" }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            <!-- COMPONENT 2: GAME PASSPORT (Complex Tabs) -->
            <div class="glass-card rounded-2xl overflow-hidden" x-data="{ activeGame: '{{ game_profiles.0.game|default:"valorant" }}' }">
                <div class="border-b border-white/10 p-6">
                    <h3 class="text-sm font-black text-white mb-4 flex items-center gap-3">
                        <span class="text-3xl">üéÆ</span> Game Passport
                    </h3>
                    
                    <!-- Tab Navigation -->
                    <div class="flex gap-2 overflow-x-auto scrollbar-hide">
                        {% for game_profile in game_profiles %}
                        <button @click="activeGame = '{{ game_profile.game }}'" 
                                :class="activeGame === '{{ game_profile.game }}' ? 'game-tab active bg-indigo-600 text-white' : 'game-tab bg-slate-800/40 text-slate-400 hover:bg-slate-800/60'"
                                class="px-6 py-3 rounded-lg text-sm font-black uppercase tracking-wide transition-all whitespace-nowrap">
                            {{ game_profile.game }}
                        </button>
                        {% empty %}
                        <p class="text-slate-500 text-sm py-4">No game profiles added</p>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- Tab Content -->
                <div class="p-6">
                    {% for game_profile in game_profiles %}
                    <div x-show="activeGame === '{{ game_profile.game }}'" class="space-y-6">
                        <div class="bg-slate-800/40 rounded-xl p-6 border border-white/10">
                            <div class="flex items-start gap-6 mb-6">
                                <!-- RANK ICON (Large) -->
                                {% if game_profile.rank %}
                                <div class="flex-shrink-0">
                                    <div class="w-28 h-28 rank-badge rounded-xl flex items-center justify-center shadow-2xl">
                                        <div class="text-center">
                                            <div class="text-2xl font-black text-white mb-1">{{ game_profile.rank|truncatewords:1|upper }}</div>
                                            <div class="text-xs text-white/90 uppercase font-bold tracking-wide">Rank</div>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                <div class="flex-1">
                                    <h4 class="text-3xl font-black text-white mb-2">{{ game_profile.game|upper }}</h4>
                                    {% if game_profile.rank %}
                                    <p class="text-lg text-indigo-400 font-bold mb-1">{{ game_profile.rank }}</p>
                                    <p class="text-sm text-slate-400">(Top 5% of Region)</p>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <!-- ID FIELD (Copyable) -->
                            {% if game_profile.ign %}
                            <div class="bg-slate-900/60 rounded-lg p-4 mb-5 border border-white/10">
                                <div class="flex items-center justify-between">
                                    <div class="flex-1">
                                        <p class="text-xs text-slate-400 mb-1 uppercase font-bold tracking-wide">
                                            {% if game_profile.game == "Valorant" %}Riot ID
                                            {% elif game_profile.game == "CS2" %}Steam ID
                                            {% else %}Player ID{% endif %}
                                        </p>
                                        <p class="text-white font-black text-xl">{{ game_profile.ign }}</p>
                                    </div>
                                    <button id="copyIgn{{ forloop.counter }}" 
                                            onclick="copyToClipboard('{{ game_profile.ign }}', 'copyIgn{{ forloop.counter }}')" 
                                            class="px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-sm text-white font-bold transition-all flex items-center gap-2 ml-4 shadow-lg">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                        </svg>
                                        Copy
                                    </button>
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- ROLES (Badges) -->
                            {% if game_profile.role %}
                            <div>
                                <p class="text-xs text-slate-400 mb-3 uppercase font-bold tracking-wide">Main Roles</p>
                                <div class="flex gap-3 flex-wrap">
                                    <span class="px-4 py-2 bg-gradient-to-r from-rose-600 to-pink-600 text-white rounded-lg text-sm font-black flex items-center gap-2 shadow-lg">
                                        <span class="text-lg">ü§∫</span> {{ game_profile.role }}
                                    </span>
                                    {% if game_profile.platform %}
                                    <span class="px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg text-sm font-black flex items-center gap-2 shadow-lg">
                                        <span class="text-lg">üéÆ</span> {{ game_profile.platform }}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- COMPONENT 3: MATCH HISTORY FEED -->
            <div class="glass-card rounded-2xl p-6">
                <h3 class="text-sm font-black text-white mb-5 flex items-center gap-3 border-b border-white/10 pb-4">
                    <span class="text-3xl">üìä</span> Match History
                </h3>
                
                <div class="space-y-3">
                    {% if match_history %}
                        {% for match in match_history %}
                        <!-- Match Row (Win/Loss with colored border) -->
                        <div onclick="goToMatch('{{ match.id }}')" 
                             class="{% if match.result == 'win' %}win-strip{% else %}loss-strip{% endif %} rounded-lg p-4 cursor-pointer match-row hover:border-white/20 border border-white/5 transition-all">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-3">
                                    <span class="px-3 py-1 rounded-md text-xs font-black uppercase {% if match.result == 'win' %}bg-emerald-500/20 text-emerald-400{% else %}bg-rose-500/20 text-rose-400{% endif %}">
                                        {% if match.result == 'win' %}‚úì WIN{% else %}‚úó LOSS{% endif %}
                                    </span>
                                    <span class="text-white font-bold">vs {{ match.opponent }}</span>
                                </div>
                                <span class="text-xs text-slate-400">{{ match.time_ago }}</span>
                            </div>
                            
                            <div class="flex items-center justify-between text-sm">
                                <div class="flex items-center gap-3 text-slate-300">
                                    <span class="font-semibold">({{ match.game }})</span>
                                    <span class="text-slate-600">‚Ä¢</span>
                                    <span>Map: {{ match.map }}</span>
                                </div>
                                <span class="text-white font-black text-lg">{{ match.score }}</span>
                            </div>
                            
                            {% if match.stats %}
                            <div class="mt-3 pt-3 border-t border-white/5 text-sm text-indigo-400 font-semibold">
                                Stats: {{ match.stats }}
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    {% else %}
                    <!-- Empty State -->
                    <div class="text-center py-16 border-2 border-dashed border-white/10 rounded-xl bg-slate-900/20">
                        <div class="text-7xl mb-4 opacity-50">üéÆ</div>
                        <p class="text-slate-400 font-bold text-lg">No match history yet</p>
                        <p class="text-sm text-slate-500 mt-2">Join a tournament to see your matches here!</p>
                    </div>
                    {% endif %}
                </div>
                
                {% if match_history %}
                <button class="w-full mt-6 px-4 py-3 bg-slate-800/40 hover:bg-slate-800/60 border border-white/10 hover:border-indigo-500/50 rounded-lg text-white text-sm font-black transition-all">
                    View Full History ‚Üí
                </button>
                {% endif %}
            </div>
            
        </main>
        
        <!-- ==================== RIGHT COLUMN: CAREER & ECONOMY (col-span-3, Sticky) ==================== -->
        <aside class="col-span-3 space-y-6 sticky top-24 h-fit">
            
            <!-- CARD 1: CURRENT TEAM -->
            {% if current_teams %}
            {% for team_data in current_teams|slice:":1" %}
            <div onclick="goToTeam('{{ team_data.team.slug }}')" 
                 class="glass-card rounded-2xl p-6 cursor-pointer team-card hover-lift">
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-5 border-b border-white/10 pb-3">
                    Current Team
                </h3>
                
                <!-- Team Logo -->
                <div class="text-center mb-5">
                    {% if team_data.logo_url %}
                    <img src="{{ team_data.logo_url }}" 
                         alt="{{ team_data.team.name }}" 
                         class="w-24 h-24 mx-auto rounded-xl object-cover border-2 border-indigo-500/40 shadow-xl">
                    {% else %}
                    <div class="w-24 h-24 mx-auto rounded-xl bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-4xl font-black text-white border-2 border-indigo-500/40 shadow-xl">
                        {{ team_data.team.name|first }}
                    </div>
                    {% endif %}
                    <h4 class="text-xl font-black text-white mt-4">{{ team_data.team.name|upper }}</h4>
                </div>
                
                <!-- Role -->
                <div class="mb-5 text-center">
                    <p class="text-sm text-indigo-400 font-bold">
                        Role: {{ team_data.role }}{% if team_data.is_captain %} (Captain){% endif %}
                    </p>
                </div>
                
                <!-- Facepile: 3 Overlapping Avatars -->
                <div class="mb-5 bg-slate-800/40 rounded-lg p-4 border border-white/10">
                    <p class="text-xs text-slate-400 mb-3 uppercase font-bold tracking-wide text-center">Roster</p>
                    <div class="flex items-center justify-center">
                        <div class="facepile flex">
                            <img src="https://ui-avatars.com/api/?name=Player+1&background=4f46e5&color=fff" 
                                 class="w-10 h-10 rounded-full" alt="Teammate 1">
                            <img src="https://ui-avatars.com/api/?name=Player+2&background=7c3aed&color=fff" 
                                 class="w-10 h-10 rounded-full" alt="Teammate 2">
                            <img src="https://ui-avatars.com/api/?name=Player+3&background=db2777&color=fff" 
                                 class="w-10 h-10 rounded-full" alt="Teammate 3">
                        </div>
                        <span class="ml-3 text-sm text-slate-300 font-bold">+2</span>
                    </div>
                </div>
                
                <!-- View Team Button -->
                <div class="flex items-center justify-center gap-2 text-indigo-400 font-bold text-sm">
                    <span>View Team Page</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </div>
            </div>
            {% endfor %}
            {% endif %}
            
            <!-- CARD 2: DELTACOIN WALLET (Private/Public with Blur) -->
            {% if is_own_profile and wallet_balance is not None %}
            <div class="bg-gradient-to-br from-indigo-600 via-violet-700 to-purple-800 rounded-2xl p-6 border border-white/20 shadow-2xl">
                <div class="flex items-center justify-between mb-5 pb-3 border-b border-white/20">
                    <h3 class="text-xs font-black text-white/90 uppercase tracking-wider">
                        üí≥ DeltaCoin Wallet
                    </h3>
                    <button onclick="toggleWalletBlur()" 
                            id="walletEyeIcon"
                            class="text-white/70 hover:text-white transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Balance Display (with animated coin) -->
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-5 mb-5 border border-white/20 relative overflow-hidden">
                    <!-- Spinning Coin Icon -->
                    <div class="absolute top-2 right-2 text-4xl opacity-20 animate-spin-slow">
                        üí∞
                    </div>
                    
                    <p class="text-xs text-white/70 mb-2 uppercase tracking-wide">Balance</p>
                    <p id="walletBalance" class="text-4xl font-black text-white wallet-blur">
                        {{ wallet_balance|floatformat:0 }} <span class="text-xl text-white/90">DC</span>
                    </p>
                </div>
                
                <!-- Sparkline Graph (Earnings Trend) -->
                <div class="mb-5">
                    <p class="text-xs text-white/70 mb-3 uppercase tracking-wide">Earnings Trend (30d)</p>
                    <svg class="w-full h-16" viewBox="0 0 200 50" preserveAspectRatio="none">
                        <polyline class="sparkline" 
                                  points="0,40 25,30 50,25 75,15 100,10 125,18 150,22 175,12 200,8"/>
                    </svg>
                </div>
                
                <!-- Top Up Button -->
                <button class="w-full px-4 py-3 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg text-white text-sm font-black transition-all shadow-lg border border-white/20 flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                    </svg>
                    Deposit Funds
                </button>
            </div>
            
            {% elif not is_own_profile and wallet_balance is not None %}
            <!-- Visitor View: Blurred Wallet -->
            <div class="bg-gradient-to-br from-slate-700 to-slate-800 rounded-2xl p-6 border border-white/10 shadow-2xl relative overflow-hidden">
                <div class="absolute inset-0 backdrop-blur-xl bg-slate-900/50 flex items-center justify-center z-10">
                    <div class="text-center">
                        <svg class="w-12 h-12 mx-auto mb-3 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                        <p class="text-sm font-bold text-slate-400">Wallet is Private</p>
                    </div>
                </div>
                
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-5">
                    üí≥ DeltaCoin Wallet
                </h3>
                <div class="bg-white/5 rounded-xl p-5">
                    <p class="text-3xl font-black text-slate-600">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢ DC</p>
                </div>
            </div>
            {% endif %}
            
            <!-- CARD 3: CERTIFICATE VAULT -->
            <div class="glass-card rounded-2xl p-6">
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-5 border-b border-white/10 pb-3">
                    Certificate Vault
                </h3>
                
                <div class="space-y-3">
                    <!-- Certificate Item 1 -->
                    <div class="cert-item bg-slate-800/40 rounded-lg p-4 border border-white/10 hover:border-indigo-500/50 transition-all cursor-pointer group">
                        <div class="flex items-center gap-3">
                            <div class="text-3xl">üìÑ</div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-bold text-white group-hover:text-indigo-400 transition-colors">
                                    Season 1 Certificate
                                </p>
                                <p class="text-xs text-slate-400">(Verified PDF)</p>
                            </div>
                            <button onclick="downloadCertificate('/media/certificates/season1.pdf', 'Season1_Cert.pdf')" 
                                    class="cert-download text-indigo-400 hover:text-indigo-300 transition-all">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Certificate Item 2 -->
                    <div class="cert-item bg-slate-800/40 rounded-lg p-4 border border-white/10 hover:border-indigo-500/50 transition-all cursor-pointer group">
                        <div class="flex items-center gap-3">
                            <div class="text-3xl">üìÑ</div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-bold text-white group-hover:text-indigo-400 transition-colors">
                                    MVP Award
                                </p>
                                <p class="text-xs text-slate-400">(Verified PDF)</p>
                            </div>
                            <button onclick="downloadCertificate('/media/certificates/mvp.pdf', 'MVP_Award.pdf')" 
                                    class="cert-download text-indigo-400 hover:text-indigo-300 transition-all">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- View Vault Button -->
                <button class="w-full mt-5 px-4 py-3 bg-slate-800/40 hover:bg-slate-800/60 border border-white/10 hover:border-indigo-500/50 rounded-lg text-white text-sm font-black transition-all flex items-center justify-center gap-2">
                    View Full Vault
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
            
        </aside>
        
    </div>
    
    <!-- ============================================
         MODULE 6: MOBILE RESPONSIVENESS (App View)
         Sticky Tab Navigation with Content Mapping
         ============================================ -->
    <div class="md:hidden" x-data="{ tab: 'info' }">
        
        <!-- Sticky Tab Navigation -->
        <div class="sticky top-0 z-50 bg-slate-950/90 backdrop-blur-xl border-b border-white/10 shadow-xl">
            <div class="flex items-center justify-around">
                <button @click="tab = 'info'" 
                        :class="tab === 'info' ? 'tab-active' : 'text-slate-400'"
                        class="flex-1 py-4 text-sm font-black uppercase tracking-wide transition-all">
                    [ INFO ]
                </button>
                <button @click="tab = 'games'" 
                        :class="tab === 'games' ? 'tab-active' : 'text-slate-400'"
                        class="flex-1 py-4 text-sm font-black uppercase tracking-wide transition-all">
                    [ GAMES ]
                </button>
                <button @click="tab = 'career'" 
                        :class="tab === 'career' ? 'tab-active' : 'text-slate-400'"
                        class="flex-1 py-4 text-sm font-black uppercase tracking-wide transition-all">
                    [ CAREER ]
                </button>
            </div>
        </div>
        
        <!-- Mobile Content Sections -->
        <div class="px-4 py-6 pb-24 space-y-6">
            
            <!-- ==================== TAB: INFO ==================== -->
            <div x-show="tab === 'info'" class="space-y-6">
                
                <!-- Identity Card (Mobile) -->
                <div class="glass-card rounded-2xl p-6">
                    <!-- Avatar -->
                    <div class="flex justify-center mb-4">
                        {% if profile.avatar %}
                            <img src="{{ profile.avatar.url }}" 
                                 alt="{{ profile_user.username }}" 
                                 class="w-28 h-28 rounded-full border-4 border-emerald-500 shadow-lg shadow-emerald-500/50 object-cover">
                        {% else %}
                            <div class="w-28 h-28 rounded-full border-4 border-emerald-500 shadow-lg shadow-emerald-500/50 bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-4xl font-black text-white">
                                {{ profile_user.username|first|upper }}
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Name -->
                    <div class="text-center mb-4">
                        <h2 class="text-xl font-black text-white mb-1 uppercase">
                            {{ profile.display_name|default:profile_user.username }}
                            {% if profile.is_kyc_verified %}<span class="text-blue-400">‚úî</span>{% endif %}
                        </h2>
                        <p class="text-sm text-slate-400">@{{ profile_user.username }} ‚Ä¢ Lvl {{ profile.level }}</p>
                    </div>
                </div>
                
                <!-- Vital Stats Card -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-5 border-b border-white/10 pb-3">
                        Vital Statistics
                    </h3>
                    
                    <div class="space-y-4">
                        {% if privacy_settings.show_country and profile.country %}
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üìç</span>
                            <div>
                                <p class="text-sm font-bold text-white">{{ profile.country }}{% if profile.city %}, {{ profile.city }}{% endif %}</p>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if privacy_settings.show_age and profile.age %}
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">üéÇ</span>
                            <div>
                                <p class="text-sm font-bold text-white">{{ profile.age }} years old</p>
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- Trust Meter -->
                        <div class="border-t border-white/10 pt-4 mt-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-xs font-black text-slate-400 uppercase">Reputation</span>
                                <span class="text-sm font-bold text-emerald-400">{{ profile.reputation_score|default:85 }}%</span>
                            </div>
                            <div class="w-full bg-slate-800 rounded-full h-2">
                                <div class="h-2 rounded-full bg-gradient-to-r from-emerald-500 to-blue-500" 
                                     style="width: {{ profile.reputation_score|default:85 }}%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Trophy Shelf (Horizontal Scroll) -->
                {% if pinned_badges %}
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-sm font-black text-white mb-4 flex items-center gap-2">
                        <span class="text-2xl">üèÜ</span> Trophies
                    </h3>
                    <div class="flex gap-4 overflow-x-auto scrollbar-hide pb-2">
                        {% for user_badge in pinned_badges %}
                        <div class="flex-shrink-0 text-center">
                            <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-amber-400 to-orange-600 flex items-center justify-center text-3xl shadow-xl border-2 border-amber-400/50">
                                {{ user_badge.badge.icon|default:"üèÜ" }}
                            </div>
                            <p class="text-xs text-slate-300 mt-1 max-w-[64px] truncate">{{ user_badge.badge.name }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
                <!-- Social Grid -->
                {% if privacy_settings.show_social_links and social %}
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-4 border-b border-white/10 pb-3">
                        Connected Accounts
                    </h3>
                    <div class="grid grid-cols-3 gap-3">
                        {% for link in social %}
                        <a href="{{ link.url }}" target="_blank" 
                           class="aspect-square rounded-xl bg-slate-800/60 hover:bg-slate-700 border border-white/10 flex flex-col items-center justify-center text-center social-{{ link.platform|lower }}">
                            <div class="text-2xl mb-1">
                                {% if link.platform == "Discord" %}üéÆ
                                {% elif link.platform == "Twitch" %}üì∫
                                {% elif link.platform == "YouTube" %}‚ñ∂Ô∏è
                                {% elif link.platform == "Facebook" %}üë•
                                {% endif %}
                            </div>
                            <p class="text-xs font-bold text-white">{{ link.platform }}</p>
                        </a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
            </div>
            
            <!-- ==================== TAB: GAMES ==================== -->
            <div x-show="tab === 'games'" class="space-y-6">
                
                <!-- Game Passport (Mobile Version) -->
                <div class="glass-card rounded-2xl p-6" x-data="{ activeGame: '{{ game_profiles.0.game|default:"valorant" }}' }">
                    <h3 class="text-sm font-black text-white mb-4 flex items-center gap-2">
                        <span class="text-2xl">üéÆ</span> Game Passport
                    </h3>
                    
                    <!-- Game Tabs (Horizontal Scroll) -->
                    <div class="flex gap-2 overflow-x-auto scrollbar-hide mb-5">
                        {% for game_profile in game_profiles %}
                        <button @click="activeGame = '{{ game_profile.game }}'" 
                                :class="activeGame === '{{ game_profile.game }}' ? 'bg-indigo-600 text-white' : 'bg-slate-800/40 text-slate-400'"
                                class="px-5 py-2.5 rounded-lg text-sm font-black uppercase whitespace-nowrap transition-all">
                            {{ game_profile.game }}
                        </button>
                        {% endfor %}
                    </div>
                    
                    <!-- Game Content -->
                    {% for game_profile in game_profiles %}
                    <div x-show="activeGame === '{{ game_profile.game }}'">
                        <div class="bg-slate-800/40 rounded-xl p-5 border border-white/10">
                            <h4 class="text-2xl font-black text-white mb-3">{{ game_profile.game|upper }}</h4>
                            {% if game_profile.rank %}
                            <p class="text-lg text-indigo-400 font-bold mb-2">{{ game_profile.rank }}</p>
                            {% endif %}
                            {% if game_profile.ign %}
                            <div class="mt-4 p-3 bg-slate-900/60 rounded-lg">
                                <p class="text-xs text-slate-400 mb-1 uppercase font-bold">Player ID</p>
                                <p class="text-white font-black">{{ game_profile.ign }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Match History (Mobile) -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-sm font-black text-white mb-4 flex items-center gap-2">
                        <span class="text-2xl">üìä</span> Match History
                    </h3>
                    
                    {% if match_history %}
                        <div class="space-y-3">
                            {% for match in match_history %}
                            <div class="{% if match.result == 'win' %}win-strip{% else %}loss-strip{% endif %} rounded-lg p-4 border border-white/5">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="px-2 py-1 rounded text-xs font-black {% if match.result == 'win' %}bg-emerald-500/20 text-emerald-400{% else %}bg-rose-500/20 text-rose-400{% endif %}">
                                        {% if match.result == 'win' %}WIN{% else %}LOSS{% endif %}
                                    </span>
                                    <span class="text-xs text-slate-400">{{ match.time_ago }}</span>
                                </div>
                                <p class="text-sm font-bold text-white mb-1">vs {{ match.opponent }}</p>
                                <p class="text-xs text-slate-400">{{ match.game }} ‚Ä¢ {{ match.score }}</p>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                    <div class="text-center py-12 border-2 border-dashed border-white/10 rounded-xl">
                        <div class="text-5xl mb-3 opacity-50">üéÆ</div>
                        <p class="text-slate-400 font-bold">No matches yet</p>
                    </div>
                    {% endif %}
                </div>
                
            </div>
            
            <!-- ==================== TAB: CAREER ==================== -->
            <div x-show="tab === 'career'" class="space-y-6">
                
                <!-- Current Team (Mobile) -->
                {% if current_teams %}
                {% for team_data in current_teams|slice:":1" %}
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-4 border-b border-white/10 pb-3">
                        Current Team
                    </h3>
                    <div class="text-center">
                        {% if team_data.logo_url %}
                        <img src="{{ team_data.logo_url }}" 
                             class="w-20 h-20 mx-auto rounded-xl mb-3 border-2 border-indigo-500/40">
                        {% else %}
                        <div class="w-20 h-20 mx-auto rounded-xl bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center text-3xl font-black text-white mb-3">
                            {{ team_data.team.name|first }}
                        </div>
                        {% endif %}
                        <h4 class="text-lg font-black text-white">{{ team_data.team.name|upper }}</h4>
                        <p class="text-sm text-indigo-400 mt-1">{{ team_data.role }}</p>
                    </div>
                </div>
                {% endfor %}
                {% endif %}
                
                <!-- Wallet (Mobile - Owner Only) -->
                {% if is_own_profile and wallet_balance is not None %}
                <div class="bg-gradient-to-br from-indigo-600 to-purple-800 rounded-2xl p-6 border border-white/20 shadow-2xl">
                    <h3 class="text-xs font-black text-white/90 uppercase tracking-wider mb-4">üí≥ Wallet</h3>
                    <p class="text-3xl font-black text-white">{{ wallet_balance|floatformat:0 }} <span class="text-lg">DC</span></p>
                    <button class="w-full mt-4 px-4 py-2.5 bg-white/20 hover:bg-white/30 rounded-lg text-white text-sm font-black">
                        Deposit Funds
                    </button>
                </div>
                {% endif %}
                
                <!-- Certificates (Mobile) -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xs font-black text-slate-400 uppercase tracking-wider mb-4 border-b border-white/10 pb-3">
                        Certificates
                    </h3>
                    <div class="space-y-3">
                        <div class="bg-slate-800/40 rounded-lg p-4 border border-white/10 flex items-center gap-3">
                            <span class="text-2xl">üìÑ</span>
                            <div class="flex-1">
                                <p class="text-sm font-bold text-white">Season 1 Cert</p>
                                <p class="text-xs text-slate-400">Verified PDF</p>
                            </div>
                        </div>
                        <div class="bg-slate-800/40 rounded-lg p-4 border border-white/10 flex items-center gap-3">
                            <span class="text-2xl">üìÑ</span>
                            <div class="flex-1">
                                <p class="text-sm font-bold text-white">MVP Award</p>
                                <p class="text-xs text-slate-400">Verified PDF</p>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            
        </div>
    </div>
    
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/profile.js' %}"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
{% endblock %}
