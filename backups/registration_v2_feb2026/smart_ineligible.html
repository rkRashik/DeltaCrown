{% extends "tournaments/base.html" %}
{% load static %}

{% block title %}Cannot Register â€” {{ tournament.name }} | DeltaCrown{% endblock %}

{% block tournament_css %}
<style>
    :root {
        --game-color: {{ game_color|default:"#06b6d4" }};
        --game-color-rgb: {{ game_color_rgb|default:"6, 182, 212" }};
        --bg-deep: #060608;
    }
    body { background: var(--bg-deep); }

    .ineligible-ambient {
        position: fixed; inset: 0; pointer-events: none; z-index: 0;
        background: radial-gradient(ellipse 100% 60% at 50% -10%, rgba(239, 68, 68, 0.04) 0%, transparent 60%);
    }

    @keyframes shakeX {
        0%, 100% { transform: translateX(0); }
        20%, 60% { transform: translateX(-6px); }
        40%, 80% { transform: translateX(6px); }
    }
    .shake-in { animation: shakeX 0.5s ease-out 0.2s; }

    .glass-card {
        background: rgba(12, 12, 18, 0.75);
        backdrop-filter: blur(20px) saturate(1.4);
        border: 1px solid rgba(255,255,255,0.05);
        box-shadow: 0 4px 30px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.03);
    }
    .btn-back {
        display: inline-flex; align-items: center; gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        border-radius: 0.75rem;
        background: linear-gradient(135deg, var(--game-color), rgba(var(--game-color-rgb), 0.8));
        color: #000; font-weight: 800; font-size: 0.8125rem;
        text-transform: uppercase; letter-spacing: 0.05em;
        cursor: pointer; transition: all 0.2s;
        box-shadow: 0 4px 20px rgba(var(--game-color-rgb), 0.25);
    }
    .btn-back:hover { transform: translateY(-1px); box-shadow: 0 6px 30px rgba(var(--game-color-rgb), 0.35); }
</style>
{% endblock %}

{% block tournament_content %}
<div class="ineligible-ambient"></div>

<div class="max-w-md mx-auto px-4 sm:px-6 py-16 relative z-10">

    <div class="text-center mb-8 shake-in">
        <div class="w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center bg-red-500/10 border-2 border-red-500/30">
            <i data-lucide="x" class="w-10 h-10 text-red-400"></i>
        </div>
        <h1 class="text-xl font-black text-white mb-2">Registration Unavailable</h1>
        <p class="text-sm text-gray-400">Unable to register for <span class="text-white font-semibold">{{ tournament.name }}</span></p>
    </div>

    <div class="glass-card rounded-2xl p-6 mb-6">
        <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-4">Reason</h3>
        <div class="space-y-3">
            {% for reason in reasons %}
            <div class="flex items-start gap-3 p-3 rounded-xl bg-red-500/5 border border-red-500/10">
                <i data-lucide="alert-circle" class="w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"></i>
                <p class="text-xs text-gray-300">{{ reason }}</p>
            </div>
            {% endfor %}
            {% if not reasons %}
            <div class="flex items-start gap-3 p-3 rounded-xl bg-red-500/5 border border-red-500/10">
                <i data-lucide="alert-circle" class="w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"></i>
                <p class="text-xs text-gray-300">You are not eligible to register for this tournament at this time.</p>
            </div>
            {% endif %}
        </div>

        {% if suggestions %}
        <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mt-6 mb-3">What you can do</h3>
        <div class="space-y-2">
            {% for suggestion in suggestions %}
            <div class="flex items-start gap-3">
                <div class="w-5 h-5 rounded flex items-center justify-center flex-shrink-0 mt-0.5" style="background: rgba(var(--game-color-rgb), 0.1);">
                    <i data-lucide="arrow-right" class="w-3 h-3" style="color: var(--game-color);"></i>
                </div>
                <p class="text-xs text-gray-400">{{ suggestion }}</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="text-center">
        <a href="{% url 'tournaments:detail' tournament.slug %}" class="btn-back">
            <i data-lucide="arrow-left" class="w-4 h-4"></i> Back to Tournament
        </a>
    </div>

</div>
{% endblock %}

{% block tournament_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    if (typeof lucide !== 'undefined') lucide.createIcons();
});
</script>
{% endblock %}
