{# Inline PDF.js viewer (theme-aware). Usage:
   {% include "tournaments/partials/_pdf_viewer.html" with cfg=pdf_viewer %}
   where cfg = {"url": "...", "filename": "rules.pdf", "theme": "auto", "downloadable": False}
#}
{% with viewer=cfg|default:pdf_viewer %}
<div class="dc-pdfviewer" data-theme="{{ viewer.theme|default:'auto' }}" data-pdf-url="{{ viewer.url|default:'' }}">
  {% if viewer.url %}
    <div class="dc-pdfviewer__toolbar" role="toolbar" aria-label="PDF controls">
      <button type="button" class="pv-btn" data-pv="prev" aria-label="Previous page">‹</button>
      <span class="pv-spacer"></span>
      <label class="pv-label">Page</label>
      <input type="number" class="pv-page" data-pv="page" min="1" value="1" aria-label="Current page">
      <span class="pv-of">/ <span class="pv-total" data-pv="total">?</span></span>
      <span class="pv-spacer"></span>
      <button type="button" class="pv-btn" data-pv="zoom-out" aria-label="Zoom out">−</button>
      <button type="button" class="pv-btn" data-pv="zoom-in" aria-label="Zoom in">+</button>
      {% if viewer.downloadable %}
        <a class="pv-btn" href="{{ viewer.url }}" download="{{ viewer.filename|default:'rules.pdf' }}" aria-label="Download PDF">↓</a>
      {% endif %}
    </div>

    <div class="dc-pdfviewer__canvaswrap">
      <canvas class="dc-pdfviewer__canvas" data-pv="canvas"></canvas>
    </div>

    <noscript>
      <p class="pv-fallback">
        PDF viewer needs JavaScript. You can <a href="{{ viewer.url }}">open {{ viewer.filename|default:'this PDF' }}</a> instead.
      </p>
    </noscript>
  {% else %}
    <p class="pv-empty">Rules PDF is not available.</p>
  {% endif %}
</div>
{% endwith %}
